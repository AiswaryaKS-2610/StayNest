(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();function xg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var xm={exports:{}},Tc={};var w0;function Y1(){if(w0)return Tc;w0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,h){var d=null;if(h!==void 0&&(d=""+h),l.key!==void 0&&(d=""+l.key),"key"in l){h={};for(var y in l)y!=="key"&&(h[y]=l[y])}else h=l;return l=h.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:h}}return Tc.Fragment=t,Tc.jsx=n,Tc.jsxs=n,Tc}var S0;function Q1(){return S0||(S0=1,xm.exports=Y1()),xm.exports}var _=Q1(),bm={exports:{}},Ht={};var A0;function X1(){if(A0)return Ht;A0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),I=Symbol.iterator;function O(H){return H===null||typeof H!="object"?null:(H=I&&H[I]||H["@@iterator"],typeof H=="function"?H:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,V={};function $(H,ut,_t){this.props=H,this.context=ut,this.refs=V,this.updater=_t||Z}$.prototype.isReactComponent={},$.prototype.setState=function(H,ut){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ut,"setState")},$.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function q(){}q.prototype=$.prototype;function nt(H,ut,_t){this.props=H,this.context=ut,this.refs=V,this.updater=_t||Z}var lt=nt.prototype=new q;lt.constructor=nt,G(lt,$.prototype),lt.isPureReactComponent=!0;var bt=Array.isArray;function Tt(){}var k={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function j(H,ut,_t){var yt=_t.ref;return{$$typeof:r,type:H,key:ut,ref:yt!==void 0?yt:null,props:_t}}function K(H,ut){return j(H.type,ut,H.props)}function F(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function Y(H){var ut={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(_t){return ut[_t]})}var B=/\/+/g;function oe(H,ut){return typeof H=="object"&&H!==null&&H.key!=null?Y(""+H.key):ut.toString(36)}function Je(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Tt,Tt):(H.status="pending",H.then(function(ut){H.status==="pending"&&(H.status="fulfilled",H.value=ut)},function(ut){H.status==="pending"&&(H.status="rejected",H.reason=ut)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ot(H,ut,_t,yt,St){var wt=typeof H;(wt==="undefined"||wt==="boolean")&&(H=null);var Ft=!1;if(H===null)Ft=!0;else switch(wt){case"bigint":case"string":case"number":Ft=!0;break;case"object":switch(H.$$typeof){case r:case t:Ft=!0;break;case w:return Ft=H._init,ot(Ft(H._payload),ut,_t,yt,St)}}if(Ft)return St=St(H),Ft=yt===""?"."+oe(H,0):yt,bt(St)?(_t="",Ft!=null&&(_t=Ft.replace(B,"$&/")+"/"),ot(St,ut,_t,"",function(pr){return pr})):St!=null&&(F(St)&&(St=K(St,_t+(St.key==null||H&&H.key===St.key?"":(""+St.key).replace(B,"$&/")+"/")+Ft)),ut.push(St)),1;Ft=0;var Ee=yt===""?".":yt+":";if(bt(H))for(var Ce=0;Ce<H.length;Ce++)yt=H[Ce],wt=Ee+oe(yt,Ce),Ft+=ot(yt,ut,_t,wt,St);else if(Ce=O(H),typeof Ce=="function")for(H=Ce.call(H),Ce=0;!(yt=H.next()).done;)yt=yt.value,wt=Ee+oe(yt,Ce++),Ft+=ot(yt,ut,_t,wt,St);else if(wt==="object"){if(typeof H.then=="function")return ot(Je(H),ut,_t,yt,St);throw ut=String(H),Error("Objects are not valid as a React child (found: "+(ut==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ut)+"). If you meant to render a collection of children, use an array instead.")}return Ft}function xt(H,ut,_t){if(H==null)return H;var yt=[],St=0;return ot(H,yt,"","",function(wt){return ut.call(_t,wt,St++)}),yt}function gt(H){if(H._status===-1){var ut=H._result;ut=ut(),ut.then(function(_t){(H._status===0||H._status===-1)&&(H._status=1,H._result=_t)},function(_t){(H._status===0||H._status===-1)&&(H._status=2,H._result=_t)}),H._status===-1&&(H._status=0,H._result=ut)}if(H._status===1)return H._result.default;throw H._result}var te=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ut=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ut))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},At={map:xt,forEach:function(H,ut,_t){xt(H,function(){ut.apply(this,arguments)},_t)},count:function(H){var ut=0;return xt(H,function(){ut++}),ut},toArray:function(H){return xt(H,function(ut){return ut})||[]},only:function(H){if(!F(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ht.Activity=C,Ht.Children=At,Ht.Component=$,Ht.Fragment=n,Ht.Profiler=l,Ht.PureComponent=nt,Ht.StrictMode=s,Ht.Suspense=v,Ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ht.__COMPILER_RUNTIME={__proto__:null,c:function(H){return k.H.useMemoCache(H)}},Ht.cache=function(H){return function(){return H.apply(null,arguments)}},Ht.cacheSignal=function(){return null},Ht.cloneElement=function(H,ut,_t){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var yt=G({},H.props),St=H.key;if(ut!=null)for(wt in ut.key!==void 0&&(St=""+ut.key),ut)!D.call(ut,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&ut.ref===void 0||(yt[wt]=ut[wt]);var wt=arguments.length-2;if(wt===1)yt.children=_t;else if(1<wt){for(var Ft=Array(wt),Ee=0;Ee<wt;Ee++)Ft[Ee]=arguments[Ee+2];yt.children=Ft}return j(H.type,St,yt)},Ht.createContext=function(H){return H={$$typeof:d,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:h,_context:H},H},Ht.createElement=function(H,ut,_t){var yt,St={},wt=null;if(ut!=null)for(yt in ut.key!==void 0&&(wt=""+ut.key),ut)D.call(ut,yt)&&yt!=="key"&&yt!=="__self"&&yt!=="__source"&&(St[yt]=ut[yt]);var Ft=arguments.length-2;if(Ft===1)St.children=_t;else if(1<Ft){for(var Ee=Array(Ft),Ce=0;Ce<Ft;Ce++)Ee[Ce]=arguments[Ce+2];St.children=Ee}if(H&&H.defaultProps)for(yt in Ft=H.defaultProps,Ft)St[yt]===void 0&&(St[yt]=Ft[yt]);return j(H,wt,St)},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(H){return{$$typeof:y,render:H}},Ht.isValidElement=F,Ht.lazy=function(H){return{$$typeof:w,_payload:{_status:-1,_result:H},_init:gt}},Ht.memo=function(H,ut){return{$$typeof:b,type:H,compare:ut===void 0?null:ut}},Ht.startTransition=function(H){var ut=k.T,_t={};k.T=_t;try{var yt=H(),St=k.S;St!==null&&St(_t,yt),typeof yt=="object"&&yt!==null&&typeof yt.then=="function"&&yt.then(Tt,te)}catch(wt){te(wt)}finally{ut!==null&&_t.types!==null&&(ut.types=_t.types),k.T=ut}},Ht.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ht.use=function(H){return k.H.use(H)},Ht.useActionState=function(H,ut,_t){return k.H.useActionState(H,ut,_t)},Ht.useCallback=function(H,ut){return k.H.useCallback(H,ut)},Ht.useContext=function(H){return k.H.useContext(H)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(H,ut){return k.H.useDeferredValue(H,ut)},Ht.useEffect=function(H,ut){return k.H.useEffect(H,ut)},Ht.useEffectEvent=function(H){return k.H.useEffectEvent(H)},Ht.useId=function(){return k.H.useId()},Ht.useImperativeHandle=function(H,ut,_t){return k.H.useImperativeHandle(H,ut,_t)},Ht.useInsertionEffect=function(H,ut){return k.H.useInsertionEffect(H,ut)},Ht.useLayoutEffect=function(H,ut){return k.H.useLayoutEffect(H,ut)},Ht.useMemo=function(H,ut){return k.H.useMemo(H,ut)},Ht.useOptimistic=function(H,ut){return k.H.useOptimistic(H,ut)},Ht.useReducer=function(H,ut,_t){return k.H.useReducer(H,ut,_t)},Ht.useRef=function(H){return k.H.useRef(H)},Ht.useState=function(H){return k.H.useState(H)},Ht.useSyncExternalStore=function(H,ut,_t){return k.H.useSyncExternalStore(H,ut,_t)},Ht.useTransition=function(){return k.H.useTransition()},Ht.version="19.2.3",Ht}var C0;function bg(){return C0||(C0=1,bm.exports=X1()),bm.exports}var M=bg();const jd=xg(M);var Em={exports:{}},wc={},Tm={exports:{}},wm={};var R0;function $1(){return R0||(R0=1,(function(r){function t(ot,xt){var gt=ot.length;ot.push(xt);t:for(;0<gt;){var te=gt-1>>>1,At=ot[te];if(0<l(At,xt))ot[te]=xt,ot[gt]=At,gt=te;else break t}}function n(ot){return ot.length===0?null:ot[0]}function s(ot){if(ot.length===0)return null;var xt=ot[0],gt=ot.pop();if(gt!==xt){ot[0]=gt;t:for(var te=0,At=ot.length,H=At>>>1;te<H;){var ut=2*(te+1)-1,_t=ot[ut],yt=ut+1,St=ot[yt];if(0>l(_t,gt))yt<At&&0>l(St,_t)?(ot[te]=St,ot[yt]=gt,te=yt):(ot[te]=_t,ot[ut]=gt,te=ut);else if(yt<At&&0>l(St,gt))ot[te]=St,ot[yt]=gt,te=yt;else break t}}return xt}function l(ot,xt){var gt=ot.sortIndex-xt.sortIndex;return gt!==0?gt:ot.id-xt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var d=Date,y=d.now();r.unstable_now=function(){return d.now()-y}}var v=[],b=[],w=1,C=null,I=3,O=!1,Z=!1,G=!1,V=!1,$=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;function lt(ot){for(var xt=n(b);xt!==null;){if(xt.callback===null)s(b);else if(xt.startTime<=ot)s(b),xt.sortIndex=xt.expirationTime,t(v,xt);else break;xt=n(b)}}function bt(ot){if(G=!1,lt(ot),!Z)if(n(v)!==null)Z=!0,Tt||(Tt=!0,Y());else{var xt=n(b);xt!==null&&Je(bt,xt.startTime-ot)}}var Tt=!1,k=-1,D=5,j=-1;function K(){return V?!0:!(r.unstable_now()-j<D)}function F(){if(V=!1,Tt){var ot=r.unstable_now();j=ot;var xt=!0;try{t:{Z=!1,G&&(G=!1,q(k),k=-1),O=!0;var gt=I;try{e:{for(lt(ot),C=n(v);C!==null&&!(C.expirationTime>ot&&K());){var te=C.callback;if(typeof te=="function"){C.callback=null,I=C.priorityLevel;var At=te(C.expirationTime<=ot);if(ot=r.unstable_now(),typeof At=="function"){C.callback=At,lt(ot),xt=!0;break e}C===n(v)&&s(v),lt(ot)}else s(v);C=n(v)}if(C!==null)xt=!0;else{var H=n(b);H!==null&&Je(bt,H.startTime-ot),xt=!1}}break t}finally{C=null,I=gt,O=!1}xt=void 0}}finally{xt?Y():Tt=!1}}}var Y;if(typeof nt=="function")Y=function(){nt(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,oe=B.port2;B.port1.onmessage=F,Y=function(){oe.postMessage(null)}}else Y=function(){$(F,0)};function Je(ot,xt){k=$(function(){ot(r.unstable_now())},xt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ot){ot.callback=null},r.unstable_forceFrameRate=function(ot){0>ot||125<ot?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ot?Math.floor(1e3/ot):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(ot){switch(I){case 1:case 2:case 3:var xt=3;break;default:xt=I}var gt=I;I=xt;try{return ot()}finally{I=gt}},r.unstable_requestPaint=function(){V=!0},r.unstable_runWithPriority=function(ot,xt){switch(ot){case 1:case 2:case 3:case 4:case 5:break;default:ot=3}var gt=I;I=ot;try{return xt()}finally{I=gt}},r.unstable_scheduleCallback=function(ot,xt,gt){var te=r.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?te+gt:te):gt=te,ot){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=gt+At,ot={id:w++,callback:xt,priorityLevel:ot,startTime:gt,expirationTime:At,sortIndex:-1},gt>te?(ot.sortIndex=gt,t(b,ot),n(v)===null&&ot===n(b)&&(G?(q(k),k=-1):G=!0,Je(bt,gt-te))):(ot.sortIndex=At,t(v,ot),Z||O||(Z=!0,Tt||(Tt=!0,Y()))),ot},r.unstable_shouldYield=K,r.unstable_wrapCallback=function(ot){var xt=I;return function(){var gt=I;I=xt;try{return ot.apply(this,arguments)}finally{I=gt}}}})(wm)),wm}var I0;function J1(){return I0||(I0=1,Tm.exports=$1()),Tm.exports}var Sm={exports:{}},Hn={};var P0;function tS(){if(P0)return Hn;P0=1;var r=bg();function t(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)b+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(v,b,w){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:v,containerInfo:b,implementation:w}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Hn.createPortal=function(v,b){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(t(299));return h(v,b,null,w)},Hn.flushSync=function(v){var b=d.T,w=s.p;try{if(d.T=null,s.p=2,v)return v()}finally{d.T=b,s.p=w,s.d.f()}},Hn.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(v,b))},Hn.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},Hn.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var w=b.as,C=y(w,b.crossOrigin),I=typeof b.integrity=="string"?b.integrity:void 0,O=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;w==="style"?s.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:C,integrity:I,fetchPriority:O}):w==="script"&&s.d.X(v,{crossOrigin:C,integrity:I,fetchPriority:O,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Hn.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var w=y(b.as,b.crossOrigin);s.d.M(v,{crossOrigin:w,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(v)},Hn.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var w=b.as,C=y(w,b.crossOrigin);s.d.L(v,w,{crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Hn.preloadModule=function(v,b){if(typeof v=="string")if(b){var w=y(b.as,b.crossOrigin);s.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:w,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(v)},Hn.requestFormReset=function(v){s.d.r(v)},Hn.unstable_batchedUpdates=function(v,b){return v(b)},Hn.useFormState=function(v,b,w){return d.H.useFormState(v,b,w)},Hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Hn.version="19.2.3",Hn}var N0;function Cb(){if(N0)return Sm.exports;N0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Sm.exports=tS(),Sm.exports}var D0;function eS(){if(D0)return wc;D0=1;var r=J1(),t=bg(),n=Cb();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var i=e,o=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(o=i.return),e=i.return;while(e)}return i.tag===3?o:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(s(188))}function b(e){var i=e.alternate;if(!i){if(i=h(e),i===null)throw Error(s(188));return i!==e?null:e}for(var o=e,c=i;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return v(m),e;if(g===c)return v(m),i;g=g.sibling}throw Error(s(188))}if(o.return!==c.return)o=m,c=g;else{for(var S=!1,P=m.child;P;){if(P===o){S=!0,o=m,c=g;break}if(P===c){S=!0,c=m,o=g;break}P=P.sibling}if(!S){for(P=g.child;P;){if(P===o){S=!0,o=g,c=m;break}if(P===c){S=!0,c=g,o=m;break}P=P.sibling}if(!S)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:i}function w(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=w(e),i!==null)return i;e=e.sibling}return null}var C=Object.assign,I=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),nt=Symbol.for("react.context"),lt=Symbol.for("react.forward_ref"),bt=Symbol.for("react.suspense"),Tt=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var B=Symbol.for("react.client.reference");function oe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===B?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G:return"Fragment";case $:return"Profiler";case V:return"StrictMode";case bt:return"Suspense";case Tt:return"SuspenseList";case j:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Z:return"Portal";case nt:return e.displayName||"Context";case q:return(e._context.displayName||"Context")+".Consumer";case lt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return i=e.displayName||null,i!==null?i:oe(e.type)||"Memo";case D:i=e._payload,e=e._init;try{return oe(e(i))}catch{}}return null}var Je=Array.isArray,ot=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},te=[],At=-1;function H(e){return{current:e}}function ut(e){0>At||(e.current=te[At],te[At]=null,At--)}function _t(e,i){At++,te[At]=e.current,e.current=i}var yt=H(null),St=H(null),wt=H(null),Ft=H(null);function Ee(e,i){switch(_t(wt,i),_t(St,e),_t(yt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Wv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Wv(i),e=Kv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ut(yt),_t(yt,e)}function Ce(){ut(yt),ut(St),ut(wt)}function pr(e){e.memoizedState!==null&&_t(Ft,e);var i=yt.current,o=Kv(i,e.type);i!==o&&(_t(St,e),_t(yt,o))}function zr(e){St.current===e&&(ut(yt),ut(St)),Ft.current===e&&(ut(Ft),vc._currentValue=gt)}var Gi,Vr;function Zi(e){if(Gi===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Gi=i&&i[1]||"",Vr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gi+e+Vr}var oa=!1;function Br(e,i){if(!e||oa)return"";oa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(at){var rt=at}Reflect.construct(e,[],pt)}else{try{pt.call()}catch(at){rt=at}e.call(pt.prototype)}}else{try{throw Error()}catch(at){rt=at}(pt=e())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(at){if(at&&rt&&typeof at.stack=="string")return[at.stack,rt.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),S=g[0],P=g[1];if(S&&P){var U=S.split(`
`),et=P.split(`
`);for(m=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;m<et.length&&!et[m].includes("DetermineComponentFrameRoot");)m++;if(c===U.length||m===et.length)for(c=U.length-1,m=et.length-1;1<=c&&0<=m&&U[c]!==et[m];)m--;for(;1<=c&&0<=m;c--,m--)if(U[c]!==et[m]){if(c!==1||m!==1)do if(c--,m--,0>m||U[c]!==et[m]){var ct=`
`+U[c].replace(" at new "," at ");return e.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",e.displayName)),ct}while(1<=c&&0<=m);break}}}finally{oa=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?Zi(o):""}function ms(e,i){switch(e.tag){case 26:case 27:case 5:return Zi(e.type);case 16:return Zi("Lazy");case 13:return e.child!==i&&i!==null?Zi("Suspense Fallback"):Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 15:return Br(e.type,!1);case 11:return Br(e.type.render,!1);case 1:return Br(e.type,!0);case 31:return Zi("Activity");default:return""}}function Ur(e){try{var i="",o=null;do i+=ms(e,o),o=e,e=e.return;while(e);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ze=Object.prototype.hasOwnProperty,We=r.unstable_scheduleCallback,Wi=r.unstable_cancelCallback,bl=r.unstable_shouldYield,vo=r.unstable_requestPaint,Nn=r.unstable_now,gs=r.unstable_getCurrentPriorityLevel,_s=r.unstable_ImmediatePriority,la=r.unstable_UserBlockingPriority,mr=r.unstable_NormalPriority,zu=r.unstable_LowPriority,xo=r.unstable_IdlePriority,bo=r.log,El=r.unstable_setDisableYieldValue,ei=null,tn=null;function Kn(e){if(typeof bo=="function"&&El(e),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(ei,e)}catch{}}var Be=Math.clz32?Math.clz32:Tl,Fr=Math.log,ua=Math.LN2;function Tl(e){return e>>>=0,e===0?32:31-(Fr(e)/ua|0)|0}var Ti=256,Hr=262144,Ue=4194304;function Ki(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Yi(e,i,o){var c=e.pendingLanes;if(c===0)return 0;var m=0,g=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var P=c&134217727;return P!==0?(c=P&~g,c!==0?m=Ki(c):(S&=P,S!==0?m=Ki(S):o||(o=P&~e,o!==0&&(m=Ki(o))))):(P=c&~g,P!==0?m=Ki(P):S!==0?m=Ki(S):o||(o=c&~e,o!==0&&(m=Ki(o)))),m===0?0:i!==0&&i!==m&&(i&g)===0&&(g=m&-m,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:m}function wi(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Vu(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wl(){var e=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),e}function Qi(e){for(var i=[],o=0;31>o;o++)i.push(e);return i}function gr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Bu(e,i,o,c,m,g){var S=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var P=e.entanglements,U=e.expirationTimes,et=e.hiddenUpdates;for(o=S&~o;0<o;){var ct=31-Be(o),pt=1<<ct;P[ct]=0,U[ct]=-1;var rt=et[ct];if(rt!==null)for(et[ct]=null,ct=0;ct<rt.length;ct++){var at=rt[ct];at!==null&&(at.lane&=-536870913)}o&=~pt}c!==0&&ys(e,c,0),g!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=g&~(S&~i))}function ys(e,i,o){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-Be(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|o&261930}function Eo(e,i){var o=e.entangledLanes|=i;for(e=e.entanglements;o;){var c=31-Be(o),m=1<<c;m&i|e[c]&i&&(e[c]|=i),o&=~m}}function To(e,i){var o=i&-i;return o=(o&42)!==0?1:xn(o),(o&(e.suspendedLanes|i))!==0?0:o}function xn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function wo(){var e=xt.p;return e!==0?e:(e=window.event,e===void 0?32:_0(e.type))}function ni(e,i){var o=xt.p;try{return xt.p=e,i()}finally{xt.p=o}}var ii=Math.random().toString(36).slice(2),Fe="__reactFiber$"+ii,Ke="__reactProps$"+ii,Si="__reactContainer$"+ii,Ai="__reactEvents$"+ii,Sl="__reactListeners$"+ii,Al="__reactHandles$"+ii,Cl="__reactResources$"+ii,Xi="__reactMarker$"+ii;function ca(e){delete e[Fe],delete e[Ke],delete e[Ai],delete e[Sl],delete e[Al]}function Ci(e){var i=e[Fe];if(i)return i;for(var o=e.parentNode;o;){if(i=o[Si]||o[Fe]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(e=e0(e);e!==null;){if(o=e[Fe])return o;e=e0(e)}return i}e=o,o=e.parentNode}return null}function ri(e){if(e=e[Fe]||e[Si]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function bn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function $i(e){var i=e[Cl];return i||(i=e[Cl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ye(e){e[Xi]=!0}var So=new Set,Ao={};function Ji(e,i){si(e,i),si(e+"Capture",i)}function si(e,i){for(Ao[e]=i,e=0;e<i.length;e++)So.add(i[e])}var _r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ha={},da={};function qr(e){return Ze.call(da,e)?!0:Ze.call(ha,e)?!1:_r.test(e)?da[e]=!0:(ha[e]=!0,!1)}function Yt(e,i,o){if(qr(i))if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+o)}}function Qt(e,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+o)}}function Le(e,i,o,c){if(c===null)e.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(i,o,""+c)}}function Oe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yn(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function vs(e,i,o){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return m.call(this)},set:function(S){o=""+S,g.call(this,S)}}),Object.defineProperty(e,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(S){o=""+S},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Rt(e){if(!e._valueTracker){var i=Yn(e)?"checked":"value";e._valueTracker=vs(e,i,""+e[i])}}function ye(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return e&&(c=Yn(e)?e.checked?"true":"false":e.value),e=c,e!==o?(i.setValue(e),!0):!1}function ai(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var tr=/[\n"\\]/g;function Re(e){return e.replace(tr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function fa(e,i,o,c,m,g,S,P){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),i!=null?S==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Oe(i)):e.value!==""+Oe(i)&&(e.value=""+Oe(i)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),i!=null?Ri(e,S,Oe(i)):o!=null?Ri(e,S,Oe(o)):c!=null&&e.removeAttribute("value"),m==null&&g!=null&&(e.defaultChecked=!!g),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?e.name=""+Oe(P):e.removeAttribute("name")}function xs(e,i,o,c,m,g,S,P){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Rt(e);return}o=o!=null?""+Oe(o):"",i=i!=null?""+Oe(i):o,P||i===e.value||(e.value=i),e.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=P?e.checked:!!c,e.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),Rt(e)}function Ri(e,i,o){i==="number"&&ai(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function ve(e,i,o,c){if(e=e.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<e.length;o++)m=i.hasOwnProperty("$"+e[o].value),e[o].selected!==m&&(e[o].selected=m),m&&c&&(e[o].defaultSelected=!0)}else{for(o=""+Oe(o),i=null,m=0;m<e.length;m++){if(e[m].value===o){e[m].selected=!0,c&&(e[m].defaultSelected=!0);return}i!==null||e[m].disabled||(i=e[m])}i!==null&&(i.selected=!0)}}function er(e,i,o){if(i!=null&&(i=""+Oe(i),i!==e.value&&(e.value=i),o==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=o!=null?""+Oe(o):""}function oi(e,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(Je(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Oe(i),e.defaultValue=o,c=e.textContent,c===o&&c!==""&&c!==null&&(e.value=c),Rt(e)}function on(e,i){if(i){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=i;return}}e.textContent=i}var pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yr(e,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,o):typeof o!="number"||o===0||pa.has(i)?i==="float"?e.cssFloat=o:e[i]=(""+o).trim():e[i]=o+"px"}function bs(e,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&o[m]!==c&&yr(e,m,c)}else for(var g in i)i.hasOwnProperty(g)&&yr(e,g,i[g])}function Gr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Es=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zr(e){return nr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function jn(){}var ma=null;function zn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wr=null,Mt=null;function En(e){var i=ri(e);if(i&&(e=i.stateNode)){var o=e[Ke]||null;t:switch(e=i.stateNode,i.type){case"input":if(fa(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Re(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==e&&c.form===e.form){var m=c[Ke]||null;if(!m)throw Error(s(90));fa(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===e.form&&ye(c)}break t;case"textarea":er(e,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&ve(e,!!o.multiple,i,!1)}}}var he=!1;function vr(e,i,o){if(he)return e(i,o);he=!0;try{var c=e(i);return c}finally{if(he=!1,(Wr!==null||Mt!==null)&&(Yh(),Wr&&(i=Wr,e=Mt,Mt=Wr=null,En(i),e)))for(i=0;i<e.length;i++)En(e[i])}}function Qn(e,i){var o=e.stateNode;if(o===null)return null;var c=o[Ke]||null;if(c===null)return null;o=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xr=!1;if(Vn)try{var ee={};Object.defineProperty(ee,"passive",{get:function(){xr=!0}}),window.addEventListener("test",ee,ee),window.removeEventListener("test",ee,ee)}catch{xr=!1}var li=null,br=null,ke=null;function Ii(){if(ke)return ke;var e,i=br,o=i.length,c,m="value"in li?li.value:li.textContent,g=m.length;for(e=0;e<o&&i[e]===m[e];e++);var S=o-e;for(c=1;c<=S&&i[o-c]===m[g-c];c++);return ke=m.slice(e,1<c?1-c:void 0)}function Kr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ir(){return!0}function Pi(){return!1}function ln(e){function i(o,c,m,g,S){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var P in e)e.hasOwnProperty(P)&&(o=e[P],this[P]=o?o(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ir:Pi,this.isPropagationStopped=Pi,this}return C(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),i}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=ln(Ni),Er=C({},Ni,{view:0,detail:0}),Kt=ln(Er),Yr,Tn,Bn,Ts=C({},Er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bn&&(Bn&&e.type==="mousemove"?(Yr=e.screenX-Bn.screenX,Tn=e.screenY-Bn.screenY):Tn=Yr=0,Bn=e),Yr)},movementY:function(e){return"movementY"in e?e.movementY:Tn}}),Co=ln(Ts),Tr=C({},Ts,{dataTransfer:0}),Rl=ln(Tr),Ro=C({},Er,{relatedTarget:0}),ws=ln(Ro),Io=C({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),ga=ln(Io),_a=C({},Ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xn=ln(_a),Il=C({},Ni,{data:0}),Di=ln(Il),Li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Po={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},No={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ya(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=No[e])?!!i[e]:!1}function Qr(){return ya}var wn=C({},Er,{key:function(e){if(e.key){var i=Li[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Kr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Po[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(e){return e.type==="keypress"?Kr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Do=ln(wn),Pl=C({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wr=ln(Pl),f=C({},Er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),E=ln(f),A=C({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=ln(A),J=C({},Ts,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),st=ln(J),vt=C({},Ni,{newState:0,oldState:0}),Bt=ln(vt),le=[9,13,27,32],ue=Vn&&"CompositionEvent"in window,Ie=null;Vn&&"documentMode"in document&&(Ie=document.documentMode);var ui=Vn&&"TextEvent"in window&&!Ie,ci=Vn&&(!ue||Ie&&8<Ie&&11>=Ie),$n=" ",Oi=!1;function Ss(e,i){switch(e){case"keyup":return le.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function As(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var va=!1;function ki(e,i){switch(e){case"compositionend":return As(i);case"keypress":return i.which!==32?null:(Oi=!0,$n);case"textInput":return e=i.data,e===$n&&Oi?null:e;default:return null}}function xa(e,i){if(va)return e==="compositionend"||!ue&&Ss(e,i)?(e=Ii(),ke=br=li=null,va=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ci&&i.locale!=="ko"?null:i.data;default:return null}}var zf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sr(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!zf[e.type]:i==="textarea"}function dh(e,i,o,c){Wr?Mt?Mt.push(c):Mt=[c]:Wr=c,i=nd(i,"onChange"),0<i.length&&(o=new rr("onChange","change",null,o,c),e.push({event:o,listeners:i}))}var ar=null,Lo=null;function Oo(e){Uv(e,0)}function ko(e){var i=bn(e);if(ye(i))return e}function Mo(e,i){if(e==="change")return i}var fh=!1;if(Vn){var or;if(Vn){var ba="oninput"in document;if(!ba){var ph=document.createElement("div");ph.setAttribute("oninput","return;"),ba=typeof ph.oninput=="function"}or=ba}else or=!1;fh=or&&(!document.documentMode||9<document.documentMode)}function Nl(){ar&&(ar.detachEvent("onpropertychange",mh),Lo=ar=null)}function mh(e){if(e.propertyName==="value"&&ko(Lo)){var i=[];dh(i,Lo,e,zn(e)),vr(Oo,i)}}function Sr(e,i,o){e==="focusin"?(Nl(),ar=i,Lo=o,ar.attachEvent("onpropertychange",mh)):e==="focusout"&&Nl()}function Vf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ko(Lo)}function Ea(e,i){if(e==="click")return ko(i)}function Bf(e,i){if(e==="input"||e==="change")return ko(i)}function Ar(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Sn=typeof Object.is=="function"?Object.is:Ar;function Ta(e,i){if(Sn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var o=Object.keys(e),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!Ze.call(i,m)||!Sn(e[m],i[m]))return!1}return!0}function Dl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jo(e,i){var o=Dl(e);e=0;for(var c;o;){if(o.nodeType===3){if(c=e+o.textContent.length,e<=i&&c>=i)return{node:o,offset:i-e};e=c}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Dl(o)}}function Ll(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Ll(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function zo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ai(e.document);i instanceof e.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)e=i.contentWindow;else break;i=ai(e.document)}return i}function Xr(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Ol=Vn&&"documentMode"in document&&11>=document.documentMode,$r=null,kl=null,Vo=null,wa=!1;function gh(e,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;wa||$r==null||$r!==ai(c)||(c=$r,"selectionStart"in c&&Xr(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Vo&&Ta(Vo,c)||(Vo=c,c=nd(kl,"onSelect"),0<c.length&&(i=new rr("onSelect","select",null,i,o),e.push({event:i,listeners:c}),i.target=$r)))}function Jr(e,i){var o={};return o[e.toLowerCase()]=i.toLowerCase(),o["Webkit"+e]="webkit"+i,o["Moz"+e]="moz"+i,o}var Sa={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Ml={},_h={};Vn&&(_h=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function An(e){if(Ml[e])return Ml[e];if(!Sa[e])return e;var i=Sa[e],o;for(o in i)if(i.hasOwnProperty(o)&&o in _h)return Ml[e]=i[o];return e}var Bo=An("animationend"),yh=An("animationiteration"),Uo=An("animationstart"),Uf=An("transitionrun"),vh=An("transitionstart"),Ff=An("transitioncancel"),Aa=An("transitionend"),xh=new Map,ts="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ts.push("scrollEnd");function hi(e,i){xh.set(e,i),Ji(i,[e])}var Fo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},di=[],Un=0,jl=0;function Ho(){for(var e=Un,i=jl=Un=0;i<e;){var o=di[i];di[i++]=null;var c=di[i];di[i++]=null;var m=di[i];di[i++]=null;var g=di[i];if(di[i++]=null,c!==null&&m!==null){var S=c.pending;S===null?m.next=m:(m.next=S.next,S.next=m),c.pending=m}g!==0&&Ca(o,m,g)}}function es(e,i,o,c){di[Un++]=e,di[Un++]=i,di[Un++]=o,di[Un++]=c,jl|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Uu(e,i,o,c){return es(e,i,o,c),qo(e)}function lr(e,i){return es(e,null,null,i),qo(e)}function Ca(e,i,o){e.lanes|=o;var c=e.alternate;c!==null&&(c.lanes|=o);for(var m=!1,g=e.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(m=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,m&&i!==null&&(m=31-Be(o),e=g.hiddenUpdates,c=e[m],c===null?e[m]=[i]:c.push(i),i.lane=o|536870912),g):null}function qo(e){if(50<dc)throw dc=0,qp=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Cs={};function Hf(e,i,o,c){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(e,i,o,c){return new Hf(e,i,o,c)}function zl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ur(e,i){var o=e.alternate;return o===null?(o=Fn(e.tag,i,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=i,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,i=e.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Fu(e,i){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,i=o.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Go(e,i,o,c,m,g){var S=0;if(c=e,typeof e=="function")zl(e)&&(S=1);else if(typeof e=="string")S=j1(e,o,yt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case j:return e=Fn(31,o,i,m),e.elementType=j,e.lanes=g,e;case G:return Rs(o.children,m,g,i);case V:S=8,m|=24;break;case $:return e=Fn(12,o,i,m|2),e.elementType=$,e.lanes=g,e;case bt:return e=Fn(13,o,i,m),e.elementType=bt,e.lanes=g,e;case Tt:return e=Fn(19,o,i,m),e.elementType=Tt,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nt:S=10;break t;case q:S=9;break t;case lt:S=11;break t;case k:S=14;break t;case D:S=16,c=null;break t}S=29,o=Error(s(130,e===null?"null":typeof e,"")),c=null}return i=Fn(S,o,i,m),i.elementType=e,i.type=c,i.lanes=g,i}function Rs(e,i,o,c){return e=Fn(7,e,c,i),e.lanes=o,e}function Vl(e,i,o){return e=Fn(6,e,null,i),e.lanes=o,e}function Hu(e){var i=Fn(18,null,null,0);return i.stateNode=e,i}function qu(e,i,o){return i=Fn(4,e.children!==null?e.children:[],e.key,i),i.lanes=o,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var a=new WeakMap;function u(e,i){if(typeof e=="object"&&e!==null){var o=a.get(e);return o!==void 0?o:(i={value:e,source:i,stack:Ur(i)},a.set(e,i),i)}return{value:e,source:i,stack:Ur(i)}}var p=[],x=0,T=null,R=0,z=[],X=0,it=null,ft=1,Et="";function Lt(e,i){p[x++]=R,p[x++]=T,T=e,R=i}function Zt(e,i,o){z[X++]=ft,z[X++]=Et,z[X++]=it,it=e;var c=ft;e=Et;var m=32-Be(c)-1;c&=~(1<<m),o+=1;var g=32-Be(i)+m;if(30<g){var S=m-m%5;g=(c&(1<<S)-1).toString(32),c>>=S,m-=S,ft=1<<32-Be(i)+m|o<<m|c,Et=g+e}else ft=1<<g|o<<m|c,Et=e}function _n(e){e.return!==null&&(Lt(e,1),Zt(e,1,0))}function Qe(e){for(;e===T;)T=p[--x],p[x]=null,R=p[--x],p[x]=null;for(;e===it;)it=z[--X],z[X]=null,Et=z[--X],z[X]=null,ft=z[--X],z[X]=null}function Jn(e,i){z[X++]=ft,z[X++]=Et,z[X++]=it,ft=i.id,Et=i.overflow,it=e}var de=null,fe=null,Xt=!1,ns=null,fi=!1,Bl=Error(s(519));function is(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zo(u(i,e)),Bl}function Gu(e){var i=e.stateNode,o=e.type,c=e.memoizedProps;switch(i[Fe]=e,i[Ke]=c,o){case"dialog":Jt("cancel",i),Jt("close",i);break;case"iframe":case"object":case"embed":Jt("load",i);break;case"video":case"audio":for(o=0;o<pc.length;o++)Jt(pc[o],i);break;case"source":Jt("error",i);break;case"img":case"image":case"link":Jt("error",i),Jt("load",i);break;case"details":Jt("toggle",i);break;case"input":Jt("invalid",i),xs(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Jt("invalid",i);break;case"textarea":Jt("invalid",i),oi(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||Gv(i.textContent,o)?(c.popover!=null&&(Jt("beforetoggle",i),Jt("toggle",i)),c.onScroll!=null&&Jt("scroll",i),c.onScrollEnd!=null&&Jt("scrollend",i),c.onClick!=null&&(i.onclick=jn),i=!0):i=!1,i||is(e,!0)}function He(e){for(de=e.return;de;)switch(de.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:de=de.return}}function Cr(e){if(e!==de)return!1;if(!Xt)return He(e),Xt=!0,!1;var i=e.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||sm(e.type,e.memoizedProps)),o=!o),o&&fe&&is(e),He(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));fe=t0(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));fe=t0(e)}else i===27?(i=fe,Ua(e.type)?(e=cm,cm=null,fe=e):fe=i):fe=de?hr(e.stateNode.nextSibling):null;return!0}function Is(){fe=de=null,Xt=!1}function Zu(){var e=ns;return e!==null&&(_i===null?_i=e:_i.push.apply(_i,e),ns=null),e}function Zo(e){ns===null?ns=[e]:ns.push(e)}var Wo=H(null),rs=null,Rr=null;function Ra(e,i,o){_t(Wo,i._currentValue),i._currentValue=o}function Ps(e){e._currentValue=Wo.current,ut(Wo)}function qf(e,i,o){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===o)break;e=e.return}}function Gf(e,i,o,c){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var g=m.dependencies;if(g!==null){var S=m.child;g=g.firstContext;t:for(;g!==null;){var P=g;g=m;for(var U=0;U<i.length;U++)if(P.context===i[U]){g.lanes|=o,P=g.alternate,P!==null&&(P.lanes|=o),qf(g.return,o,e),c||(S=null);break t}g=P.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(s(341));S.lanes|=o,g=S.alternate,g!==null&&(g.lanes|=o),qf(S,o,e),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===e){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function Ul(e,i,o,c){e=null;for(var m=i,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var P=m.type;Sn(m.pendingProps.value,S.value)||(e!==null?e.push(P):e=[P])}}else if(m===Ft.current){if(S=m.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(vc):e=[vc])}m=m.return}e!==null&&Gf(i,e,o,c),i.flags|=262144}function bh(e){for(e=e.firstContext;e!==null;){if(!Sn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ko(e){rs=e,Rr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Dn(e){return P_(rs,e)}function Eh(e,i){return rs===null&&Ko(e),P_(e,i)}function P_(e,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Rr===null){if(e===null)throw Error(s(308));Rr=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Rr=Rr.next=i;return o}var Lw=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(o,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(o){return o()})}},Ow=r.unstable_scheduleCallback,kw=r.unstable_NormalPriority,un={$$typeof:nt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zf(){return{controller:new Lw,data:new Map,refCount:0}}function Wu(e){e.refCount--,e.refCount===0&&Ow(kw,function(){e.controller.abort()})}var Ku=null,Wf=0,Fl=0,Hl=null;function Mw(e,i){if(Ku===null){var o=Ku=[];Wf=0,Fl=Qp(),Hl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Wf++,i.then(N_,N_),i}function N_(){if(--Wf===0&&Ku!==null){Hl!==null&&(Hl.status="fulfilled");var e=Ku;Ku=null,Fl=0,Hl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function jw(e,i){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var D_=ot.S;ot.S=function(e,i){mv=Nn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Mw(e,i),D_!==null&&D_(e,i)};var Yo=H(null);function Kf(){var e=Yo.current;return e!==null?e:Pe.pooledCache}function Th(e,i){i===null?_t(Yo,Yo.current):_t(Yo,i.pool)}function L_(){var e=Kf();return e===null?null:{parent:un._currentValue,pool:e}}var ql=Error(s(460)),Yf=Error(s(474)),wh=Error(s(542)),Sh={then:function(){}};function O_(e){return e=e.status,e==="fulfilled"||e==="rejected"}function k_(e,i,o){switch(o=e[o],o===void 0?e.push(i):o!==i&&(i.then(jn,jn),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,j_(e),e;default:if(typeof i.status=="string")i.then(jn,jn);else{if(e=Pe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,j_(e),e}throw Xo=i,ql}}function Qo(e){try{var i=e._init;return i(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Xo=o,ql):o}}var Xo=null;function M_(){if(Xo===null)throw Error(s(459));var e=Xo;return Xo=null,e}function j_(e){if(e===ql||e===wh)throw Error(s(483))}var Gl=null,Yu=0;function Ah(e){var i=Yu;return Yu+=1,Gl===null&&(Gl=[]),k_(Gl,e,i)}function Qu(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Ch(e,i){throw i.$$typeof===I?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function z_(e){function i(Q,W){if(e){var tt=Q.deletions;tt===null?(Q.deletions=[W],Q.flags|=16):tt.push(W)}}function o(Q,W){if(!e)return null;for(;W!==null;)i(Q,W),W=W.sibling;return null}function c(Q){for(var W=new Map;Q!==null;)Q.key!==null?W.set(Q.key,Q):W.set(Q.index,Q),Q=Q.sibling;return W}function m(Q,W){return Q=ur(Q,W),Q.index=0,Q.sibling=null,Q}function g(Q,W,tt){return Q.index=tt,e?(tt=Q.alternate,tt!==null?(tt=tt.index,tt<W?(Q.flags|=67108866,W):tt):(Q.flags|=67108866,W)):(Q.flags|=1048576,W)}function S(Q){return e&&Q.alternate===null&&(Q.flags|=67108866),Q}function P(Q,W,tt,ht){return W===null||W.tag!==6?(W=Vl(tt,Q.mode,ht),W.return=Q,W):(W=m(W,tt),W.return=Q,W)}function U(Q,W,tt,ht){var kt=tt.type;return kt===G?ct(Q,W,tt.props.children,ht,tt.key):W!==null&&(W.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===D&&Qo(kt)===W.type)?(W=m(W,tt.props),Qu(W,tt),W.return=Q,W):(W=Go(tt.type,tt.key,tt.props,null,Q.mode,ht),Qu(W,tt),W.return=Q,W)}function et(Q,W,tt,ht){return W===null||W.tag!==4||W.stateNode.containerInfo!==tt.containerInfo||W.stateNode.implementation!==tt.implementation?(W=qu(tt,Q.mode,ht),W.return=Q,W):(W=m(W,tt.children||[]),W.return=Q,W)}function ct(Q,W,tt,ht,kt){return W===null||W.tag!==7?(W=Rs(tt,Q.mode,ht,kt),W.return=Q,W):(W=m(W,tt),W.return=Q,W)}function pt(Q,W,tt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Vl(""+W,Q.mode,tt),W.return=Q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case O:return tt=Go(W.type,W.key,W.props,null,Q.mode,tt),Qu(tt,W),tt.return=Q,tt;case Z:return W=qu(W,Q.mode,tt),W.return=Q,W;case D:return W=Qo(W),pt(Q,W,tt)}if(Je(W)||Y(W))return W=Rs(W,Q.mode,tt,null),W.return=Q,W;if(typeof W.then=="function")return pt(Q,Ah(W),tt);if(W.$$typeof===nt)return pt(Q,Eh(Q,W),tt);Ch(Q,W)}return null}function rt(Q,W,tt,ht){var kt=W!==null?W.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return kt!==null?null:P(Q,W,""+tt,ht);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case O:return tt.key===kt?U(Q,W,tt,ht):null;case Z:return tt.key===kt?et(Q,W,tt,ht):null;case D:return tt=Qo(tt),rt(Q,W,tt,ht)}if(Je(tt)||Y(tt))return kt!==null?null:ct(Q,W,tt,ht,null);if(typeof tt.then=="function")return rt(Q,W,Ah(tt),ht);if(tt.$$typeof===nt)return rt(Q,W,Eh(Q,tt),ht);Ch(Q,tt)}return null}function at(Q,W,tt,ht,kt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Q=Q.get(tt)||null,P(W,Q,""+ht,kt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case O:return Q=Q.get(ht.key===null?tt:ht.key)||null,U(W,Q,ht,kt);case Z:return Q=Q.get(ht.key===null?tt:ht.key)||null,et(W,Q,ht,kt);case D:return ht=Qo(ht),at(Q,W,tt,ht,kt)}if(Je(ht)||Y(ht))return Q=Q.get(tt)||null,ct(W,Q,ht,kt,null);if(typeof ht.then=="function")return at(Q,W,tt,Ah(ht),kt);if(ht.$$typeof===nt)return at(Q,W,tt,Eh(W,ht),kt);Ch(W,ht)}return null}function Nt(Q,W,tt,ht){for(var kt=null,pe=null,Dt=W,Wt=W=0,ie=null;Dt!==null&&Wt<tt.length;Wt++){Dt.index>Wt?(ie=Dt,Dt=null):ie=Dt.sibling;var me=rt(Q,Dt,tt[Wt],ht);if(me===null){Dt===null&&(Dt=ie);break}e&&Dt&&me.alternate===null&&i(Q,Dt),W=g(me,W,Wt),pe===null?kt=me:pe.sibling=me,pe=me,Dt=ie}if(Wt===tt.length)return o(Q,Dt),Xt&&Lt(Q,Wt),kt;if(Dt===null){for(;Wt<tt.length;Wt++)Dt=pt(Q,tt[Wt],ht),Dt!==null&&(W=g(Dt,W,Wt),pe===null?kt=Dt:pe.sibling=Dt,pe=Dt);return Xt&&Lt(Q,Wt),kt}for(Dt=c(Dt);Wt<tt.length;Wt++)ie=at(Dt,Q,Wt,tt[Wt],ht),ie!==null&&(e&&ie.alternate!==null&&Dt.delete(ie.key===null?Wt:ie.key),W=g(ie,W,Wt),pe===null?kt=ie:pe.sibling=ie,pe=ie);return e&&Dt.forEach(function(Za){return i(Q,Za)}),Xt&&Lt(Q,Wt),kt}function jt(Q,W,tt,ht){if(tt==null)throw Error(s(151));for(var kt=null,pe=null,Dt=W,Wt=W=0,ie=null,me=tt.next();Dt!==null&&!me.done;Wt++,me=tt.next()){Dt.index>Wt?(ie=Dt,Dt=null):ie=Dt.sibling;var Za=rt(Q,Dt,me.value,ht);if(Za===null){Dt===null&&(Dt=ie);break}e&&Dt&&Za.alternate===null&&i(Q,Dt),W=g(Za,W,Wt),pe===null?kt=Za:pe.sibling=Za,pe=Za,Dt=ie}if(me.done)return o(Q,Dt),Xt&&Lt(Q,Wt),kt;if(Dt===null){for(;!me.done;Wt++,me=tt.next())me=pt(Q,me.value,ht),me!==null&&(W=g(me,W,Wt),pe===null?kt=me:pe.sibling=me,pe=me);return Xt&&Lt(Q,Wt),kt}for(Dt=c(Dt);!me.done;Wt++,me=tt.next())me=at(Dt,Q,Wt,me.value,ht),me!==null&&(e&&me.alternate!==null&&Dt.delete(me.key===null?Wt:me.key),W=g(me,W,Wt),pe===null?kt=me:pe.sibling=me,pe=me);return e&&Dt.forEach(function(K1){return i(Q,K1)}),Xt&&Lt(Q,Wt),kt}function Se(Q,W,tt,ht){if(typeof tt=="object"&&tt!==null&&tt.type===G&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case O:t:{for(var kt=tt.key;W!==null;){if(W.key===kt){if(kt=tt.type,kt===G){if(W.tag===7){o(Q,W.sibling),ht=m(W,tt.props.children),ht.return=Q,Q=ht;break t}}else if(W.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===D&&Qo(kt)===W.type){o(Q,W.sibling),ht=m(W,tt.props),Qu(ht,tt),ht.return=Q,Q=ht;break t}o(Q,W);break}else i(Q,W);W=W.sibling}tt.type===G?(ht=Rs(tt.props.children,Q.mode,ht,tt.key),ht.return=Q,Q=ht):(ht=Go(tt.type,tt.key,tt.props,null,Q.mode,ht),Qu(ht,tt),ht.return=Q,Q=ht)}return S(Q);case Z:t:{for(kt=tt.key;W!==null;){if(W.key===kt)if(W.tag===4&&W.stateNode.containerInfo===tt.containerInfo&&W.stateNode.implementation===tt.implementation){o(Q,W.sibling),ht=m(W,tt.children||[]),ht.return=Q,Q=ht;break t}else{o(Q,W);break}else i(Q,W);W=W.sibling}ht=qu(tt,Q.mode,ht),ht.return=Q,Q=ht}return S(Q);case D:return tt=Qo(tt),Se(Q,W,tt,ht)}if(Je(tt))return Nt(Q,W,tt,ht);if(Y(tt)){if(kt=Y(tt),typeof kt!="function")throw Error(s(150));return tt=kt.call(tt),jt(Q,W,tt,ht)}if(typeof tt.then=="function")return Se(Q,W,Ah(tt),ht);if(tt.$$typeof===nt)return Se(Q,W,Eh(Q,tt),ht);Ch(Q,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,W!==null&&W.tag===6?(o(Q,W.sibling),ht=m(W,tt),ht.return=Q,Q=ht):(o(Q,W),ht=Vl(tt,Q.mode,ht),ht.return=Q,Q=ht),S(Q)):o(Q,W)}return function(Q,W,tt,ht){try{Yu=0;var kt=Se(Q,W,tt,ht);return Gl=null,kt}catch(Dt){if(Dt===ql||Dt===wh)throw Dt;var pe=Fn(29,Dt,null,Q.mode);return pe.lanes=ht,pe.return=Q,pe}}}var $o=z_(!0),V_=z_(!1),Ia=!1;function Qf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Na(e,i,o){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(ge&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=qo(e),Ca(e,null,o),i}return es(e,c,i,o),qo(e)}function Xu(e,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,o|=c,i.lanes=o,Eo(e,o)}}function $f(e,i){var o=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=S:g=g.next=S,o=o.next}while(o!==null);g===null?m=g=i:g=g.next=i}else m=g=i;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=i:e.next=i,o.lastBaseUpdate=i}var Jf=!1;function $u(){if(Jf){var e=Hl;if(e!==null)throw e}}function Ju(e,i,o,c){Jf=!1;var m=e.updateQueue;Ia=!1;var g=m.firstBaseUpdate,S=m.lastBaseUpdate,P=m.shared.pending;if(P!==null){m.shared.pending=null;var U=P,et=U.next;U.next=null,S===null?g=et:S.next=et,S=U;var ct=e.alternate;ct!==null&&(ct=ct.updateQueue,P=ct.lastBaseUpdate,P!==S&&(P===null?ct.firstBaseUpdate=et:P.next=et,ct.lastBaseUpdate=U))}if(g!==null){var pt=m.baseState;S=0,ct=et=U=null,P=g;do{var rt=P.lane&-536870913,at=rt!==P.lane;if(at?(ne&rt)===rt:(c&rt)===rt){rt!==0&&rt===Fl&&(Jf=!0),ct!==null&&(ct=ct.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});t:{var Nt=e,jt=P;rt=i;var Se=o;switch(jt.tag){case 1:if(Nt=jt.payload,typeof Nt=="function"){pt=Nt.call(Se,pt,rt);break t}pt=Nt;break t;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=jt.payload,rt=typeof Nt=="function"?Nt.call(Se,pt,rt):Nt,rt==null)break t;pt=C({},pt,rt);break t;case 2:Ia=!0}}rt=P.callback,rt!==null&&(e.flags|=64,at&&(e.flags|=8192),at=m.callbacks,at===null?m.callbacks=[rt]:at.push(rt))}else at={lane:rt,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ct===null?(et=ct=at,U=pt):ct=ct.next=at,S|=rt;if(P=P.next,P===null){if(P=m.shared.pending,P===null)break;at=P,P=at.next,at.next=null,m.lastBaseUpdate=at,m.shared.pending=null}}while(!0);ct===null&&(U=pt),m.baseState=U,m.firstBaseUpdate=et,m.lastBaseUpdate=ct,g===null&&(m.shared.lanes=0),Ma|=S,e.lanes=S,e.memoizedState=pt}}function B_(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function U_(e,i){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)B_(o[e],i)}var Zl=H(null),Rh=H(0);function F_(e,i){e=Vs,_t(Rh,e),_t(Zl,i),Vs=e|i.baseLanes}function tp(){_t(Rh,Vs),_t(Zl,Zl.current)}function ep(){Vs=Rh.current,ut(Zl),ut(Rh)}var Mi=H(null),cr=null;function Da(e){var i=e.alternate;_t(en,en.current&1),_t(Mi,e),cr===null&&(i===null||Zl.current!==null||i.memoizedState!==null)&&(cr=e)}function np(e){_t(en,en.current),_t(Mi,e),cr===null&&(cr=e)}function H_(e){e.tag===22?(_t(en,en.current),_t(Mi,e),cr===null&&(cr=e)):La()}function La(){_t(en,en.current),_t(Mi,Mi.current)}function ji(e){ut(Mi),cr===e&&(cr=null),ut(en)}var en=H(0);function Ih(e){for(var i=e;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||lm(o)||um(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ns=0,Gt=null,Te=null,cn=null,Ph=!1,Wl=!1,Jo=!1,Nh=0,tc=0,Kl=null,zw=0;function Xe(){throw Error(s(321))}function ip(e,i){if(i===null)return!1;for(var o=0;o<i.length&&o<e.length;o++)if(!Sn(e[o],i[o]))return!1;return!0}function rp(e,i,o,c,m,g){return Ns=g,Gt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ot.H=e===null||e.memoizedState===null?Ay:vp,Jo=!1,g=o(c,m),Jo=!1,Wl&&(g=G_(i,o,c,m)),q_(e),g}function q_(e){ot.H=ic;var i=Te!==null&&Te.next!==null;if(Ns=0,cn=Te=Gt=null,Ph=!1,tc=0,Kl=null,i)throw Error(s(300));e===null||hn||(e=e.dependencies,e!==null&&bh(e)&&(hn=!0))}function G_(e,i,o,c){Gt=e;var m=0;do{if(Wl&&(Kl=null),tc=0,Wl=!1,25<=m)throw Error(s(301));if(m+=1,cn=Te=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}ot.H=Cy,g=i(o,c)}while(Wl);return g}function Vw(){var e=ot.H,i=e.useState()[0];return i=typeof i.then=="function"?ec(i):i,e=e.useState()[0],(Te!==null?Te.memoizedState:null)!==e&&(Gt.flags|=1024),i}function sp(){var e=Nh!==0;return Nh=0,e}function ap(e,i,o){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o}function op(e){if(Ph){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Ph=!1}Ns=0,cn=Te=Gt=null,Wl=!1,tc=Nh=0,Kl=null}function ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Gt.memoizedState=cn=e:cn=cn.next=e,cn}function nn(){if(Te===null){var e=Gt.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var i=cn===null?Gt.memoizedState:cn.next;if(i!==null)cn=i,Te=e;else{if(e===null)throw Gt.alternate===null?Error(s(467)):Error(s(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},cn===null?Gt.memoizedState=cn=e:cn=cn.next=e}return cn}function Dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(e){var i=tc;return tc+=1,Kl===null&&(Kl=[]),e=k_(Kl,e,i),i=Gt,(cn===null?i.memoizedState:cn.next)===null&&(i=i.alternate,ot.H=i===null||i.memoizedState===null?Ay:vp),e}function Lh(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ec(e);if(e.$$typeof===nt)return Dn(e)}throw Error(s(438,String(e)))}function lp(e){var i=null,o=Gt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Gt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Dh(),Gt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(e),c=0;c<e;c++)o[c]=K;return i.index++,o}function Ds(e,i){return typeof i=="function"?i(e):i}function Oh(e){var i=nn();return up(i,Te,e)}function up(e,i,o){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var m=e.baseQueue,g=c.pending;if(g!==null){if(m!==null){var S=m.next;m.next=g.next,g.next=S}i.baseQueue=m=g,c.pending=null}if(g=e.baseState,m===null)e.memoizedState=g;else{i=m.next;var P=S=null,U=null,et=i,ct=!1;do{var pt=et.lane&-536870913;if(pt!==et.lane?(ne&pt)===pt:(Ns&pt)===pt){var rt=et.revertLane;if(rt===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),pt===Fl&&(ct=!0);else if((Ns&rt)===rt){et=et.next,rt===Fl&&(ct=!0);continue}else pt={lane:0,revertLane:et.revertLane,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},U===null?(P=U=pt,S=g):U=U.next=pt,Gt.lanes|=rt,Ma|=rt;pt=et.action,Jo&&o(g,pt),g=et.hasEagerState?et.eagerState:o(g,pt)}else rt={lane:pt,revertLane:et.revertLane,gesture:et.gesture,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},U===null?(P=U=rt,S=g):U=U.next=rt,Gt.lanes|=pt,Ma|=pt;et=et.next}while(et!==null&&et!==i);if(U===null?S=g:U.next=P,!Sn(g,e.memoizedState)&&(hn=!0,ct&&(o=Hl,o!==null)))throw o;e.memoizedState=g,e.baseState=S,e.baseQueue=U,c.lastRenderedState=g}return m===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function cp(e){var i=nn(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var c=o.dispatch,m=o.pending,g=i.memoizedState;if(m!==null){o.pending=null;var S=m=m.next;do g=e(g,S.action),S=S.next;while(S!==m);Sn(g,i.memoizedState)||(hn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,c]}function Z_(e,i,o){var c=Gt,m=nn(),g=Xt;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=i();var S=!Sn((Te||m).memoizedState,o);if(S&&(m.memoizedState=o,hn=!0),m=m.queue,fp(Y_.bind(null,c,m,e),[e]),m.getSnapshot!==i||S||cn!==null&&cn.memoizedState.tag&1){if(c.flags|=2048,Yl(9,{destroy:void 0},K_.bind(null,c,m,o,i),null),Pe===null)throw Error(s(349));g||(Ns&127)!==0||W_(c,i,o)}return o}function W_(e,i,o){e.flags|=16384,e={getSnapshot:i,value:o},i=Gt.updateQueue,i===null?(i=Dh(),Gt.updateQueue=i,i.stores=[e]):(o=i.stores,o===null?i.stores=[e]:o.push(e))}function K_(e,i,o,c){i.value=o,i.getSnapshot=c,Q_(i)&&X_(e)}function Y_(e,i,o){return o(function(){Q_(i)&&X_(e)})}function Q_(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!Sn(e,o)}catch{return!0}}function X_(e){var i=lr(e,2);i!==null&&yi(i,e,2)}function hp(e){var i=ti();if(typeof e=="function"){var o=e;if(e=o(),Jo){Kn(!0);try{o()}finally{Kn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:e},i}function $_(e,i,o,c){return e.baseState=o,up(e,Te,typeof c=="function"?c:Ds)}function Bw(e,i,o,c,m){if(jh(e))throw Error(s(485));if(e=i.action,e!==null){var g={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};ot.T!==null?o(!0):g.isTransition=!1,c(g),o=i.pending,o===null?(g.next=i.pending=g,J_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function J_(e,i){var o=i.action,c=i.payload,m=e.state;if(i.isTransition){var g=ot.T,S={};ot.T=S;try{var P=o(m,c),U=ot.S;U!==null&&U(S,P),ty(e,i,P)}catch(et){dp(e,i,et)}finally{g!==null&&S.types!==null&&(g.types=S.types),ot.T=g}}else try{g=o(m,c),ty(e,i,g)}catch(et){dp(e,i,et)}}function ty(e,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){ey(e,i,c)},function(c){return dp(e,i,c)}):ey(e,i,o)}function ey(e,i,o){i.status="fulfilled",i.value=o,ny(i),e.state=o,i=e.pending,i!==null&&(o=i.next,o===i?e.pending=null:(o=o.next,i.next=o,J_(e,o)))}function dp(e,i,o){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,ny(i),i=i.next;while(i!==c)}e.action=null}function ny(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function iy(e,i){return i}function ry(e,i){if(Xt){var o=Pe.formState;if(o!==null){t:{var c=Gt;if(Xt){if(fe){e:{for(var m=fe,g=fi;m.nodeType!==8;){if(!g){m=null;break e}if(m=hr(m.nextSibling),m===null){m=null;break e}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){fe=hr(m.nextSibling),c=m.data==="F!";break t}}is(c)}c=!1}c&&(i=o[0])}}return o=ti(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iy,lastRenderedState:i},o.queue=c,o=Ty.bind(null,Gt,c),c.dispatch=o,c=hp(!1),g=yp.bind(null,Gt,!1,c.queue),c=ti(),m={state:i,dispatch:null,action:e,pending:null},c.queue=m,o=Bw.bind(null,Gt,m,g,o),m.dispatch=o,c.memoizedState=e,[i,o,!1]}function sy(e){var i=nn();return ay(i,Te,e)}function ay(e,i,o){if(i=up(e,i,iy)[0],e=Oh(Ds)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=ec(i)}catch(S){throw S===ql?wh:S}else c=i;i=nn();var m=i.queue,g=m.dispatch;return o!==i.memoizedState&&(Gt.flags|=2048,Yl(9,{destroy:void 0},Uw.bind(null,m,o),null)),[c,g,e]}function Uw(e,i){e.action=i}function oy(e){var i=nn(),o=Te;if(o!==null)return ay(i,o,e);nn(),i=i.memoizedState,o=nn();var c=o.queue.dispatch;return o.memoizedState=e,[i,c,!1]}function Yl(e,i,o,c){return e={tag:e,create:o,deps:c,inst:i,next:null},i=Gt.updateQueue,i===null&&(i=Dh(),Gt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=e.next=e:(c=o.next,o.next=e,e.next=c,i.lastEffect=e),e}function ly(){return nn().memoizedState}function kh(e,i,o,c){var m=ti();Gt.flags|=e,m.memoizedState=Yl(1|i,{destroy:void 0},o,c===void 0?null:c)}function Mh(e,i,o,c){var m=nn();c=c===void 0?null:c;var g=m.memoizedState.inst;Te!==null&&c!==null&&ip(c,Te.memoizedState.deps)?m.memoizedState=Yl(i,g,o,c):(Gt.flags|=e,m.memoizedState=Yl(1|i,g,o,c))}function uy(e,i){kh(8390656,8,e,i)}function fp(e,i){Mh(2048,8,e,i)}function Fw(e){Gt.flags|=4;var i=Gt.updateQueue;if(i===null)i=Dh(),Gt.updateQueue=i,i.events=[e];else{var o=i.events;o===null?i.events=[e]:o.push(e)}}function cy(e){var i=nn().memoizedState;return Fw({ref:i,nextImpl:e}),function(){if((ge&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function hy(e,i){return Mh(4,2,e,i)}function dy(e,i){return Mh(4,4,e,i)}function fy(e,i){if(typeof i=="function"){e=e();var o=i(e);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function py(e,i,o){o=o!=null?o.concat([e]):null,Mh(4,4,fy.bind(null,i,e),o)}function pp(){}function my(e,i){var o=nn();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&ip(i,c[1])?c[0]:(o.memoizedState=[e,i],e)}function gy(e,i){var o=nn();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&ip(i,c[1]))return c[0];if(c=e(),Jo){Kn(!0);try{e()}finally{Kn(!1)}}return o.memoizedState=[c,i],c}function mp(e,i,o){return o===void 0||(Ns&1073741824)!==0&&(ne&261930)===0?e.memoizedState=i:(e.memoizedState=o,e=_v(),Gt.lanes|=e,Ma|=e,o)}function _y(e,i,o,c){return Sn(o,i)?o:Zl.current!==null?(e=mp(e,o,c),Sn(e,i)||(hn=!0),e):(Ns&42)===0||(Ns&1073741824)!==0&&(ne&261930)===0?(hn=!0,e.memoizedState=o):(e=_v(),Gt.lanes|=e,Ma|=e,i)}function yy(e,i,o,c,m){var g=xt.p;xt.p=g!==0&&8>g?g:8;var S=ot.T,P={};ot.T=P,yp(e,!1,i,o);try{var U=m(),et=ot.S;if(et!==null&&et(P,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ct=jw(U,c);nc(e,i,ct,Bi(e))}else nc(e,i,c,Bi(e))}catch(pt){nc(e,i,{then:function(){},status:"rejected",reason:pt},Bi())}finally{xt.p=g,S!==null&&P.types!==null&&(S.types=P.types),ot.T=S}}function Hw(){}function gp(e,i,o,c){if(e.tag!==5)throw Error(s(476));var m=vy(e).queue;yy(e,m,i,gt,o===null?Hw:function(){return xy(e),o(c)})}function vy(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:gt},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:o},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function xy(e){var i=vy(e);i.next===null&&(i=e.alternate.memoizedState),nc(e,i.next.queue,{},Bi())}function _p(){return Dn(vc)}function by(){return nn().memoizedState}function Ey(){return nn().memoizedState}function qw(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var o=Bi();e=Pa(o);var c=Na(i,e,o);c!==null&&(yi(c,i,o),Xu(c,i,o)),i={cache:Zf()},e.payload=i;return}i=i.return}}function Gw(e,i,o){var c=Bi();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},jh(e)?wy(i,o):(o=Uu(e,i,o,c),o!==null&&(yi(o,e,c),Sy(o,i,c)))}function Ty(e,i,o){var c=Bi();nc(e,i,o,c)}function nc(e,i,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(jh(e))wy(i,m);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var S=i.lastRenderedState,P=g(S,o);if(m.hasEagerState=!0,m.eagerState=P,Sn(P,S))return es(e,i,m,0),Pe===null&&Ho(),!1}catch{}if(o=Uu(e,i,m,c),o!==null)return yi(o,e,c),Sy(o,i,c),!0}return!1}function yp(e,i,o,c){if(c={lane:2,revertLane:Qp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},jh(e)){if(i)throw Error(s(479))}else i=Uu(e,o,c,2),i!==null&&yi(i,e,2)}function jh(e){var i=e.alternate;return e===Gt||i!==null&&i===Gt}function wy(e,i){Wl=Ph=!0;var o=e.pending;o===null?i.next=i:(i.next=o.next,o.next=i),e.pending=i}function Sy(e,i,o){if((o&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,o|=c,i.lanes=o,Eo(e,o)}}var ic={readContext:Dn,use:Lh,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};ic.useEffectEvent=Xe;var Ay={readContext:Dn,use:Lh,useCallback:function(e,i){return ti().memoizedState=[e,i===void 0?null:i],e},useContext:Dn,useEffect:uy,useImperativeHandle:function(e,i,o){o=o!=null?o.concat([e]):null,kh(4194308,4,fy.bind(null,i,e),o)},useLayoutEffect:function(e,i){return kh(4194308,4,e,i)},useInsertionEffect:function(e,i){kh(4,2,e,i)},useMemo:function(e,i){var o=ti();i=i===void 0?null:i;var c=e();if(Jo){Kn(!0);try{e()}finally{Kn(!1)}}return o.memoizedState=[c,i],c},useReducer:function(e,i,o){var c=ti();if(o!==void 0){var m=o(i);if(Jo){Kn(!0);try{o(i)}finally{Kn(!1)}}}else m=i;return c.memoizedState=c.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},c.queue=e,e=e.dispatch=Gw.bind(null,Gt,e),[c.memoizedState,e]},useRef:function(e){var i=ti();return e={current:e},i.memoizedState=e},useState:function(e){e=hp(e);var i=e.queue,o=Ty.bind(null,Gt,i);return i.dispatch=o,[e.memoizedState,o]},useDebugValue:pp,useDeferredValue:function(e,i){var o=ti();return mp(o,e,i)},useTransition:function(){var e=hp(!1);return e=yy.bind(null,Gt,e.queue,!0,!1),ti().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,o){var c=Gt,m=ti();if(Xt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),Pe===null)throw Error(s(349));(ne&127)!==0||W_(c,i,o)}m.memoizedState=o;var g={value:o,getSnapshot:i};return m.queue=g,uy(Y_.bind(null,c,g,e),[e]),c.flags|=2048,Yl(9,{destroy:void 0},K_.bind(null,c,g,o,i),null),o},useId:function(){var e=ti(),i=Pe.identifierPrefix;if(Xt){var o=Et,c=ft;o=(c&~(1<<32-Be(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Nh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=zw++,i="_"+i+"r_"+o.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:_p,useFormState:ry,useActionState:ry,useOptimistic:function(e){var i=ti();i.memoizedState=i.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=yp.bind(null,Gt,!0,o),o.dispatch=i,[e,i]},useMemoCache:lp,useCacheRefresh:function(){return ti().memoizedState=qw.bind(null,Gt)},useEffectEvent:function(e){var i=ti(),o={impl:e};return i.memoizedState=o,function(){if((ge&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},vp={readContext:Dn,use:Lh,useCallback:my,useContext:Dn,useEffect:fp,useImperativeHandle:py,useInsertionEffect:hy,useLayoutEffect:dy,useMemo:gy,useReducer:Oh,useRef:ly,useState:function(){return Oh(Ds)},useDebugValue:pp,useDeferredValue:function(e,i){var o=nn();return _y(o,Te.memoizedState,e,i)},useTransition:function(){var e=Oh(Ds)[0],i=nn().memoizedState;return[typeof e=="boolean"?e:ec(e),i]},useSyncExternalStore:Z_,useId:by,useHostTransitionStatus:_p,useFormState:sy,useActionState:sy,useOptimistic:function(e,i){var o=nn();return $_(o,Te,e,i)},useMemoCache:lp,useCacheRefresh:Ey};vp.useEffectEvent=cy;var Cy={readContext:Dn,use:Lh,useCallback:my,useContext:Dn,useEffect:fp,useImperativeHandle:py,useInsertionEffect:hy,useLayoutEffect:dy,useMemo:gy,useReducer:cp,useRef:ly,useState:function(){return cp(Ds)},useDebugValue:pp,useDeferredValue:function(e,i){var o=nn();return Te===null?mp(o,e,i):_y(o,Te.memoizedState,e,i)},useTransition:function(){var e=cp(Ds)[0],i=nn().memoizedState;return[typeof e=="boolean"?e:ec(e),i]},useSyncExternalStore:Z_,useId:by,useHostTransitionStatus:_p,useFormState:oy,useActionState:oy,useOptimistic:function(e,i){var o=nn();return Te!==null?$_(o,Te,e,i):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:lp,useCacheRefresh:Ey};Cy.useEffectEvent=cy;function xp(e,i,o,c){i=e.memoizedState,o=o(c,i),o=o==null?i:C({},i,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var bp={enqueueSetState:function(e,i,o){e=e._reactInternals;var c=Bi(),m=Pa(c);m.payload=i,o!=null&&(m.callback=o),i=Na(e,m,c),i!==null&&(yi(i,e,c),Xu(i,e,c))},enqueueReplaceState:function(e,i,o){e=e._reactInternals;var c=Bi(),m=Pa(c);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=Na(e,m,c),i!==null&&(yi(i,e,c),Xu(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var o=Bi(),c=Pa(o);c.tag=2,i!=null&&(c.callback=i),i=Na(e,c,o),i!==null&&(yi(i,e,o),Xu(i,e,o))}};function Ry(e,i,o,c,m,g,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,g,S):i.prototype&&i.prototype.isPureReactComponent?!Ta(o,c)||!Ta(m,g):!0}function Iy(e,i,o,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==e&&bp.enqueueReplaceState(i,i.state,null)}function tl(e,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(e=e.defaultProps){o===i&&(o=C({},o));for(var m in e)o[m]===void 0&&(o[m]=e[m])}return o}function Py(e){Fo(e)}function Ny(e){console.error(e)}function Dy(e){Fo(e)}function zh(e,i){try{var o=e.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Ly(e,i,o){try{var c=e.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Ep(e,i,o){return o=Pa(o),o.tag=3,o.payload={element:null},o.callback=function(){zh(e,i)},o}function Oy(e){return e=Pa(e),e.tag=3,e}function ky(e,i,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;e.payload=function(){return m(g)},e.callback=function(){Ly(i,o,c)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){Ly(i,o,c),typeof m!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var P=c.stack;this.componentDidCatch(c.value,{componentStack:P!==null?P:""})})}function Zw(e,i,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&Ul(i,o,m,!0),o=Mi.current,o!==null){switch(o.tag){case 31:case 13:return cr===null?Qh():o.alternate===null&&$e===0&&($e=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Sh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),Wp(e,c,m)),!1;case 22:return o.flags|=65536,c===Sh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),Wp(e,c,m)),!1}throw Error(s(435,o.tag))}return Wp(e,c,m),Qh(),!1}if(Xt)return i=Mi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==Bl&&(e=Error(s(422),{cause:c}),Zo(u(e,o)))):(c!==Bl&&(i=Error(s(423),{cause:c}),Zo(u(i,o))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,c=u(c,o),m=Ep(e.stateNode,c,m),$f(e,m),$e!==4&&($e=2)),!1;var g=Error(s(520),{cause:c});if(g=u(g,o),hc===null?hc=[g]:hc.push(g),$e!==4&&($e=2),i===null)return!0;c=u(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,e=m&-m,o.lanes|=e,e=Ep(o.stateNode,c,e),$f(o,e),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ja===null||!ja.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=Oy(m),ky(m,e,o,c),$f(o,m),!1}o=o.return}while(o!==null);return!1}var Tp=Error(s(461)),hn=!1;function Ln(e,i,o,c){i.child=e===null?V_(i,null,o,c):$o(i,e.child,o,c)}function My(e,i,o,c,m){o=o.render;var g=i.ref;if("ref"in c){var S={};for(var P in c)P!=="ref"&&(S[P]=c[P])}else S=c;return Ko(i),c=rp(e,i,o,S,g,m),P=sp(),e!==null&&!hn?(ap(e,i,m),Ls(e,i,m)):(Xt&&P&&_n(i),i.flags|=1,Ln(e,i,c,m),i.child)}function jy(e,i,o,c,m){if(e===null){var g=o.type;return typeof g=="function"&&!zl(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,zy(e,i,g,c,m)):(e=Go(o.type,null,c,i,i.mode,m),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!Np(e,m)){var S=g.memoizedProps;if(o=o.compare,o=o!==null?o:Ta,o(S,c)&&e.ref===i.ref)return Ls(e,i,m)}return i.flags|=1,e=ur(g,c),e.ref=i.ref,e.return=i,i.child=e}function zy(e,i,o,c,m){if(e!==null){var g=e.memoizedProps;if(Ta(g,c)&&e.ref===i.ref)if(hn=!1,i.pendingProps=c=g,Np(e,m))(e.flags&131072)!==0&&(hn=!0);else return i.lanes=e.lanes,Ls(e,i,m)}return wp(e,i,o,c,m)}function Vy(e,i,o,c){var m=c.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,e!==null){for(c=i.child=e.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~g}else c=0,i.child=null;return By(e,i,g,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Th(i,g!==null?g.cachePool:null),g!==null?F_(i,g):tp(),H_(i);else return c=i.lanes=536870912,By(e,i,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Th(i,g.cachePool),F_(i,g),La(),i.memoizedState=null):(e!==null&&Th(i,null),tp(),La());return Ln(e,i,m,o),i.child}function rc(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function By(e,i,o,c,m){var g=Kf();return g=g===null?null:{parent:un._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},e!==null&&Th(i,null),tp(),H_(i),e!==null&&Ul(e,i,c,!0),i.childLanes=m,null}function Vh(e,i){return i=Uh({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Uy(e,i,o){return $o(i,e.child,null,o),e=Vh(i,i.pendingProps),e.flags|=2,ji(i),i.memoizedState=null,e}function Ww(e,i,o){var c=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Xt){if(c.mode==="hidden")return e=Vh(i,c),i.lanes=536870912,rc(null,e);if(np(i),(e=fe)?(e=Jv(e,fi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:it!==null?{id:ft,overflow:Et}:null,retryLane:536870912,hydrationErrors:null},o=Hu(e),o.return=i,i.child=o,de=i,fe=null)):e=null,e===null)throw is(i);return i.lanes=536870912,null}return Vh(i,c)}var g=e.memoizedState;if(g!==null){var S=g.dehydrated;if(np(i),m)if(i.flags&256)i.flags&=-257,i=Uy(e,i,o);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(hn||Ul(e,i,o,!1),m=(o&e.childLanes)!==0,hn||m){if(c=Pe,c!==null&&(S=To(c,o),S!==0&&S!==g.retryLane))throw g.retryLane=S,lr(e,S),yi(c,e,S),Tp;Qh(),i=Uy(e,i,o)}else e=g.treeContext,fe=hr(S.nextSibling),de=i,Xt=!0,ns=null,fi=!1,e!==null&&Jn(i,e),i=Vh(i,c),i.flags|=4096;return i}return e=ur(e.child,{mode:c.mode,children:c.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Bh(e,i){var o=i.ref;if(o===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(e===null||e.ref!==o)&&(i.flags|=4194816)}}function wp(e,i,o,c,m){return Ko(i),o=rp(e,i,o,c,void 0,m),c=sp(),e!==null&&!hn?(ap(e,i,m),Ls(e,i,m)):(Xt&&c&&_n(i),i.flags|=1,Ln(e,i,o,m),i.child)}function Fy(e,i,o,c,m,g){return Ko(i),i.updateQueue=null,o=G_(i,c,o,m),q_(e),c=sp(),e!==null&&!hn?(ap(e,i,g),Ls(e,i,g)):(Xt&&c&&_n(i),i.flags|=1,Ln(e,i,o,g),i.child)}function Hy(e,i,o,c,m){if(Ko(i),i.stateNode===null){var g=Cs,S=o.contextType;typeof S=="object"&&S!==null&&(g=Dn(S)),g=new o(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=bp,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},Qf(i),S=o.contextType,g.context=typeof S=="object"&&S!==null?Dn(S):Cs,g.state=i.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(xp(i,o,S,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&bp.enqueueReplaceState(g,g.state,null),Ju(i,c,g,m),$u(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){g=i.stateNode;var P=i.memoizedProps,U=tl(o,P);g.props=U;var et=g.context,ct=o.contextType;S=Cs,typeof ct=="object"&&ct!==null&&(S=Dn(ct));var pt=o.getDerivedStateFromProps;ct=typeof pt=="function"||typeof g.getSnapshotBeforeUpdate=="function",P=i.pendingProps!==P,ct||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(P||et!==S)&&Iy(i,g,c,S),Ia=!1;var rt=i.memoizedState;g.state=rt,Ju(i,c,g,m),$u(),et=i.memoizedState,P||rt!==et||Ia?(typeof pt=="function"&&(xp(i,o,pt,c),et=i.memoizedState),(U=Ia||Ry(i,o,U,c,rt,et,S))?(ct||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=et),g.props=c,g.state=et,g.context=S,c=U):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,Xf(e,i),S=i.memoizedProps,ct=tl(o,S),g.props=ct,pt=i.pendingProps,rt=g.context,et=o.contextType,U=Cs,typeof et=="object"&&et!==null&&(U=Dn(et)),P=o.getDerivedStateFromProps,(et=typeof P=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==pt||rt!==U)&&Iy(i,g,c,U),Ia=!1,rt=i.memoizedState,g.state=rt,Ju(i,c,g,m),$u();var at=i.memoizedState;S!==pt||rt!==at||Ia||e!==null&&e.dependencies!==null&&bh(e.dependencies)?(typeof P=="function"&&(xp(i,o,P,c),at=i.memoizedState),(ct=Ia||Ry(i,o,ct,c,rt,at,U)||e!==null&&e.dependencies!==null&&bh(e.dependencies))?(et||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,at,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,at,U)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&rt===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&rt===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=at),g.props=c,g.state=at,g.context=U,c=ct):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&rt===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&rt===e.memoizedState||(i.flags|=1024),c=!1)}return g=c,Bh(e,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&c?(i.child=$o(i,e.child,null,m),i.child=$o(i,null,o,m)):Ln(e,i,o,m),i.memoizedState=g.state,e=i.child):e=Ls(e,i,m),e}function qy(e,i,o,c){return Is(),i.flags|=256,Ln(e,i,o,c),i.child}var Sp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ap(e){return{baseLanes:e,cachePool:L_()}}function Cp(e,i,o){return e=e!==null?e.childLanes&~o:0,i&&(e|=Vi),e}function Gy(e,i,o){var c=i.pendingProps,m=!1,g=(i.flags&128)!==0,S;if((S=g)||(S=e!==null&&e.memoizedState===null?!1:(en.current&2)!==0),S&&(m=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,e===null){if(Xt){if(m?Da(i):La(),(e=fe)?(e=Jv(e,fi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:it!==null?{id:ft,overflow:Et}:null,retryLane:536870912,hydrationErrors:null},o=Hu(e),o.return=i,i.child=o,de=i,fe=null)):e=null,e===null)throw is(i);return um(e)?i.lanes=32:i.lanes=536870912,null}var P=c.children;return c=c.fallback,m?(La(),m=i.mode,P=Uh({mode:"hidden",children:P},m),c=Rs(c,m,o,null),P.return=i,c.return=i,P.sibling=c,i.child=P,c=i.child,c.memoizedState=Ap(o),c.childLanes=Cp(e,S,o),i.memoizedState=Sp,rc(null,c)):(Da(i),Rp(i,P))}var U=e.memoizedState;if(U!==null&&(P=U.dehydrated,P!==null)){if(g)i.flags&256?(Da(i),i.flags&=-257,i=Ip(e,i,o)):i.memoizedState!==null?(La(),i.child=e.child,i.flags|=128,i=null):(La(),P=c.fallback,m=i.mode,c=Uh({mode:"visible",children:c.children},m),P=Rs(P,m,o,null),P.flags|=2,c.return=i,P.return=i,c.sibling=P,i.child=c,$o(i,e.child,null,o),c=i.child,c.memoizedState=Ap(o),c.childLanes=Cp(e,S,o),i.memoizedState=Sp,i=rc(null,c));else if(Da(i),um(P)){if(S=P.nextSibling&&P.nextSibling.dataset,S)var et=S.dgst;S=et,c=Error(s(419)),c.stack="",c.digest=S,Zo({value:c,source:null,stack:null}),i=Ip(e,i,o)}else if(hn||Ul(e,i,o,!1),S=(o&e.childLanes)!==0,hn||S){if(S=Pe,S!==null&&(c=To(S,o),c!==0&&c!==U.retryLane))throw U.retryLane=c,lr(e,c),yi(S,e,c),Tp;lm(P)||Qh(),i=Ip(e,i,o)}else lm(P)?(i.flags|=192,i.child=e.child,i=null):(e=U.treeContext,fe=hr(P.nextSibling),de=i,Xt=!0,ns=null,fi=!1,e!==null&&Jn(i,e),i=Rp(i,c.children),i.flags|=4096);return i}return m?(La(),P=c.fallback,m=i.mode,U=e.child,et=U.sibling,c=ur(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,et!==null?P=ur(et,P):(P=Rs(P,m,o,null),P.flags|=2),P.return=i,c.return=i,c.sibling=P,i.child=c,rc(null,c),c=i.child,P=e.child.memoizedState,P===null?P=Ap(o):(m=P.cachePool,m!==null?(U=un._currentValue,m=m.parent!==U?{parent:U,pool:U}:m):m=L_(),P={baseLanes:P.baseLanes|o,cachePool:m}),c.memoizedState=P,c.childLanes=Cp(e,S,o),i.memoizedState=Sp,rc(e.child,c)):(Da(i),o=e.child,e=o.sibling,o=ur(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,e!==null&&(S=i.deletions,S===null?(i.deletions=[e],i.flags|=16):S.push(e)),i.child=o,i.memoizedState=null,o)}function Rp(e,i){return i=Uh({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Uh(e,i){return e=Fn(22,e,null,i),e.lanes=0,e}function Ip(e,i,o){return $o(i,e.child,null,o),e=Rp(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Zy(e,i,o){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),qf(e.return,i,o)}function Pp(e,i,o,c,m,g){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:g}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=o,S.tailMode=m,S.treeForkCount=g)}function Wy(e,i,o){var c=i.pendingProps,m=c.revealOrder,g=c.tail;c=c.children;var S=en.current,P=(S&2)!==0;if(P?(S=S&1|2,i.flags|=128):S&=1,_t(en,S),Ln(e,i,c,o),c=Xt?R:0,!P&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zy(e,o,i);else if(e.tag===19)Zy(e,o,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)e=o.alternate,e!==null&&Ih(e)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),Pp(i,!1,m,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(e=m.alternate,e!==null&&Ih(e)===null){i.child=m;break}e=m.sibling,m.sibling=o,o=m,m=e}Pp(i,!0,o,null,g,c);break;case"together":Pp(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Ls(e,i,o){if(e!==null&&(i.dependencies=e.dependencies),Ma|=i.lanes,(o&i.childLanes)===0)if(e!==null){if(Ul(e,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,o=ur(e,e.pendingProps),i.child=o,o.return=i;e.sibling!==null;)e=e.sibling,o=o.sibling=ur(e,e.pendingProps),o.return=i;o.sibling=null}return i.child}function Np(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&bh(e)))}function Kw(e,i,o){switch(i.tag){case 3:Ee(i,i.stateNode.containerInfo),Ra(i,un,e.memoizedState.cache),Is();break;case 27:case 5:pr(i);break;case 4:Ee(i,i.stateNode.containerInfo);break;case 10:Ra(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,np(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Da(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Gy(e,i,o):(Da(i),e=Ls(e,i,o),e!==null?e.sibling:null);Da(i);break;case 19:var m=(e.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(Ul(e,i,o,!1),c=(o&i.childLanes)!==0),m){if(c)return Wy(e,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),_t(en,en.current),c)break;return null;case 22:return i.lanes=0,Vy(e,i,o,i.pendingProps);case 24:Ra(i,un,e.memoizedState.cache)}return Ls(e,i,o)}function Ky(e,i,o){if(e!==null)if(e.memoizedProps!==i.pendingProps)hn=!0;else{if(!Np(e,o)&&(i.flags&128)===0)return hn=!1,Kw(e,i,o);hn=(e.flags&131072)!==0}else hn=!1,Xt&&(i.flags&1048576)!==0&&Zt(i,R,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(e=Qo(i.elementType),i.type=e,typeof e=="function")zl(e)?(c=tl(e,c),i.tag=1,i=Hy(null,i,e,c,o)):(i.tag=0,i=wp(null,i,e,c,o));else{if(e!=null){var m=e.$$typeof;if(m===lt){i.tag=11,i=My(null,i,e,c,o);break t}else if(m===k){i.tag=14,i=jy(null,i,e,c,o);break t}}throw i=oe(e)||e,Error(s(306,i,""))}}return i;case 0:return wp(e,i,i.type,i.pendingProps,o);case 1:return c=i.type,m=tl(c,i.pendingProps),Hy(e,i,c,m,o);case 3:t:{if(Ee(i,i.stateNode.containerInfo),e===null)throw Error(s(387));c=i.pendingProps;var g=i.memoizedState;m=g.element,Xf(e,i),Ju(i,c,null,o);var S=i.memoizedState;if(c=S.cache,Ra(i,un,c),c!==g.cache&&Gf(i,[un],o,!0),$u(),c=S.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=qy(e,i,c,o);break t}else if(c!==m){m=u(Error(s(424)),i),Zo(m),i=qy(e,i,c,o);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,fe=hr(e.firstChild),de=i,Xt=!0,ns=null,fi=!0,o=V_(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Is(),c===m){i=Ls(e,i,o);break t}Ln(e,i,c,o)}i=i.child}return i;case 26:return Bh(e,i),e===null?(o=s0(i.type,null,i.pendingProps,null))?i.memoizedState=o:Xt||(o=i.type,e=i.pendingProps,c=id(wt.current).createElement(o),c[Fe]=i,c[Ke]=e,On(c,o,e),Ye(c),i.stateNode=c):i.memoizedState=s0(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return pr(i),e===null&&Xt&&(c=i.stateNode=n0(i.type,i.pendingProps,wt.current),de=i,fi=!0,m=fe,Ua(i.type)?(cm=m,fe=hr(c.firstChild)):fe=m),Ln(e,i,i.pendingProps.children,o),Bh(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Xt&&((m=c=fe)&&(c=w1(c,i.type,i.pendingProps,fi),c!==null?(i.stateNode=c,de=i,fe=hr(c.firstChild),fi=!1,m=!0):m=!1),m||is(i)),pr(i),m=i.type,g=i.pendingProps,S=e!==null?e.memoizedProps:null,c=g.children,sm(m,g)?c=null:S!==null&&sm(m,S)&&(i.flags|=32),i.memoizedState!==null&&(m=rp(e,i,Vw,null,null,o),vc._currentValue=m),Bh(e,i),Ln(e,i,c,o),i.child;case 6:return e===null&&Xt&&((e=o=fe)&&(o=S1(o,i.pendingProps,fi),o!==null?(i.stateNode=o,de=i,fe=null,e=!0):e=!1),e||is(i)),null;case 13:return Gy(e,i,o);case 4:return Ee(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=$o(i,null,c,o):Ln(e,i,c,o),i.child;case 11:return My(e,i,i.type,i.pendingProps,o);case 7:return Ln(e,i,i.pendingProps,o),i.child;case 8:return Ln(e,i,i.pendingProps.children,o),i.child;case 12:return Ln(e,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Ra(i,i.type,c.value),Ln(e,i,c.children,o),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,Ko(i),m=Dn(m),c=c(m),i.flags|=1,Ln(e,i,c,o),i.child;case 14:return jy(e,i,i.type,i.pendingProps,o);case 15:return zy(e,i,i.type,i.pendingProps,o);case 19:return Wy(e,i,o);case 31:return Ww(e,i,o);case 22:return Vy(e,i,o,i.pendingProps);case 24:return Ko(i),c=Dn(un),e===null?(m=Kf(),m===null&&(m=Pe,g=Zf(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),i.memoizedState={parent:c,cache:m},Qf(i),Ra(i,un,m)):((e.lanes&o)!==0&&(Xf(e,i),Ju(i,null,null,o),$u()),m=e.memoizedState,g=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),Ra(i,un,c)):(c=g.cache,Ra(i,un,c),c!==m.cache&&Gf(i,[un],o,!0))),Ln(e,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Os(e){e.flags|=4}function Dp(e,i,o,c,m){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(m&335544128)===m)if(e.stateNode.complete)e.flags|=8192;else if(bv())e.flags|=8192;else throw Xo=Sh,Yf}else e.flags&=-16777217}function Yy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!c0(i))if(bv())e.flags|=8192;else throw Xo=Sh,Yf}function Fh(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?wl():536870912,e.lanes|=i,Jl|=i)}function sc(e,i){if(!Xt)switch(e.tailMode){case"hidden":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Me(e){var i=e.alternate!==null&&e.alternate.child===e.child,o=0,c=0;if(i)for(var m=e.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=c,e.childLanes=o,i}function Yw(e,i,o){var c=i.pendingProps;switch(Qe(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(i),null;case 1:return Me(i),null;case 3:return o=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Ps(un),Ce(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Cr(i)?Os(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zu())),Me(i),null;case 26:var m=i.type,g=i.memoizedState;return e===null?(Os(i),g!==null?(Me(i),Yy(i,g)):(Me(i),Dp(i,m,null,c,o))):g?g!==e.memoizedState?(Os(i),Me(i),Yy(i,g)):(Me(i),i.flags&=-16777217):(e=e.memoizedProps,e!==c&&Os(i),Me(i),Dp(i,m,e,c,o)),null;case 27:if(zr(i),o=wt.current,m=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Os(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Me(i),null}e=yt.current,Cr(i)?Gu(i):(e=n0(m,c,o),i.stateNode=e,Os(i))}return Me(i),null;case 5:if(zr(i),m=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Os(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Me(i),null}if(g=yt.current,Cr(i))Gu(i);else{var S=id(wt.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?S.createElement(m,{is:c.is}):S.createElement(m)}}g[Fe]=i,g[Ke]=c;t:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break t;for(;S.sibling===null;){if(S.return===null||S.return===i)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=g;t:switch(On(g,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&Os(i)}}return Me(i),Dp(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,o),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&Os(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(e=wt.current,Cr(i)){if(e=i.stateNode,o=i.memoizedProps,c=null,m=de,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}e[Fe]=i,e=!!(e.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Gv(e.nodeValue,o)),e||is(i,!0)}else e=id(e).createTextNode(c),e[Fe]=i,i.stateNode=e}return Me(i),null;case 31:if(o=i.memoizedState,e===null||e.memoizedState!==null){if(c=Cr(i),o!==null){if(e===null){if(!c)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Fe]=i}else Is(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Me(i),e=!1}else o=Zu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return i.flags&256?(ji(i),i):(ji(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Me(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=Cr(i),c!==null&&c.dehydrated!==null){if(e===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Fe]=i}else Is(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Me(i),m=!1}else m=Zu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(ji(i),i):(ji(i),null)}return ji(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,e=e!==null&&e.memoizedState!==null,o&&(c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)),o!==e&&o&&(i.child.flags|=8192),Fh(i,i.updateQueue),Me(i),null);case 4:return Ce(),e===null&&tm(i.stateNode.containerInfo),Me(i),null;case 10:return Ps(i.type),Me(i),null;case 19:if(ut(en),c=i.memoizedState,c===null)return Me(i),null;if(m=(i.flags&128)!==0,g=c.rendering,g===null)if(m)sc(c,!1);else{if($e!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=Ih(e),g!==null){for(i.flags|=128,sc(c,!1),e=g.updateQueue,i.updateQueue=e,Fh(i,e),i.subtreeFlags=0,e=o,o=i.child;o!==null;)Fu(o,e),o=o.sibling;return _t(en,en.current&1|2),Xt&&Lt(i,c.treeForkCount),i.child}e=e.sibling}c.tail!==null&&Nn()>Wh&&(i.flags|=128,m=!0,sc(c,!1),i.lanes=4194304)}else{if(!m)if(e=Ih(g),e!==null){if(i.flags|=128,m=!0,e=e.updateQueue,i.updateQueue=e,Fh(i,e),sc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Xt)return Me(i),null}else 2*Nn()-c.renderingStartTime>Wh&&o!==536870912&&(i.flags|=128,m=!0,sc(c,!1),i.lanes=4194304);c.isBackwards?(g.sibling=i.child,i.child=g):(e=c.last,e!==null?e.sibling=g:i.child=g,c.last=g)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Nn(),e.sibling=null,o=en.current,_t(en,m?o&1|2:o&1),Xt&&Lt(i,c.treeForkCount),e):(Me(i),null);case 22:case 23:return ji(i),ep(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(Me(i),i.subtreeFlags&6&&(i.flags|=8192)):Me(i),o=i.updateQueue,o!==null&&Fh(i,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),e!==null&&ut(Yo),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ps(un),Me(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Qw(e,i){switch(Qe(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Ps(un),Ce(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return zr(i),null;case 31:if(i.memoizedState!==null){if(ji(i),i.alternate===null)throw Error(s(340));Is()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(ji(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Is()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return ut(en),null;case 4:return Ce(),null;case 10:return Ps(i.type),null;case 22:case 23:return ji(i),ep(),e!==null&&ut(Yo),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Ps(un),null;case 25:return null;default:return null}}function Qy(e,i){switch(Qe(i),i.tag){case 3:Ps(un),Ce();break;case 26:case 27:case 5:zr(i);break;case 4:Ce();break;case 31:i.memoizedState!==null&&ji(i);break;case 13:ji(i);break;case 19:ut(en);break;case 10:Ps(i.type);break;case 22:case 23:ji(i),ep(),e!==null&&ut(Yo);break;case 24:Ps(un)}}function ac(e,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&e)===e){c=void 0;var g=o.create,S=o.inst;c=g(),S.destroy=c}o=o.next}while(o!==m)}}catch(P){be(i,i.return,P)}}function Oa(e,i,o){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&e)===e){var S=c.inst,P=S.destroy;if(P!==void 0){S.destroy=void 0,m=i;var U=o,et=P;try{et()}catch(ct){be(m,U,ct)}}}c=c.next}while(c!==g)}}catch(ct){be(i,i.return,ct)}}function Xy(e){var i=e.updateQueue;if(i!==null){var o=e.stateNode;try{U_(i,o)}catch(c){be(e,e.return,c)}}}function $y(e,i,o){o.props=tl(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(c){be(e,i,c)}}function oc(e,i){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof o=="function"?e.refCleanup=o(c):o.current=c}}catch(m){be(e,i,m)}}function ss(e,i){var o=e.ref,c=e.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){be(e,i,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){be(e,i,m)}else o.current=null}function Jy(e){var i=e.type,o=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break t;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){be(e,e.return,m)}}function Lp(e,i,o){try{var c=e.stateNode;y1(c,e.type,o,i),c[Ke]=i}catch(m){be(e,e.return,m)}}function tv(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ua(e.type)||e.tag===4}function Op(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||tv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ua(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kp(e,i,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(e),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=jn));else if(c!==4&&(c===27&&Ua(e.type)&&(o=e.stateNode,i=null),e=e.child,e!==null))for(kp(e,i,o),e=e.sibling;e!==null;)kp(e,i,o),e=e.sibling}function Hh(e,i,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?o.insertBefore(e,i):o.appendChild(e);else if(c!==4&&(c===27&&Ua(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Hh(e,i,o),e=e.sibling;e!==null;)Hh(e,i,o),e=e.sibling}function ev(e){var i=e.stateNode,o=e.memoizedProps;try{for(var c=e.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);On(i,c,o),i[Fe]=e,i[Ke]=o}catch(g){be(e,e.return,g)}}var ks=!1,dn=!1,Mp=!1,nv=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function Xw(e,i){if(e=e.containerInfo,im=cd,e=zo(e),Xr(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else t:{o=(o=e.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var S=0,P=-1,U=-1,et=0,ct=0,pt=e,rt=null;e:for(;;){for(var at;pt!==o||m!==0&&pt.nodeType!==3||(P=S+m),pt!==g||c!==0&&pt.nodeType!==3||(U=S+c),pt.nodeType===3&&(S+=pt.nodeValue.length),(at=pt.firstChild)!==null;)rt=pt,pt=at;for(;;){if(pt===e)break e;if(rt===o&&++et===m&&(P=S),rt===g&&++ct===c&&(U=S),(at=pt.nextSibling)!==null)break;pt=rt,rt=pt.parentNode}pt=at}o=P===-1||U===-1?null:{start:P,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(rm={focusedElem:e,selectionRange:o},cd=!1,Cn=i;Cn!==null;)if(i=Cn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Cn=e;else for(;Cn!==null;){switch(i=Cn,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)m=e[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,o=i,m=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Nt=tl(o.type,m);e=c.getSnapshotBeforeUpdate(Nt,g),c.__reactInternalSnapshotBeforeUpdate=e}catch(jt){be(o,o.return,jt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,o=e.nodeType,o===9)om(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":om(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Cn=e;break}Cn=i.return}}function iv(e,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:js(e,o),c&4&&ac(5,o);break;case 1:if(js(e,o),c&4)if(e=o.stateNode,i===null)try{e.componentDidMount()}catch(S){be(o,o.return,S)}else{var m=tl(o.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(m,i,e.__reactInternalSnapshotBeforeUpdate)}catch(S){be(o,o.return,S)}}c&64&&Xy(o),c&512&&oc(o,o.return);break;case 3:if(js(e,o),c&64&&(e=o.updateQueue,e!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{U_(e,i)}catch(S){be(o,o.return,S)}}break;case 27:i===null&&c&4&&ev(o);case 26:case 5:js(e,o),i===null&&c&4&&Jy(o),c&512&&oc(o,o.return);break;case 12:js(e,o);break;case 31:js(e,o),c&4&&av(e,o);break;case 13:js(e,o),c&4&&ov(e,o),c&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=a1.bind(null,o),A1(e,o))));break;case 22:if(c=o.memoizedState!==null||ks,!c){i=i!==null&&i.memoizedState!==null||dn,m=ks;var g=dn;ks=c,(dn=i)&&!g?zs(e,o,(o.subtreeFlags&8772)!==0):js(e,o),ks=m,dn=g}break;case 30:break;default:js(e,o)}}function rv(e){var i=e.alternate;i!==null&&(e.alternate=null,rv(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ca(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var je=null,pi=!1;function Ms(e,i,o){for(o=o.child;o!==null;)sv(e,i,o),o=o.sibling}function sv(e,i,o){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(ei,o)}catch{}switch(o.tag){case 26:dn||ss(o,i),Ms(e,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:dn||ss(o,i);var c=je,m=pi;Ua(o.type)&&(je=o.stateNode,pi=!1),Ms(e,i,o),gc(o.stateNode),je=c,pi=m;break;case 5:dn||ss(o,i);case 6:if(c=je,m=pi,je=null,Ms(e,i,o),je=c,pi=m,je!==null)if(pi)try{(je.nodeType===9?je.body:je.nodeName==="HTML"?je.ownerDocument.body:je).removeChild(o.stateNode)}catch(g){be(o,i,g)}else try{je.removeChild(o.stateNode)}catch(g){be(o,i,g)}break;case 18:je!==null&&(pi?(e=je,Xv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),ou(e)):Xv(je,o.stateNode));break;case 4:c=je,m=pi,je=o.stateNode.containerInfo,pi=!0,Ms(e,i,o),je=c,pi=m;break;case 0:case 11:case 14:case 15:Oa(2,o,i),dn||Oa(4,o,i),Ms(e,i,o);break;case 1:dn||(ss(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&$y(o,i,c)),Ms(e,i,o);break;case 21:Ms(e,i,o);break;case 22:dn=(c=dn)||o.memoizedState!==null,Ms(e,i,o),dn=c;break;default:Ms(e,i,o)}}function av(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ou(e)}catch(o){be(i,i.return,o)}}}function ov(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ou(e)}catch(o){be(i,i.return,o)}}function $w(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new nv),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new nv),i;default:throw Error(s(435,e.tag))}}function qh(e,i){var o=$w(e);i.forEach(function(c){if(!o.has(c)){o.add(c);var m=o1.bind(null,e,c);c.then(m,m)}})}function mi(e,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],g=e,S=i,P=S;t:for(;P!==null;){switch(P.tag){case 27:if(Ua(P.type)){je=P.stateNode,pi=!1;break t}break;case 5:je=P.stateNode,pi=!1;break t;case 3:case 4:je=P.stateNode.containerInfo,pi=!0;break t}P=P.return}if(je===null)throw Error(s(160));sv(g,S,m),je=null,pi=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)lv(i,e),i=i.sibling}var Ir=null;function lv(e,i){var o=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mi(i,e),gi(e),c&4&&(Oa(3,e,e.return),ac(3,e),Oa(5,e,e.return));break;case 1:mi(i,e),gi(e),c&512&&(dn||o===null||ss(o,o.return)),c&64&&ks&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=Ir;if(mi(i,e),gi(e),c&512&&(dn||o===null||ss(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=e.memoizedState,o===null)if(c===null)if(e.stateNode===null){t:{c=e.type,o=e.memoizedProps,m=m.ownerDocument||m;e:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Xi]||g[Fe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),On(g,c,o),g[Fe]=e,Ye(g),c=g;break t;case"link":var S=l0("link","href",m).get(c+(o.href||""));if(S){for(var P=0;P<S.length;P++)if(g=S[P],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(P,1);break e}}g=m.createElement(c),On(g,c,o),m.head.appendChild(g);break;case"meta":if(S=l0("meta","content",m).get(c+(o.content||""))){for(P=0;P<S.length;P++)if(g=S[P],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(P,1);break e}}g=m.createElement(c),On(g,c,o),m.head.appendChild(g);break;default:throw Error(s(468,c))}g[Fe]=e,Ye(g),c=g}e.stateNode=c}else u0(m,e.type,e.stateNode);else e.stateNode=o0(m,c,e.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?u0(m,e.type,e.stateNode):o0(m,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Lp(e,e.memoizedProps,o.memoizedProps)}break;case 27:mi(i,e),gi(e),c&512&&(dn||o===null||ss(o,o.return)),o!==null&&c&4&&Lp(e,e.memoizedProps,o.memoizedProps);break;case 5:if(mi(i,e),gi(e),c&512&&(dn||o===null||ss(o,o.return)),e.flags&32){m=e.stateNode;try{on(m,"")}catch(Nt){be(e,e.return,Nt)}}c&4&&e.stateNode!=null&&(m=e.memoizedProps,Lp(e,m,o!==null?o.memoizedProps:m)),c&1024&&(Mp=!0);break;case 6:if(mi(i,e),gi(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,o=e.stateNode;try{o.nodeValue=c}catch(Nt){be(e,e.return,Nt)}}break;case 3:if(ad=null,m=Ir,Ir=rd(i.containerInfo),mi(i,e),Ir=m,gi(e),c&4&&o!==null&&o.memoizedState.isDehydrated)try{ou(i.containerInfo)}catch(Nt){be(e,e.return,Nt)}Mp&&(Mp=!1,uv(e));break;case 4:c=Ir,Ir=rd(e.stateNode.containerInfo),mi(i,e),gi(e),Ir=c;break;case 12:mi(i,e),gi(e);break;case 31:mi(i,e),gi(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,qh(e,c)));break;case 13:mi(i,e),gi(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Zh=Nn()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,qh(e,c)));break;case 22:m=e.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,et=ks,ct=dn;if(ks=et||m,dn=ct||U,mi(i,e),dn=ct,ks=et,gi(e),c&8192)t:for(i=e.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||U||ks||dn||el(e)),o=null,i=e;;){if(i.tag===5||i.tag===26){if(o===null){U=o=i;try{if(g=U.stateNode,m)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{P=U.stateNode;var pt=U.memoizedProps.style,rt=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;P.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(Nt){be(U,U.return,Nt)}}}else if(i.tag===6){if(o===null){U=i;try{U.stateNode.nodeValue=m?"":U.memoizedProps}catch(Nt){be(U,U.return,Nt)}}}else if(i.tag===18){if(o===null){U=i;try{var at=U.stateNode;m?$v(at,!0):$v(U.stateNode,!1)}catch(Nt){be(U,U.return,Nt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,qh(e,o))));break;case 19:mi(i,e),gi(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,qh(e,c)));break;case 30:break;case 21:break;default:mi(i,e),gi(e)}}function gi(e){var i=e.flags;if(i&2){try{for(var o,c=e.return;c!==null;){if(tv(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,g=Op(e);Hh(e,g,m);break;case 5:var S=o.stateNode;o.flags&32&&(on(S,""),o.flags&=-33);var P=Op(e);Hh(e,P,S);break;case 3:case 4:var U=o.stateNode.containerInfo,et=Op(e);kp(e,et,U);break;default:throw Error(s(161))}}catch(ct){be(e,e.return,ct)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function uv(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;uv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function js(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)iv(e,i.alternate,i),i=i.sibling}function el(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Oa(4,i,i.return),el(i);break;case 1:ss(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&$y(i,i.return,o),el(i);break;case 27:gc(i.stateNode);case 26:case 5:ss(i,i.return),el(i);break;case 22:i.memoizedState===null&&el(i);break;case 30:el(i);break;default:el(i)}e=e.sibling}}function zs(e,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=e,g=i,S=g.flags;switch(g.tag){case 0:case 11:case 15:zs(m,g,o),ac(4,g);break;case 1:if(zs(m,g,o),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(et){be(c,c.return,et)}if(c=g,m=c.updateQueue,m!==null){var P=c.stateNode;try{var U=m.shared.hiddenCallbacks;if(U!==null)for(m.shared.hiddenCallbacks=null,m=0;m<U.length;m++)B_(U[m],P)}catch(et){be(c,c.return,et)}}o&&S&64&&Xy(g),oc(g,g.return);break;case 27:ev(g);case 26:case 5:zs(m,g,o),o&&c===null&&S&4&&Jy(g),oc(g,g.return);break;case 12:zs(m,g,o);break;case 31:zs(m,g,o),o&&S&4&&av(m,g);break;case 13:zs(m,g,o),o&&S&4&&ov(m,g);break;case 22:g.memoizedState===null&&zs(m,g,o),oc(g,g.return);break;case 30:break;default:zs(m,g,o)}i=i.sibling}}function jp(e,i){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&Wu(o))}function zp(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Wu(e))}function Pr(e,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)cv(e,i,o,c),i=i.sibling}function cv(e,i,o,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Pr(e,i,o,c),m&2048&&ac(9,i);break;case 1:Pr(e,i,o,c);break;case 3:Pr(e,i,o,c),m&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Wu(e)));break;case 12:if(m&2048){Pr(e,i,o,c),e=i.stateNode;try{var g=i.memoizedProps,S=g.id,P=g.onPostCommit;typeof P=="function"&&P(S,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(U){be(i,i.return,U)}}else Pr(e,i,o,c);break;case 31:Pr(e,i,o,c);break;case 13:Pr(e,i,o,c);break;case 23:break;case 22:g=i.stateNode,S=i.alternate,i.memoizedState!==null?g._visibility&2?Pr(e,i,o,c):lc(e,i):g._visibility&2?Pr(e,i,o,c):(g._visibility|=2,Ql(e,i,o,c,(i.subtreeFlags&10256)!==0||!1)),m&2048&&jp(S,i);break;case 24:Pr(e,i,o,c),m&2048&&zp(i.alternate,i);break;default:Pr(e,i,o,c)}}function Ql(e,i,o,c,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,S=i,P=o,U=c,et=S.flags;switch(S.tag){case 0:case 11:case 15:Ql(g,S,P,U,m),ac(8,S);break;case 23:break;case 22:var ct=S.stateNode;S.memoizedState!==null?ct._visibility&2?Ql(g,S,P,U,m):lc(g,S):(ct._visibility|=2,Ql(g,S,P,U,m)),m&&et&2048&&jp(S.alternate,S);break;case 24:Ql(g,S,P,U,m),m&&et&2048&&zp(S.alternate,S);break;default:Ql(g,S,P,U,m)}i=i.sibling}}function lc(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=e,c=i,m=c.flags;switch(c.tag){case 22:lc(o,c),m&2048&&jp(c.alternate,c);break;case 24:lc(o,c),m&2048&&zp(c.alternate,c);break;default:lc(o,c)}i=i.sibling}}var uc=8192;function Xl(e,i,o){if(e.subtreeFlags&uc)for(e=e.child;e!==null;)hv(e,i,o),e=e.sibling}function hv(e,i,o){switch(e.tag){case 26:Xl(e,i,o),e.flags&uc&&e.memoizedState!==null&&z1(o,Ir,e.memoizedState,e.memoizedProps);break;case 5:Xl(e,i,o);break;case 3:case 4:var c=Ir;Ir=rd(e.stateNode.containerInfo),Xl(e,i,o),Ir=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=uc,uc=16777216,Xl(e,i,o),uc=c):Xl(e,i,o));break;default:Xl(e,i,o)}}function dv(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function cc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Cn=c,pv(c,e)}dv(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)fv(e),e=e.sibling}function fv(e){switch(e.tag){case 0:case 11:case 15:cc(e),e.flags&2048&&Oa(9,e,e.return);break;case 3:cc(e);break;case 12:cc(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Gh(e)):cc(e);break;default:cc(e)}}function Gh(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Cn=c,pv(c,e)}dv(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Oa(8,i,i.return),Gh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Gh(i));break;default:Gh(i)}e=e.sibling}}function pv(e,i){for(;Cn!==null;){var o=Cn;switch(o.tag){case 0:case 11:case 15:Oa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Wu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Cn=c;else t:for(o=e;Cn!==null;){c=Cn;var m=c.sibling,g=c.return;if(rv(c),c===o){Cn=null;break t}if(m!==null){m.return=g,Cn=m;break t}Cn=g}}}var Jw={getCacheForType:function(e){var i=Dn(un),o=i.data.get(e);return o===void 0&&(o=e(),i.data.set(e,o)),o},cacheSignal:function(){return Dn(un).controller.signal}},t1=typeof WeakMap=="function"?WeakMap:Map,ge=0,Pe=null,$t=null,ne=0,xe=0,zi=null,ka=!1,$l=!1,Vp=!1,Vs=0,$e=0,Ma=0,nl=0,Bp=0,Vi=0,Jl=0,hc=null,_i=null,Up=!1,Zh=0,mv=0,Wh=1/0,Kh=null,ja=null,yn=0,za=null,tu=null,Bs=0,Fp=0,Hp=null,gv=null,dc=0,qp=null;function Bi(){return(ge&2)!==0&&ne!==0?ne&-ne:ot.T!==null?Qp():wo()}function _v(){if(Vi===0)if((ne&536870912)===0||Xt){var e=Hr;Hr<<=1,(Hr&3932160)===0&&(Hr=262144),Vi=e}else Vi=536870912;return e=Mi.current,e!==null&&(e.flags|=32),Vi}function yi(e,i,o){(e===Pe&&(xe===2||xe===9)||e.cancelPendingCommit!==null)&&(eu(e,0),Va(e,ne,Vi,!1)),gr(e,o),((ge&2)===0||e!==Pe)&&(e===Pe&&((ge&2)===0&&(nl|=o),$e===4&&Va(e,ne,Vi,!1)),as(e))}function yv(e,i,o){if((ge&6)!==0)throw Error(s(327));var c=!o&&(i&127)===0&&(i&e.expiredLanes)===0||wi(e,i),m=c?i1(e,i):Zp(e,i,!0),g=c;do{if(m===0){$l&&!c&&Va(e,i,0,!1);break}else{if(o=e.current.alternate,g&&!e1(o)){m=Zp(e,i,!1),g=!1;continue}if(m===2){if(g=i,e.errorRecoveryDisabledLanes&g)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;t:{var P=e;m=hc;var U=P.current.memoizedState.isDehydrated;if(U&&(eu(P,S).flags|=256),S=Zp(P,S,!1),S!==2){if(Vp&&!U){P.errorRecoveryDisabledLanes|=g,nl|=g,m=4;break t}g=_i,_i=m,g!==null&&(_i===null?_i=g:_i.push.apply(_i,g))}m=S}if(g=!1,m!==2)continue}}if(m===1){eu(e,0),Va(e,i,0,!0);break}t:{switch(c=e,g=m,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Va(c,i,Vi,!ka);break t;case 2:_i=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=Zh+300-Nn(),10<m)){if(Va(c,i,Vi,!ka),Yi(c,0,!0)!==0)break t;Bs=i,c.timeoutHandle=Yv(vv.bind(null,c,o,_i,Kh,Up,i,Vi,nl,Jl,ka,g,"Throttled",-0,0),m);break t}vv(c,o,_i,Kh,Up,i,Vi,nl,Jl,ka,g,null,-0,0)}}break}while(!0);as(e)}function vv(e,i,o,c,m,g,S,P,U,et,ct,pt,rt,at){if(e.timeoutHandle=-1,pt=i.subtreeFlags,pt&8192||(pt&16785408)===16785408){pt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:jn},hv(i,g,pt);var Nt=(g&62914560)===g?Zh-Nn():(g&4194048)===g?mv-Nn():0;if(Nt=V1(pt,Nt),Nt!==null){Bs=g,e.cancelPendingCommit=Nt(Cv.bind(null,e,i,g,o,c,m,S,P,U,ct,pt,null,rt,at)),Va(e,g,S,!et);return}}Cv(e,i,g,o,c,m,S,P,U)}function e1(e){for(var i=e;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],g=m.getSnapshot;m=m.value;try{if(!Sn(g(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Va(e,i,o,c){i&=~Bp,i&=~nl,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var m=i;0<m;){var g=31-Be(m),S=1<<g;c[g]=-1,m&=~S}o!==0&&ys(e,o,i)}function Yh(){return(ge&6)===0?(fc(0),!1):!0}function Gp(){if($t!==null){if(xe===0)var e=$t.return;else e=$t,Rr=rs=null,op(e),Gl=null,Yu=0,e=$t;for(;e!==null;)Qy(e.alternate,e),e=e.return;$t=null}}function eu(e,i){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,b1(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),Bs=0,Gp(),Pe=e,$t=o=ur(e.current,null),ne=i,xe=0,zi=null,ka=!1,$l=wi(e,i),Vp=!1,Jl=Vi=Bp=nl=Ma=$e=0,_i=hc=null,Up=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var m=31-Be(c),g=1<<m;i|=e[m],c&=~g}return Vs=i,Ho(),o}function xv(e,i){Gt=null,ot.H=ic,i===ql||i===wh?(i=M_(),xe=3):i===Yf?(i=M_(),xe=4):xe=i===Tp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,zi=i,$t===null&&($e=1,zh(e,u(i,e.current)))}function bv(){var e=Mi.current;return e===null?!0:(ne&4194048)===ne?cr===null:(ne&62914560)===ne||(ne&536870912)!==0?e===cr:!1}function Ev(){var e=ot.H;return ot.H=ic,e===null?ic:e}function Tv(){var e=ot.A;return ot.A=Jw,e}function Qh(){$e=4,ka||(ne&4194048)!==ne&&Mi.current!==null||($l=!0),(Ma&134217727)===0&&(nl&134217727)===0||Pe===null||Va(Pe,ne,Vi,!1)}function Zp(e,i,o){var c=ge;ge|=2;var m=Ev(),g=Tv();(Pe!==e||ne!==i)&&(Kh=null,eu(e,i)),i=!1;var S=$e;t:do try{if(xe!==0&&$t!==null){var P=$t,U=zi;switch(xe){case 8:Gp(),S=6;break t;case 3:case 2:case 9:case 6:Mi.current===null&&(i=!0);var et=xe;if(xe=0,zi=null,nu(e,P,U,et),o&&$l){S=0;break t}break;default:et=xe,xe=0,zi=null,nu(e,P,U,et)}}n1(),S=$e;break}catch(ct){xv(e,ct)}while(!0);return i&&e.shellSuspendCounter++,Rr=rs=null,ge=c,ot.H=m,ot.A=g,$t===null&&(Pe=null,ne=0,Ho()),S}function n1(){for(;$t!==null;)wv($t)}function i1(e,i){var o=ge;ge|=2;var c=Ev(),m=Tv();Pe!==e||ne!==i?(Kh=null,Wh=Nn()+500,eu(e,i)):$l=wi(e,i);t:do try{if(xe!==0&&$t!==null){i=$t;var g=zi;e:switch(xe){case 1:xe=0,zi=null,nu(e,i,g,1);break;case 2:case 9:if(O_(g)){xe=0,zi=null,Sv(i);break}i=function(){xe!==2&&xe!==9||Pe!==e||(xe=7),as(e)},g.then(i,i);break t;case 3:xe=7;break t;case 4:xe=5;break t;case 7:O_(g)?(xe=0,zi=null,Sv(i)):(xe=0,zi=null,nu(e,i,g,7));break;case 5:var S=null;switch($t.tag){case 26:S=$t.memoizedState;case 5:case 27:var P=$t;if(S?c0(S):P.stateNode.complete){xe=0,zi=null;var U=P.sibling;if(U!==null)$t=U;else{var et=P.return;et!==null?($t=et,Xh(et)):$t=null}break e}}xe=0,zi=null,nu(e,i,g,5);break;case 6:xe=0,zi=null,nu(e,i,g,6);break;case 8:Gp(),$e=6;break t;default:throw Error(s(462))}}r1();break}catch(ct){xv(e,ct)}while(!0);return Rr=rs=null,ot.H=c,ot.A=m,ge=o,$t!==null?0:(Pe=null,ne=0,Ho(),$e)}function r1(){for(;$t!==null&&!bl();)wv($t)}function wv(e){var i=Ky(e.alternate,e,Vs);e.memoizedProps=e.pendingProps,i===null?Xh(e):$t=i}function Sv(e){var i=e,o=i.alternate;switch(i.tag){case 15:case 0:i=Fy(o,i,i.pendingProps,i.type,void 0,ne);break;case 11:i=Fy(o,i,i.pendingProps,i.type.render,i.ref,ne);break;case 5:op(i);default:Qy(o,i),i=$t=Fu(i,Vs),i=Ky(o,i,Vs)}e.memoizedProps=e.pendingProps,i===null?Xh(e):$t=i}function nu(e,i,o,c){Rr=rs=null,op(i),Gl=null,Yu=0;var m=i.return;try{if(Zw(e,m,i,o,ne)){$e=1,zh(e,u(o,e.current)),$t=null;return}}catch(g){if(m!==null)throw $t=m,g;$e=1,zh(e,u(o,e.current)),$t=null;return}i.flags&32768?(Xt||c===1?e=!0:$l||(ne&536870912)!==0?e=!1:(ka=e=!0,(c===2||c===9||c===3||c===6)&&(c=Mi.current,c!==null&&c.tag===13&&(c.flags|=16384))),Av(i,e)):Xh(i)}function Xh(e){var i=e;do{if((i.flags&32768)!==0){Av(i,ka);return}e=i.return;var o=Yw(i.alternate,i,Vs);if(o!==null){$t=o;return}if(i=i.sibling,i!==null){$t=i;return}$t=i=e}while(i!==null);$e===0&&($e=5)}function Av(e,i){do{var o=Qw(e.alternate,e);if(o!==null){o.flags&=32767,$t=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(e=e.sibling,e!==null)){$t=e;return}$t=e=o}while(e!==null);$e=6,$t=null}function Cv(e,i,o,c,m,g,S,P,U){e.cancelPendingCommit=null;do $h();while(yn!==0);if((ge&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=jl,Bu(e,o,g,S,P,U),e===Pe&&($t=Pe=null,ne=0),tu=i,za=e,Bs=o,Fp=g,Hp=m,gv=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,l1(mr,function(){return Dv(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=ot.T,ot.T=null,m=xt.p,xt.p=2,S=ge,ge|=4;try{Xw(e,i,o)}finally{ge=S,xt.p=m,ot.T=c}}yn=1,Rv(),Iv(),Pv()}}function Rv(){if(yn===1){yn=0;var e=za,i=tu,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=ot.T,ot.T=null;var c=xt.p;xt.p=2;var m=ge;ge|=4;try{lv(i,e);var g=rm,S=zo(e.containerInfo),P=g.focusedElem,U=g.selectionRange;if(S!==P&&P&&P.ownerDocument&&Ll(P.ownerDocument.documentElement,P)){if(U!==null&&Xr(P)){var et=U.start,ct=U.end;if(ct===void 0&&(ct=et),"selectionStart"in P)P.selectionStart=et,P.selectionEnd=Math.min(ct,P.value.length);else{var pt=P.ownerDocument||document,rt=pt&&pt.defaultView||window;if(rt.getSelection){var at=rt.getSelection(),Nt=P.textContent.length,jt=Math.min(U.start,Nt),Se=U.end===void 0?jt:Math.min(U.end,Nt);!at.extend&&jt>Se&&(S=Se,Se=jt,jt=S);var Q=jo(P,jt),W=jo(P,Se);if(Q&&W&&(at.rangeCount!==1||at.anchorNode!==Q.node||at.anchorOffset!==Q.offset||at.focusNode!==W.node||at.focusOffset!==W.offset)){var tt=pt.createRange();tt.setStart(Q.node,Q.offset),at.removeAllRanges(),jt>Se?(at.addRange(tt),at.extend(W.node,W.offset)):(tt.setEnd(W.node,W.offset),at.addRange(tt))}}}}for(pt=[],at=P;at=at.parentNode;)at.nodeType===1&&pt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<pt.length;P++){var ht=pt[P];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}cd=!!im,rm=im=null}finally{ge=m,xt.p=c,ot.T=o}}e.current=i,yn=2}}function Iv(){if(yn===2){yn=0;var e=za,i=tu,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=ot.T,ot.T=null;var c=xt.p;xt.p=2;var m=ge;ge|=4;try{iv(e,i.alternate,i)}finally{ge=m,xt.p=c,ot.T=o}}yn=3}}function Pv(){if(yn===4||yn===3){yn=0,vo();var e=za,i=tu,o=Bs,c=gv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?yn=5:(yn=0,tu=za=null,Nv(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(ja=null),Pt(o),i=i.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(ei,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=ot.T,m=xt.p,xt.p=2,ot.T=null;try{for(var g=e.onRecoverableError,S=0;S<c.length;S++){var P=c[S];g(P.value,{componentStack:P.stack})}}finally{ot.T=i,xt.p=m}}(Bs&3)!==0&&$h(),as(e),m=e.pendingLanes,(o&261930)!==0&&(m&42)!==0?e===qp?dc++:(dc=0,qp=e):dc=0,fc(0)}}function Nv(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Wu(i)))}function $h(){return Rv(),Iv(),Pv(),Dv()}function Dv(){if(yn!==5)return!1;var e=za,i=Fp;Fp=0;var o=Pt(Bs),c=ot.T,m=xt.p;try{xt.p=32>o?32:o,ot.T=null,o=Hp,Hp=null;var g=za,S=Bs;if(yn=0,tu=za=null,Bs=0,(ge&6)!==0)throw Error(s(331));var P=ge;if(ge|=4,fv(g.current),cv(g,g.current,S,o),ge=P,fc(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(ei,g)}catch{}return!0}finally{xt.p=m,ot.T=c,Nv(e,i)}}function Lv(e,i,o){i=u(o,i),i=Ep(e.stateNode,i,2),e=Na(e,i,2),e!==null&&(gr(e,2),as(e))}function be(e,i,o){if(e.tag===3)Lv(e,e,o);else for(;i!==null;){if(i.tag===3){Lv(i,e,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ja===null||!ja.has(c))){e=u(o,e),o=Oy(2),c=Na(i,o,2),c!==null&&(ky(o,c,i,e),gr(c,2),as(c));break}}i=i.return}}function Wp(e,i,o){var c=e.pingCache;if(c===null){c=e.pingCache=new t1;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(o)||(Vp=!0,m.add(o),e=s1.bind(null,e,i,o),i.then(e,e))}function s1(e,i,o){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,Pe===e&&(ne&o)===o&&($e===4||$e===3&&(ne&62914560)===ne&&300>Nn()-Zh?(ge&2)===0&&eu(e,0):Bp|=o,Jl===ne&&(Jl=0)),as(e)}function Ov(e,i){i===0&&(i=wl()),e=lr(e,i),e!==null&&(gr(e,i),as(e))}function a1(e){var i=e.memoizedState,o=0;i!==null&&(o=i.retryLane),Ov(e,o)}function o1(e,i){var o=0;switch(e.tag){case 31:case 13:var c=e.stateNode,m=e.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Ov(e,o)}function l1(e,i){return We(e,i)}var Jh=null,iu=null,Kp=!1,td=!1,Yp=!1,Ba=0;function as(e){e!==iu&&e.next===null&&(iu===null?Jh=iu=e:iu=iu.next=e),td=!0,Kp||(Kp=!0,c1())}function fc(e,i){if(!Yp&&td){Yp=!0;do for(var o=!1,c=Jh;c!==null;){if(e!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var S=c.suspendedLanes,P=c.pingedLanes;g=(1<<31-Be(42|e)+1)-1,g&=m&~(S&~P),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,zv(c,g))}else g=ne,g=Yi(c,c===Pe?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||wi(c,g)||(o=!0,zv(c,g));c=c.next}while(o);Yp=!1}}function u1(){kv()}function kv(){td=Kp=!1;var e=0;Ba!==0&&x1()&&(e=Ba);for(var i=Nn(),o=null,c=Jh;c!==null;){var m=c.next,g=Mv(c,i);g===0?(c.next=null,o===null?Jh=m:o.next=m,m===null&&(iu=o)):(o=c,(e!==0||(g&3)!==0)&&(td=!0)),c=m}yn!==0&&yn!==5||fc(e),Ba!==0&&(Ba=0)}function Mv(e,i){for(var o=e.suspendedLanes,c=e.pingedLanes,m=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var S=31-Be(g),P=1<<S,U=m[S];U===-1?((P&o)===0||(P&c)!==0)&&(m[S]=Vu(P,i)):U<=i&&(e.expiredLanes|=P),g&=~P}if(i=Pe,o=ne,o=Yi(e,e===i?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,o===0||e===i&&(xe===2||xe===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Wi(c),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||wi(e,o)){if(i=o&-o,i===e.callbackPriority)return i;switch(c!==null&&Wi(c),Pt(o)){case 2:case 8:o=la;break;case 32:o=mr;break;case 268435456:o=xo;break;default:o=mr}return c=jv.bind(null,e),o=We(o,c),e.callbackPriority=i,e.callbackNode=o,i}return c!==null&&c!==null&&Wi(c),e.callbackPriority=2,e.callbackNode=null,2}function jv(e,i){if(yn!==0&&yn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if($h()&&e.callbackNode!==o)return null;var c=ne;return c=Yi(e,e===Pe?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(yv(e,c,i),Mv(e,Nn()),e.callbackNode!=null&&e.callbackNode===o?jv.bind(null,e):null)}function zv(e,i){if($h())return null;yv(e,i,!0)}function c1(){E1(function(){(ge&6)!==0?We(_s,u1):kv()})}function Qp(){if(Ba===0){var e=Fl;e===0&&(e=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),Ba=e}return Ba}function Vv(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zr(""+e)}function Bv(e,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,e.id&&o.setAttribute("form",e.id),i.parentNode.insertBefore(o,i),e=new FormData(e),o.parentNode.removeChild(o),e}function h1(e,i,o,c,m){if(i==="submit"&&o&&o.stateNode===m){var g=Vv((m[Ke]||null).action),S=c.submitter;S&&(i=(i=S[Ke]||null)?Vv(i.formAction):S.getAttribute("formAction"),i!==null&&(g=i,S=null));var P=new rr("action","action",null,c,m);e.push({event:P,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ba!==0){var U=S?Bv(m,S):new FormData(m);gp(o,{pending:!0,data:U,method:m.method,action:g},null,U)}}else typeof g=="function"&&(P.preventDefault(),U=S?Bv(m,S):new FormData(m),gp(o,{pending:!0,data:U,method:m.method,action:g},g,U))},currentTarget:m}]})}}for(var Xp=0;Xp<ts.length;Xp++){var $p=ts[Xp],d1=$p.toLowerCase(),f1=$p[0].toUpperCase()+$p.slice(1);hi(d1,"on"+f1)}hi(Bo,"onAnimationEnd"),hi(yh,"onAnimationIteration"),hi(Uo,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Uf,"onTransitionRun"),hi(vh,"onTransitionStart"),hi(Ff,"onTransitionCancel"),hi(Aa,"onTransitionEnd"),si("onMouseEnter",["mouseout","mouseover"]),si("onMouseLeave",["mouseout","mouseover"]),si("onPointerEnter",["pointerout","pointerover"]),si("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function Uv(e,i){i=(i&4)!==0;for(var o=0;o<e.length;o++){var c=e[o],m=c.event;c=c.listeners;t:{var g=void 0;if(i)for(var S=c.length-1;0<=S;S--){var P=c[S],U=P.instance,et=P.currentTarget;if(P=P.listener,U!==g&&m.isPropagationStopped())break t;g=P,m.currentTarget=et;try{g(m)}catch(ct){Fo(ct)}m.currentTarget=null,g=U}else for(S=0;S<c.length;S++){if(P=c[S],U=P.instance,et=P.currentTarget,P=P.listener,U!==g&&m.isPropagationStopped())break t;g=P,m.currentTarget=et;try{g(m)}catch(ct){Fo(ct)}m.currentTarget=null,g=U}}}}function Jt(e,i){var o=i[Ai];o===void 0&&(o=i[Ai]=new Set);var c=e+"__bubble";o.has(c)||(Fv(i,e,2,!1),o.add(c))}function Jp(e,i,o){var c=0;i&&(c|=4),Fv(o,e,c,i)}var ed="_reactListening"+Math.random().toString(36).slice(2);function tm(e){if(!e[ed]){e[ed]=!0,So.forEach(function(o){o!=="selectionchange"&&(p1.has(o)||Jp(o,!1,e),Jp(o,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[ed]||(i[ed]=!0,Jp("selectionchange",!1,i))}}function Fv(e,i,o,c){switch(_0(i)){case 2:var m=F1;break;case 8:m=H1;break;default:m=mm}o=m.bind(null,i,o,e),m=void 0,!xr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?e.addEventListener(i,o,{capture:!0,passive:m}):e.addEventListener(i,o,!0):m!==void 0?e.addEventListener(i,o,{passive:m}):e.addEventListener(i,o,!1)}function em(e,i,o,c,m){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var P=c.stateNode.containerInfo;if(P===m)break;if(S===4)for(S=c.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;P!==null;){if(S=Ci(P),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){c=g=S;continue t}P=P.parentNode}}c=c.return}vr(function(){var et=g,ct=zn(o),pt=[];t:{var rt=xh.get(e);if(rt!==void 0){var at=rr,Nt=e;switch(e){case"keypress":if(Kr(o)===0)break t;case"keydown":case"keyup":at=Do;break;case"focusin":Nt="focus",at=ws;break;case"focusout":Nt="blur",at=ws;break;case"beforeblur":case"afterblur":at=ws;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Rl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=E;break;case Bo:case yh:case Uo:at=ga;break;case Aa:at=N;break;case"scroll":case"scrollend":at=Kt;break;case"wheel":at=st;break;case"copy":case"cut":case"paste":at=Xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=wr;break;case"toggle":case"beforetoggle":at=Bt}var jt=(i&4)!==0,Se=!jt&&(e==="scroll"||e==="scrollend"),Q=jt?rt!==null?rt+"Capture":null:rt;jt=[];for(var W=et,tt;W!==null;){var ht=W;if(tt=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||tt===null||Q===null||(ht=Qn(W,Q),ht!=null&&jt.push(mc(W,ht,tt))),Se)break;W=W.return}0<jt.length&&(rt=new at(rt,Nt,null,o,ct),pt.push({event:rt,listeners:jt}))}}if((i&7)===0){t:{if(rt=e==="mouseover"||e==="pointerover",at=e==="mouseout"||e==="pointerout",rt&&o!==ma&&(Nt=o.relatedTarget||o.fromElement)&&(Ci(Nt)||Nt[Si]))break t;if((at||rt)&&(rt=ct.window===ct?ct:(rt=ct.ownerDocument)?rt.defaultView||rt.parentWindow:window,at?(Nt=o.relatedTarget||o.toElement,at=et,Nt=Nt?Ci(Nt):null,Nt!==null&&(Se=h(Nt),jt=Nt.tag,Nt!==Se||jt!==5&&jt!==27&&jt!==6)&&(Nt=null)):(at=null,Nt=et),at!==Nt)){if(jt=Co,ht="onMouseLeave",Q="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(jt=wr,ht="onPointerLeave",Q="onPointerEnter",W="pointer"),Se=at==null?rt:bn(at),tt=Nt==null?rt:bn(Nt),rt=new jt(ht,W+"leave",at,o,ct),rt.target=Se,rt.relatedTarget=tt,ht=null,Ci(ct)===et&&(jt=new jt(Q,W+"enter",Nt,o,ct),jt.target=tt,jt.relatedTarget=Se,ht=jt),Se=ht,at&&Nt)e:{for(jt=m1,Q=at,W=Nt,tt=0,ht=Q;ht;ht=jt(ht))tt++;ht=0;for(var kt=W;kt;kt=jt(kt))ht++;for(;0<tt-ht;)Q=jt(Q),tt--;for(;0<ht-tt;)W=jt(W),ht--;for(;tt--;){if(Q===W||W!==null&&Q===W.alternate){jt=Q;break e}Q=jt(Q),W=jt(W)}jt=null}else jt=null;at!==null&&Hv(pt,rt,at,jt,!1),Nt!==null&&Se!==null&&Hv(pt,Se,Nt,jt,!0)}}t:{if(rt=et?bn(et):window,at=rt.nodeName&&rt.nodeName.toLowerCase(),at==="select"||at==="input"&&rt.type==="file")var pe=Mo;else if(sr(rt))if(fh)pe=Bf;else{pe=Vf;var Dt=Sr}else at=rt.nodeName,!at||at.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?et&&Gr(et.elementType)&&(pe=Mo):pe=Ea;if(pe&&(pe=pe(e,et))){dh(pt,pe,o,ct);break t}Dt&&Dt(e,rt,et),e==="focusout"&&et&&rt.type==="number"&&et.memoizedProps.value!=null&&Ri(rt,"number",rt.value)}switch(Dt=et?bn(et):window,e){case"focusin":(sr(Dt)||Dt.contentEditable==="true")&&($r=Dt,kl=et,Vo=null);break;case"focusout":Vo=kl=$r=null;break;case"mousedown":wa=!0;break;case"contextmenu":case"mouseup":case"dragend":wa=!1,gh(pt,o,ct);break;case"selectionchange":if(Ol)break;case"keydown":case"keyup":gh(pt,o,ct)}var Wt;if(ue)t:{switch(e){case"compositionstart":var ie="onCompositionStart";break t;case"compositionend":ie="onCompositionEnd";break t;case"compositionupdate":ie="onCompositionUpdate";break t}ie=void 0}else va?Ss(e,o)&&(ie="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(ie="onCompositionStart");ie&&(ci&&o.locale!=="ko"&&(va||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&va&&(Wt=Ii()):(li=ct,br="value"in li?li.value:li.textContent,va=!0)),Dt=nd(et,ie),0<Dt.length&&(ie=new Di(ie,e,null,o,ct),pt.push({event:ie,listeners:Dt}),Wt?ie.data=Wt:(Wt=As(o),Wt!==null&&(ie.data=Wt)))),(Wt=ui?ki(e,o):xa(e,o))&&(ie=nd(et,"onBeforeInput"),0<ie.length&&(Dt=new Di("onBeforeInput","beforeinput",null,o,ct),pt.push({event:Dt,listeners:ie}),Dt.data=Wt)),h1(pt,e,et,o,ct)}Uv(pt,i)})}function mc(e,i,o){return{instance:e,listener:i,currentTarget:o}}function nd(e,i){for(var o=i+"Capture",c=[];e!==null;){var m=e,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Qn(e,o),m!=null&&c.unshift(mc(e,m,g)),m=Qn(e,i),m!=null&&c.push(mc(e,m,g))),e.tag===3)return c;e=e.return}return[]}function m1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Hv(e,i,o,c,m){for(var g=i._reactName,S=[];o!==null&&o!==c;){var P=o,U=P.alternate,et=P.stateNode;if(P=P.tag,U!==null&&U===c)break;P!==5&&P!==26&&P!==27||et===null||(U=et,m?(et=Qn(o,g),et!=null&&S.unshift(mc(o,et,U))):m||(et=Qn(o,g),et!=null&&S.push(mc(o,et,U)))),o=o.return}S.length!==0&&e.push({event:i,listeners:S})}var g1=/\r\n?/g,_1=/\u0000|\uFFFD/g;function qv(e){return(typeof e=="string"?e:""+e).replace(g1,`
`).replace(_1,"")}function Gv(e,i){return i=qv(i),qv(e)===i}function we(e,i,o,c,m,g){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||on(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&on(e,""+c);break;case"className":Qt(e,"class",c);break;case"tabIndex":Qt(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Qt(e,o,c);break;case"style":bs(e,c,g);break;case"data":if(i!=="object"){Qt(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){e.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(o);break}c=Zr(""+c),e.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&we(e,i,"name",m.name,m,null),we(e,i,"formEncType",m.formEncType,m,null),we(e,i,"formMethod",m.formMethod,m,null),we(e,i,"formTarget",m.formTarget,m,null)):(we(e,i,"encType",m.encType,m,null),we(e,i,"method",m.method,m,null),we(e,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(o);break}c=Zr(""+c),e.setAttribute(o,c);break;case"onClick":c!=null&&(e.onclick=jn);break;case"onScroll":c!=null&&Jt("scroll",e);break;case"onScrollEnd":c!=null&&Jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}o=Zr(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(o,""+c):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":c===!0?e.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(o,c):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(o,c):e.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(o):e.setAttribute(o,c);break;case"popover":Jt("beforetoggle",e),Jt("toggle",e),Yt(e,"popover",c);break;case"xlinkActuate":Le(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Le(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Le(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Le(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Le(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Le(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Le(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Le(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Le(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Yt(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Es.get(o)||o,Yt(e,o,c))}}function nm(e,i,o,c,m,g){switch(o){case"style":bs(e,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"children":typeof c=="string"?on(e,c):(typeof c=="number"||typeof c=="bigint")&&on(e,""+c);break;case"onScroll":c!=null&&Jt("scroll",e);break;case"onScrollEnd":c!=null&&Jt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ao.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),g=e[Ke]||null,g=g!=null?g[o]:null,typeof g=="function"&&e.removeEventListener(i,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(i,c,m);break t}o in e?e[o]=c:c===!0?e.setAttribute(o,""):Yt(e,o,c)}}}function On(e,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jt("error",e),Jt("load",e);var c=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var S=o[g];if(S!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:we(e,i,g,S,o,null)}}m&&we(e,i,"srcSet",o.srcSet,o,null),c&&we(e,i,"src",o.src,o,null);return;case"input":Jt("invalid",e);var P=g=S=m=null,U=null,et=null;for(c in o)if(o.hasOwnProperty(c)){var ct=o[c];if(ct!=null)switch(c){case"name":m=ct;break;case"type":S=ct;break;case"checked":U=ct;break;case"defaultChecked":et=ct;break;case"value":g=ct;break;case"defaultValue":P=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(s(137,i));break;default:we(e,i,c,ct,o,null)}}xs(e,g,P,U,et,S,m,!1);return;case"select":Jt("invalid",e),c=S=g=null;for(m in o)if(o.hasOwnProperty(m)&&(P=o[m],P!=null))switch(m){case"value":g=P;break;case"defaultValue":S=P;break;case"multiple":c=P;default:we(e,i,m,P,o,null)}i=g,o=S,e.multiple=!!c,i!=null?ve(e,!!c,i,!1):o!=null&&ve(e,!!c,o,!0);return;case"textarea":Jt("invalid",e),g=m=c=null;for(S in o)if(o.hasOwnProperty(S)&&(P=o[S],P!=null))switch(S){case"value":c=P;break;case"defaultValue":m=P;break;case"children":g=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:we(e,i,S,P,o,null)}oi(e,c,m,g);return;case"option":for(U in o)o.hasOwnProperty(U)&&(c=o[U],c!=null)&&(U==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":we(e,i,U,c,o,null));return;case"dialog":Jt("beforetoggle",e),Jt("toggle",e),Jt("cancel",e),Jt("close",e);break;case"iframe":case"object":Jt("load",e);break;case"video":case"audio":for(c=0;c<pc.length;c++)Jt(pc[c],e);break;case"image":Jt("error",e),Jt("load",e);break;case"details":Jt("toggle",e);break;case"embed":case"source":case"link":Jt("error",e),Jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in o)if(o.hasOwnProperty(et)&&(c=o[et],c!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:we(e,i,et,c,o,null)}return;default:if(Gr(i)){for(ct in o)o.hasOwnProperty(ct)&&(c=o[ct],c!==void 0&&nm(e,i,ct,c,o,void 0));return}}for(P in o)o.hasOwnProperty(P)&&(c=o[P],c!=null&&we(e,i,P,c,o,null))}function y1(e,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,S=null,P=null,U=null,et=null,ct=null;for(at in o){var pt=o[at];if(o.hasOwnProperty(at)&&pt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":U=pt;default:c.hasOwnProperty(at)||we(e,i,at,null,c,pt)}}for(var rt in c){var at=c[rt];if(pt=o[rt],c.hasOwnProperty(rt)&&(at!=null||pt!=null))switch(rt){case"type":g=at;break;case"name":m=at;break;case"checked":et=at;break;case"defaultChecked":ct=at;break;case"value":S=at;break;case"defaultValue":P=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(s(137,i));break;default:at!==pt&&we(e,i,rt,at,c,pt)}}fa(e,S,P,U,et,ct,g,m);return;case"select":at=S=P=rt=null;for(g in o)if(U=o[g],o.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":at=U;default:c.hasOwnProperty(g)||we(e,i,g,null,c,U)}for(m in c)if(g=c[m],U=o[m],c.hasOwnProperty(m)&&(g!=null||U!=null))switch(m){case"value":rt=g;break;case"defaultValue":P=g;break;case"multiple":S=g;default:g!==U&&we(e,i,m,g,c,U)}i=P,o=S,c=at,rt!=null?ve(e,!!o,rt,!1):!!c!=!!o&&(i!=null?ve(e,!!o,i,!0):ve(e,!!o,o?[]:"",!1));return;case"textarea":at=rt=null;for(P in o)if(m=o[P],o.hasOwnProperty(P)&&m!=null&&!c.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:we(e,i,P,null,c,m)}for(S in c)if(m=c[S],g=o[S],c.hasOwnProperty(S)&&(m!=null||g!=null))switch(S){case"value":rt=m;break;case"defaultValue":at=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==g&&we(e,i,S,m,c,g)}er(e,rt,at);return;case"option":for(var Nt in o)rt=o[Nt],o.hasOwnProperty(Nt)&&rt!=null&&!c.hasOwnProperty(Nt)&&(Nt==="selected"?e.selected=!1:we(e,i,Nt,null,c,rt));for(U in c)rt=c[U],at=o[U],c.hasOwnProperty(U)&&rt!==at&&(rt!=null||at!=null)&&(U==="selected"?e.selected=rt&&typeof rt!="function"&&typeof rt!="symbol":we(e,i,U,rt,c,at));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in o)rt=o[jt],o.hasOwnProperty(jt)&&rt!=null&&!c.hasOwnProperty(jt)&&we(e,i,jt,null,c,rt);for(et in c)if(rt=c[et],at=o[et],c.hasOwnProperty(et)&&rt!==at&&(rt!=null||at!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(s(137,i));break;default:we(e,i,et,rt,c,at)}return;default:if(Gr(i)){for(var Se in o)rt=o[Se],o.hasOwnProperty(Se)&&rt!==void 0&&!c.hasOwnProperty(Se)&&nm(e,i,Se,void 0,c,rt);for(ct in c)rt=c[ct],at=o[ct],!c.hasOwnProperty(ct)||rt===at||rt===void 0&&at===void 0||nm(e,i,ct,rt,c,at);return}}for(var Q in o)rt=o[Q],o.hasOwnProperty(Q)&&rt!=null&&!c.hasOwnProperty(Q)&&we(e,i,Q,null,c,rt);for(pt in c)rt=c[pt],at=o[pt],!c.hasOwnProperty(pt)||rt===at||rt==null&&at==null||we(e,i,pt,rt,c,at)}function Zv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function v1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],g=m.transferSize,S=m.initiatorType,P=m.duration;if(g&&P&&Zv(S)){for(S=0,P=m.responseEnd,c+=1;c<o.length;c++){var U=o[c],et=U.startTime;if(et>P)break;var ct=U.transferSize,pt=U.initiatorType;ct&&Zv(pt)&&(U=U.responseEnd,S+=ct*(U<P?1:(P-et)/(U-et)))}if(--c,i+=8*(g+S)/(m.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var im=null,rm=null;function id(e){return e.nodeType===9?e:e.ownerDocument}function Wv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function sm(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var am=null;function x1(){var e=window.event;return e&&e.type==="popstate"?e===am?!1:(am=e,!0):(am=null,!1)}var Yv=typeof setTimeout=="function"?setTimeout:void 0,b1=typeof clearTimeout=="function"?clearTimeout:void 0,Qv=typeof Promise=="function"?Promise:void 0,E1=typeof queueMicrotask=="function"?queueMicrotask:typeof Qv<"u"?function(e){return Qv.resolve(null).then(e).catch(T1)}:Yv;function T1(e){setTimeout(function(){throw e})}function Ua(e){return e==="head"}function Xv(e,i){var o=i,c=0;do{var m=o.nextSibling;if(e.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){e.removeChild(m),ou(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")gc(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,gc(o);for(var g=o.firstChild;g;){var S=g.nextSibling,P=g.nodeName;g[Xi]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=S}}else o==="body"&&gc(e.ownerDocument.body);o=m}while(o);ou(i)}function $v(e,i){var o=e;e=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=c}while(o)}function om(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":om(o),ca(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function w1(e,i,o,c){for(;e.nodeType===1;){var m=o;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Xi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=hr(e.nextSibling),e===null)break}return null}function S1(e,i,o){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=hr(e.nextSibling),e===null))return null;return e}function Jv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=hr(e.nextSibling),e===null))return null;return e}function lm(e){return e.data==="$?"||e.data==="$~"}function um(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function A1(e,i){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function hr(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var cm=null;function t0(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(i===0)return hr(e.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}e=e.nextSibling}return null}function e0(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return e;i--}else o!=="/$"&&o!=="/&"||i++}e=e.previousSibling}return null}function n0(e,i,o){switch(i=id(o),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function gc(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ca(e)}var dr=new Map,i0=new Set;function rd(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Us=xt.d;xt.d={f:C1,r:R1,D:I1,C:P1,L:N1,m:D1,X:O1,S:L1,M:k1};function C1(){var e=Us.f(),i=Yh();return e||i}function R1(e){var i=ri(e);i!==null&&i.tag===5&&i.type==="form"?xy(i):Us.r(e)}var ru=typeof document>"u"?null:document;function r0(e,i,o){var c=ru;if(c&&typeof i=="string"&&i){var m=Re(i);m='link[rel="'+e+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),i0.has(m)||(i0.add(m),e={rel:e,crossOrigin:o,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),On(i,"link",e),Ye(i),c.head.appendChild(i)))}}function I1(e){Us.D(e),r0("dns-prefetch",e,null)}function P1(e,i){Us.C(e,i),r0("preconnect",e,i)}function N1(e,i,o){Us.L(e,i,o);var c=ru;if(c&&e&&i){var m='link[rel="preload"][as="'+Re(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Re(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Re(o.imageSizes)+'"]')):m+='[href="'+Re(e)+'"]';var g=m;switch(i){case"style":g=su(e);break;case"script":g=au(e)}dr.has(g)||(e=C({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:e,as:i},o),dr.set(g,e),c.querySelector(m)!==null||i==="style"&&c.querySelector(_c(g))||i==="script"&&c.querySelector(yc(g))||(i=c.createElement("link"),On(i,"link",e),Ye(i),c.head.appendChild(i)))}}function D1(e,i){Us.m(e,i);var o=ru;if(o&&e){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Re(c)+'"][href="'+Re(e)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=au(e)}if(!dr.has(g)&&(e=C({rel:"modulepreload",href:e},i),dr.set(g,e),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yc(g)))return}c=o.createElement("link"),On(c,"link",e),Ye(c),o.head.appendChild(c)}}}function L1(e,i,o){Us.S(e,i,o);var c=ru;if(c&&e){var m=$i(c).hoistableStyles,g=su(e);i=i||"default";var S=m.get(g);if(!S){var P={loading:0,preload:null};if(S=c.querySelector(_c(g)))P.loading=5;else{e=C({rel:"stylesheet",href:e,"data-precedence":i},o),(o=dr.get(g))&&hm(e,o);var U=S=c.createElement("link");Ye(U),On(U,"link",e),U._p=new Promise(function(et,ct){U.onload=et,U.onerror=ct}),U.addEventListener("load",function(){P.loading|=1}),U.addEventListener("error",function(){P.loading|=2}),P.loading|=4,sd(S,i,c)}S={type:"stylesheet",instance:S,count:1,state:P},m.set(g,S)}}}function O1(e,i){Us.X(e,i);var o=ru;if(o&&e){var c=$i(o).hoistableScripts,m=au(e),g=c.get(m);g||(g=o.querySelector(yc(m)),g||(e=C({src:e,async:!0},i),(i=dr.get(m))&&dm(e,i),g=o.createElement("script"),Ye(g),On(g,"link",e),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function k1(e,i){Us.M(e,i);var o=ru;if(o&&e){var c=$i(o).hoistableScripts,m=au(e),g=c.get(m);g||(g=o.querySelector(yc(m)),g||(e=C({src:e,async:!0,type:"module"},i),(i=dr.get(m))&&dm(e,i),g=o.createElement("script"),Ye(g),On(g,"link",e),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function s0(e,i,o,c){var m=(m=wt.current)?rd(m):null;if(!m)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=su(o.href),o=$i(m).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=su(o.href);var g=$i(m).hoistableStyles,S=g.get(e);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,S),(g=m.querySelector(_c(e)))&&!g._p&&(S.instance=g,S.state.loading=5),dr.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},dr.set(e,o),g||M1(m,e,o,S.state))),i&&c===null)throw Error(s(528,""));return S}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=au(o),o=$i(m).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function su(e){return'href="'+Re(e)+'"'}function _c(e){return'link[rel="stylesheet"]['+e+"]"}function a0(e){return C({},e,{"data-precedence":e.precedence,precedence:null})}function M1(e,i,o,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),On(i,"link",o),Ye(i),e.head.appendChild(i))}function au(e){return'[src="'+Re(e)+'"]'}function yc(e){return"script[async]"+e}function o0(e,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+Re(o.href)+'"]');if(c)return i.instance=c,Ye(c),c;var m=C({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Ye(c),On(c,"style",m),sd(c,o.precedence,e),i.instance=c;case"stylesheet":m=su(o.href);var g=e.querySelector(_c(m));if(g)return i.state.loading|=4,i.instance=g,Ye(g),g;c=a0(o),(m=dr.get(m))&&hm(c,m),g=(e.ownerDocument||e).createElement("link"),Ye(g);var S=g;return S._p=new Promise(function(P,U){S.onload=P,S.onerror=U}),On(g,"link",c),i.state.loading|=4,sd(g,o.precedence,e),i.instance=g;case"script":return g=au(o.src),(m=e.querySelector(yc(g)))?(i.instance=m,Ye(m),m):(c=o,(m=dr.get(g))&&(c=C({},o),dm(c,m)),e=e.ownerDocument||e,m=e.createElement("script"),Ye(m),On(m,"link",c),e.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,sd(c,o.precedence,e));return i.instance}function sd(e,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,S=0;S<c.length;S++){var P=c[S];if(P.dataset.precedence===i)g=P;else if(g!==m)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(e,i.firstChild))}function hm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function dm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var ad=null;function l0(e,i,o){if(ad===null){var c=new Map,m=ad=new Map;m.set(o,c)}else m=ad,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(e))return c;for(c.set(e,null),o=o.getElementsByTagName(e),m=0;m<o.length;m++){var g=o[m];if(!(g[Xi]||g[Fe]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(i)||"";S=e+S;var P=c.get(S);P?P.push(g):c.set(S,[g])}}return c}function u0(e,i,o){e=e.ownerDocument||e,e.head.insertBefore(o,i==="title"?e.querySelector("head > title"):null)}function j1(e,i,o){if(o===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function c0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function z1(e,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=su(c.href),g=i.querySelector(_c(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=od.bind(e),i.then(e,e)),o.state.loading|=4,o.instance=g,Ye(g);return}g=i.ownerDocument||i,c=a0(c),(m=dr.get(m))&&hm(c,m),g=g.createElement("link"),Ye(g);var S=g;S._p=new Promise(function(P,U){S.onload=P,S.onerror=U}),On(g,"link",c),o.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=od.bind(e),i.addEventListener("load",o),i.addEventListener("error",o))}}var fm=0;function V1(e,i){return e.stylesheets&&e.count===0&&ud(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var c=setTimeout(function(){if(e.stylesheets&&ud(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&fm===0&&(fm=62500*v1());var m=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ud(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>fm?50:800)+i);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function od(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ud(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ld=null;function ud(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ld=new Map,i.forEach(B1,e),ld=null,od.call(e))}function B1(e,i){if(!(i.state.loading&4)){var o=ld.get(e);if(o)var c=o.get(null);else{o=new Map,ld.set(e,o);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var S=m[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),c=S)}c&&o.set(null,c)}m=i.instance,S=m.getAttribute("data-precedence"),g=o.get(S)||c,g===c&&o.set(null,m),o.set(S,m),this.count++,c=od.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),i.state.loading|=4}}var vc={$$typeof:nt,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function U1(e,i,o,c,m,g,S,P,U){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function h0(e,i,o,c,m,g,S,P,U,et,ct,pt){return e=new U1(e,i,o,S,U,et,ct,pt,P),i=1,g===!0&&(i|=24),g=Fn(3,null,null,i),e.current=g,g.stateNode=e,i=Zf(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:i},Qf(g),e}function d0(e){return e?(e=Cs,e):Cs}function f0(e,i,o,c,m,g){m=d0(m),c.context===null?c.context=m:c.pendingContext=m,c=Pa(i),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Na(e,c,i),o!==null&&(yi(o,e,i),Xu(o,e,i))}function p0(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<i?o:i}}function pm(e,i){p0(e,i),(e=e.alternate)&&p0(e,i)}function m0(e){if(e.tag===13||e.tag===31){var i=lr(e,67108864);i!==null&&yi(i,e,67108864),pm(e,67108864)}}function g0(e){if(e.tag===13||e.tag===31){var i=Bi();i=xn(i);var o=lr(e,i);o!==null&&yi(o,e,i),pm(e,i)}}var cd=!0;function F1(e,i,o,c){var m=ot.T;ot.T=null;var g=xt.p;try{xt.p=2,mm(e,i,o,c)}finally{xt.p=g,ot.T=m}}function H1(e,i,o,c){var m=ot.T;ot.T=null;var g=xt.p;try{xt.p=8,mm(e,i,o,c)}finally{xt.p=g,ot.T=m}}function mm(e,i,o,c){if(cd){var m=gm(c);if(m===null)em(e,i,c,hd,o),y0(e,c);else if(G1(m,e,i,o,c))c.stopPropagation();else if(y0(e,c),i&4&&-1<q1.indexOf(e)){for(;m!==null;){var g=ri(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=Ki(g.pendingLanes);if(S!==0){var P=g;for(P.pendingLanes|=2,P.entangledLanes|=2;S;){var U=1<<31-Be(S);P.entanglements[1]|=U,S&=~U}as(g),(ge&6)===0&&(Wh=Nn()+500,fc(0))}}break;case 31:case 13:P=lr(g,2),P!==null&&yi(P,g,2),Yh(),pm(g,2)}if(g=gm(c),g===null&&em(e,i,c,hd,o),g===m)break;m=g}m!==null&&c.stopPropagation()}else em(e,i,c,null,o)}}function gm(e){return e=zn(e),_m(e)}var hd=null;function _m(e){if(hd=null,e=Ci(e),e!==null){var i=h(e);if(i===null)e=null;else{var o=i.tag;if(o===13){if(e=d(i),e!==null)return e;e=null}else if(o===31){if(e=y(i),e!==null)return e;e=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return hd=e,null}function _0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gs()){case _s:return 2;case la:return 8;case mr:case zu:return 32;case xo:return 268435456;default:return 32}default:return 32}}var ym=!1,Fa=null,Ha=null,qa=null,xc=new Map,bc=new Map,Ga=[],q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y0(e,i){switch(e){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":xc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(i.pointerId)}}function Ec(e,i,o,c,m,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},i!==null&&(i=ri(i),i!==null&&m0(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),e)}function G1(e,i,o,c,m){switch(i){case"focusin":return Fa=Ec(Fa,e,i,o,c,m),!0;case"dragenter":return Ha=Ec(Ha,e,i,o,c,m),!0;case"mouseover":return qa=Ec(qa,e,i,o,c,m),!0;case"pointerover":var g=m.pointerId;return xc.set(g,Ec(xc.get(g)||null,e,i,o,c,m)),!0;case"gotpointercapture":return g=m.pointerId,bc.set(g,Ec(bc.get(g)||null,e,i,o,c,m)),!0}return!1}function v0(e){var i=Ci(e.target);if(i!==null){var o=h(i);if(o!==null){if(i=o.tag,i===13){if(i=d(o),i!==null){e.blockedOn=i,ni(e.priority,function(){g0(o)});return}}else if(i===31){if(i=y(o),i!==null){e.blockedOn=i,ni(e.priority,function(){g0(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dd(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var o=gm(e.nativeEvent);if(o===null){o=e.nativeEvent;var c=new o.constructor(o.type,o);ma=c,o.target.dispatchEvent(c),ma=null}else return i=ri(o),i!==null&&m0(i),e.blockedOn=o,!1;i.shift()}return!0}function x0(e,i,o){dd(e)&&o.delete(i)}function Z1(){ym=!1,Fa!==null&&dd(Fa)&&(Fa=null),Ha!==null&&dd(Ha)&&(Ha=null),qa!==null&&dd(qa)&&(qa=null),xc.forEach(x0),bc.forEach(x0)}function fd(e,i){e.blockedOn===i&&(e.blockedOn=null,ym||(ym=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Z1)))}var pd=null;function b0(e){pd!==e&&(pd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){pd===e&&(pd=null);for(var i=0;i<e.length;i+=3){var o=e[i],c=e[i+1],m=e[i+2];if(typeof c!="function"){if(_m(c||o)===null)continue;break}var g=ri(o);g!==null&&(e.splice(i,3),i-=3,gp(g,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function ou(e){function i(U){return fd(U,e)}Fa!==null&&fd(Fa,e),Ha!==null&&fd(Ha,e),qa!==null&&fd(qa,e),xc.forEach(i),bc.forEach(i);for(var o=0;o<Ga.length;o++){var c=Ga[o];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Ga.length&&(o=Ga[0],o.blockedOn===null);)v0(o),o.blockedOn===null&&Ga.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],g=o[c+1],S=m[Ke]||null;if(typeof g=="function")S||b0(o);else if(S){var P=null;if(g&&g.hasAttribute("formAction")){if(m=g,S=g[Ke]||null)P=S.formAction;else if(_m(m)!==null)continue}else P=S.action;typeof P=="function"?o[c+1]=P:(o.splice(c,3),c-=3),b0(o)}}}function E0(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return m=S})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function vm(e){this._internalRoot=e}md.prototype.render=vm.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=Bi();f0(o,c,e,i,null,null)},md.prototype.unmount=vm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;f0(e.current,2,null,e,null,null),Yh(),i[Si]=null}};function md(e){this._internalRoot=e}md.prototype.unstable_scheduleHydration=function(e){if(e){var i=wo();e={blockedOn:null,target:e,priority:i};for(var o=0;o<Ga.length&&i!==0&&i<Ga[o].priority;o++);Ga.splice(o,0,e),o===0&&v0(e)}};var T0=t.version;if(T0!=="19.2.3")throw Error(s(527,T0,"19.2.3"));xt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(i),e=e!==null?w(e):null,e=e===null?null:e.stateNode,e};var W1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ot,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{ei=gd.inject(W1),tn=gd}catch{}}return wc.createRoot=function(e,i){if(!l(e))throw Error(s(299));var o=!1,c="",m=Py,g=Ny,S=Dy;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=h0(e,1,!1,null,null,o,c,null,m,g,S,E0),e[Si]=i.current,tm(e),new vm(i)},wc.hydrateRoot=function(e,i,o){if(!l(e))throw Error(s(299));var c=!1,m="",g=Py,S=Ny,P=Dy,U=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),i=h0(e,1,!0,i,o??null,c,m,U,g,S,P,E0),i.context=d0(null),o=i.current,c=Bi(),c=xn(c),m=Pa(c),m.callback=null,Na(o,m,c),o=c,i.current.lanes=o,gr(i,o),as(i),e[Si]=i.current,tm(e),new md(i)},wc.version="19.2.3",wc}var L0;function nS(){if(L0)return Em.exports;L0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Em.exports=eS(),Em.exports}var iS=nS();const rS=xg(iS);var O0="popstate";function sS(r={}){function t(l,h){let{pathname:d="/",search:y="",hash:v=""}=pl(l.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),qm("",{pathname:d,search:y,hash:v},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function n(l,h){let d=l.document.querySelector("base"),y="";if(d&&d.getAttribute("href")){let v=l.location.href,b=v.indexOf("#");y=b===-1?v:v.slice(0,b)}return y+"#"+(typeof h=="string"?h:Vc(h))}function s(l,h){Hi(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(h)})`)}return oS(t,n,s,r)}function Ve(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Hi(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aS(){return Math.random().toString(36).substring(2,10)}function k0(r,t){return{usr:r.state,key:r.key,idx:t}}function qm(r,t,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?pl(t):t,state:n,key:t&&t.key||s||aS()}}function Vc({pathname:r="/",search:t="",hash:n=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function pl(r){let t={};if(r){let n=r.indexOf("#");n>=0&&(t.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(t.search=r.substring(s),r=r.substring(0,s)),r&&(t.pathname=r)}return t}function oS(r,t,n,s={}){let{window:l=document.defaultView,v5Compat:h=!1}=s,d=l.history,y="POP",v=null,b=w();b==null&&(b=0,d.replaceState({...d.state,idx:b},""));function w(){return(d.state||{idx:null}).idx}function C(){y="POP";let V=w(),$=V==null?null:V-b;b=V,v&&v({action:y,location:G.location,delta:$})}function I(V,$){y="PUSH";let q=qm(G.location,V,$);n&&n(q,V),b=w()+1;let nt=k0(q,b),lt=G.createHref(q);try{d.pushState(nt,"",lt)}catch(bt){if(bt instanceof DOMException&&bt.name==="DataCloneError")throw bt;l.location.assign(lt)}h&&v&&v({action:y,location:G.location,delta:1})}function O(V,$){y="REPLACE";let q=qm(G.location,V,$);n&&n(q,V),b=w();let nt=k0(q,b),lt=G.createHref(q);d.replaceState(nt,"",lt),h&&v&&v({action:y,location:G.location,delta:0})}function Z(V){return lS(V)}let G={get action(){return y},get location(){return r(l,d)},listen(V){if(v)throw new Error("A history only accepts one active listener");return l.addEventListener(O0,C),v=V,()=>{l.removeEventListener(O0,C),v=null}},createHref(V){return t(l,V)},createURL:Z,encodeLocation(V){let $=Z(V);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:I,replace:O,go(V){return d.go(V)}};return G}function lS(r,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ve(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Vc(r);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Rb(r,t,n="/"){return uS(r,t,n,!1)}function uS(r,t,n,s){let l=typeof t=="string"?pl(t):t,h=Ys(l.pathname||"/",n);if(h==null)return null;let d=Ib(r);cS(d);let y=null;for(let v=0;y==null&&v<d.length;++v){let b=bS(h);y=vS(d[v],b,s)}return y}function Ib(r,t=[],n=[],s="",l=!1){let h=(d,y,v=l,b)=>{let w={relativePath:b===void 0?d.path||"":b,caseSensitive:d.caseSensitive===!0,childrenIndex:y,route:d};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(s)&&v)return;Ve(w.relativePath.startsWith(s),`Absolute route path "${w.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(s.length)}let C=Gs([s,w.relativePath]),I=n.concat(w);d.children&&d.children.length>0&&(Ve(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),Ib(d.children,t,I,C,v)),!(d.path==null&&!d.index)&&t.push({path:C,score:_S(C,d.index),routesMeta:I})};return r.forEach((d,y)=>{if(d.path===""||!d.path?.includes("?"))h(d,y);else for(let v of Pb(d.path))h(d,y,!0,v)}),t}function Pb(r){let t=r.split("/");if(t.length===0)return[];let[n,...s]=t,l=n.endsWith("?"),h=n.replace(/\?$/,"");if(s.length===0)return l?[h,""]:[h];let d=Pb(s.join("/")),y=[];return y.push(...d.map(v=>v===""?h:[h,v].join("/"))),l&&y.push(...d),y.map(v=>r.startsWith("/")&&v===""?"/":v)}function cS(r){r.sort((t,n)=>t.score!==n.score?n.score-t.score:yS(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var hS=/^:[\w-]+$/,dS=3,fS=2,pS=1,mS=10,gS=-2,M0=r=>r==="*";function _S(r,t){let n=r.split("/"),s=n.length;return n.some(M0)&&(s+=gS),t&&(s+=fS),n.filter(l=>!M0(l)).reduce((l,h)=>l+(hS.test(h)?dS:h===""?pS:mS),s)}function yS(r,t){return r.length===t.length&&r.slice(0,-1).every((s,l)=>s===t[l])?r[r.length-1]-t[t.length-1]:0}function vS(r,t,n=!1){let{routesMeta:s}=r,l={},h="/",d=[];for(let y=0;y<s.length;++y){let v=s[y],b=y===s.length-1,w=h==="/"?t:t.slice(h.length)||"/",C=zd({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},w),I=v.route;if(!C&&b&&n&&!s[s.length-1].route.index&&(C=zd({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},w)),!C)return null;Object.assign(l,C.params),d.push({params:l,pathname:Gs([h,C.pathname]),pathnameBase:SS(Gs([h,C.pathnameBase])),route:I}),C.pathnameBase!=="/"&&(h=Gs([h,C.pathnameBase]))}return d}function zd(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=xS(r.path,r.caseSensitive,r.end),l=t.match(n);if(!l)return null;let h=l[0],d=h.replace(/(.)\/+$/,"$1"),y=l.slice(1);return{params:s.reduce((b,{paramName:w,isOptional:C},I)=>{if(w==="*"){let Z=y[I]||"";d=h.slice(0,h.length-Z.length).replace(/(.)\/+$/,"$1")}const O=y[I];return C&&!O?b[w]=void 0:b[w]=(O||"").replace(/%2F/g,"/"),b},{}),pathname:h,pathnameBase:d,pattern:r}}function xS(r,t=!1,n=!0){Hi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,y,v)=>(s.push({paramName:y,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function bS(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function Ys(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}var Nb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ES=r=>Nb.test(r);function TS(r,t="/"){let{pathname:n,search:s="",hash:l=""}=typeof r=="string"?pl(r):r,h;if(n)if(ES(n))h=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),Hi(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?h=j0(n.substring(1),"/"):h=j0(n,t)}else h=t;return{pathname:h,search:AS(s),hash:CS(l)}}function j0(r,t){let n=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Am(r,t,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wS(r){return r.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Eg(r){let t=wS(r);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function Tg(r,t,n,s=!1){let l;typeof r=="string"?l=pl(r):(l={...r},Ve(!l.pathname||!l.pathname.includes("?"),Am("?","pathname","search",l)),Ve(!l.pathname||!l.pathname.includes("#"),Am("#","pathname","hash",l)),Ve(!l.search||!l.search.includes("#"),Am("#","search","hash",l)));let h=r===""||l.pathname==="",d=h?"/":l.pathname,y;if(d==null)y=n;else{let C=t.length-1;if(!s&&d.startsWith("..")){let I=d.split("/");for(;I[0]==="..";)I.shift(),C-=1;l.pathname=I.join("/")}y=C>=0?t[C]:"/"}let v=TS(l,y),b=d&&d!=="/"&&d.endsWith("/"),w=(h||d===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(b||w)&&(v.pathname+="/"),v}var Gs=r=>r.join("/").replace(/\/\/+/g,"/"),SS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),AS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,CS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,RS=class{constructor(r,t,n,s=!1){this.status=r,this.statusText=t||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function IS(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function PS(r){return r.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Db=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Lb(r,t){let n=r;if(typeof n!="string"||!Nb.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,l=!1;if(Db)try{let h=new URL(window.location.href),d=n.startsWith("//")?new URL(h.protocol+n):new URL(n),y=Ys(d.pathname,t);d.origin===h.origin&&y!=null?n=y+d.search+d.hash:l=!0}catch{Hi(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ob=["POST","PUT","PATCH","DELETE"];new Set(Ob);var NS=["GET",...Ob];new Set(NS);var Cu=M.createContext(null);Cu.displayName="DataRouter";var sf=M.createContext(null);sf.displayName="DataRouterState";var DS=M.createContext(!1),kb=M.createContext({isTransitioning:!1});kb.displayName="ViewTransition";var LS=M.createContext(new Map);LS.displayName="Fetchers";var OS=M.createContext(null);OS.displayName="Await";var qi=M.createContext(null);qi.displayName="Navigation";var Yc=M.createContext(null);Yc.displayName="Location";var jr=M.createContext({outlet:null,matches:[],isDataRoute:!1});jr.displayName="Route";var wg=M.createContext(null);wg.displayName="RouteError";var Mb="REACT_ROUTER_ERROR",kS="REDIRECT",MS="ROUTE_ERROR_RESPONSE";function jS(r){if(r.startsWith(`${Mb}:${kS}:{`))try{let t=JSON.parse(r.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function zS(r){if(r.startsWith(`${Mb}:${MS}:{`))try{let t=JSON.parse(r.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new RS(t.status,t.statusText,t.data)}catch{}}function VS(r,{relative:t}={}){Ve(Ru(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=M.useContext(qi),{hash:l,pathname:h,search:d}=Qc(r,{relative:t}),y=h;return n!=="/"&&(y=h==="/"?n:Gs([n,h])),s.createHref({pathname:y,search:d,hash:l})}function Ru(){return M.useContext(Yc)!=null}function Ei(){return Ve(Ru(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Yc).location}var jb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zb(r){M.useContext(qi).static||M.useLayoutEffect(r)}function an(){let{isDataRoute:r}=M.useContext(jr);return r?$S():BS()}function BS(){Ve(Ru(),"useNavigate() may be used only in the context of a <Router> component.");let r=M.useContext(Cu),{basename:t,navigator:n}=M.useContext(qi),{matches:s}=M.useContext(jr),{pathname:l}=Ei(),h=JSON.stringify(Eg(s)),d=M.useRef(!1);return zb(()=>{d.current=!0}),M.useCallback((v,b={})=>{if(Hi(d.current,jb),!d.current)return;if(typeof v=="number"){n.go(v);return}let w=Tg(v,JSON.parse(h),l,b.relative==="path");r==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:Gs([t,w.pathname])),(b.replace?n.replace:n.push)(w,b.state,b)},[t,n,h,l,r])}M.createContext(null);function Sg(){let{matches:r}=M.useContext(jr),t=r[r.length-1];return t?t.params:{}}function Qc(r,{relative:t}={}){let{matches:n}=M.useContext(jr),{pathname:s}=Ei(),l=JSON.stringify(Eg(n));return M.useMemo(()=>Tg(r,JSON.parse(l),s,t==="path"),[r,l,s,t])}function US(r,t){return Vb(r,t)}function Vb(r,t,n,s,l){Ve(Ru(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=M.useContext(qi),{matches:d}=M.useContext(jr),y=d[d.length-1],v=y?y.params:{},b=y?y.pathname:"/",w=y?y.pathnameBase:"/",C=y&&y.route;{let q=C&&C.path||"";Ub(b,!C||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let I=Ei(),O;if(t){let q=typeof t=="string"?pl(t):t;Ve(w==="/"||q.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${q.pathname}" was given in the \`location\` prop.`),O=q}else O=I;let Z=O.pathname||"/",G=Z;if(w!=="/"){let q=w.replace(/^\//,"").split("/");G="/"+Z.replace(/^\//,"").split("/").slice(q.length).join("/")}let V=Rb(r,{pathname:G});Hi(C||V!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Hi(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=ZS(V&&V.map(q=>Object.assign({},q,{params:Object.assign({},v,q.params),pathname:Gs([w,h.encodeLocation?h.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?w:Gs([w,h.encodeLocation?h.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),d,n,s,l);return t&&$?M.createElement(Yc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},$):$}function FS(){let r=XS(),t=IS(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:h},"ErrorBoundary")," or"," ",M.createElement("code",{style:h},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:l},n):null,d)}var HS=M.createElement(FS,null),Bb=class extends M.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.onError?this.props.onError(r,t):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const n=zS(r.digest);n&&(r=n)}let t=r!==void 0?M.createElement(jr.Provider,{value:this.props.routeContext},M.createElement(wg.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?M.createElement(qS,{error:r},t):t}};Bb.contextType=DS;var Cm=new WeakMap;function qS({children:r,error:t}){let{basename:n}=M.useContext(qi);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=jS(t.digest);if(s){let l=Cm.get(t);if(l)throw l;let h=Lb(s.location,n);if(Db&&!Cm.get(t))if(h.isExternal||s.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:s.replace}));throw Cm.set(t,d),d}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return r}function GS({routeContext:r,match:t,children:n}){let s=M.useContext(Cu);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(jr.Provider,{value:r},n)}function ZS(r,t=[],n=null,s=null,l=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let h=r,d=n?.errors;if(d!=null){let w=h.findIndex(C=>C.route.id&&d?.[C.route.id]!==void 0);Ve(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),h=h.slice(0,Math.min(h.length,w+1))}let y=!1,v=-1;if(n)for(let w=0;w<h.length;w++){let C=h[w];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(v=w),C.route.id){let{loaderData:I,errors:O}=n,Z=C.route.loader&&!I.hasOwnProperty(C.route.id)&&(!O||O[C.route.id]===void 0);if(C.route.lazy||Z){y=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}let b=n&&s?(w,C)=>{s(w,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:PS(n.matches),errorInfo:C})}:void 0;return h.reduceRight((w,C,I)=>{let O,Z=!1,G=null,V=null;n&&(O=d&&C.route.id?d[C.route.id]:void 0,G=C.route.errorElement||HS,y&&(v<0&&I===0?(Ub("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Z=!0,V=null):v===I&&(Z=!0,V=C.route.hydrateFallbackElement||null)));let $=t.concat(h.slice(0,I+1)),q=()=>{let nt;return O?nt=G:Z?nt=V:C.route.Component?nt=M.createElement(C.route.Component,null):C.route.element?nt=C.route.element:nt=w,M.createElement(GS,{match:C,routeContext:{outlet:w,matches:$,isDataRoute:n!=null},children:nt})};return n&&(C.route.ErrorBoundary||C.route.errorElement||I===0)?M.createElement(Bb,{location:n.location,revalidation:n.revalidation,component:G,error:O,children:q(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:b}):q()},null)}function Ag(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WS(r){let t=M.useContext(Cu);return Ve(t,Ag(r)),t}function KS(r){let t=M.useContext(sf);return Ve(t,Ag(r)),t}function YS(r){let t=M.useContext(jr);return Ve(t,Ag(r)),t}function Cg(r){let t=YS(r),n=t.matches[t.matches.length-1];return Ve(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function QS(){return Cg("useRouteId")}function XS(){let r=M.useContext(wg),t=KS("useRouteError"),n=Cg("useRouteError");return r!==void 0?r:t.errors?.[n]}function $S(){let{router:r}=WS("useNavigate"),t=Cg("useNavigate"),n=M.useRef(!1);return zb(()=>{n.current=!0}),M.useCallback(async(l,h={})=>{Hi(n.current,jb),n.current&&(typeof l=="number"?await r.navigate(l):await r.navigate(l,{fromRouteId:t,...h}))},[r,t])}var z0={};function Ub(r,t,n){!t&&!z0[r]&&(z0[r]=!0,Hi(!1,n))}M.memo(JS);function JS({routes:r,future:t,state:n,onError:s}){return Vb(r,void 0,n,s,t)}function tA({to:r,replace:t,state:n,relative:s}){Ve(Ru(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=M.useContext(qi);Hi(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=M.useContext(jr),{pathname:d}=Ei(),y=an(),v=Tg(r,Eg(h),d,s==="path"),b=JSON.stringify(v);return M.useEffect(()=>{y(JSON.parse(b),{replace:t,state:n,relative:s})},[y,b,s,t,n]),null}function rn(r){Ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eA({basename:r="/",children:t=null,location:n,navigationType:s="POP",navigator:l,static:h=!1,unstable_useTransitions:d}){Ve(!Ru(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=r.replace(/^\/*/,"/"),v=M.useMemo(()=>({basename:y,navigator:l,static:h,unstable_useTransitions:d,future:{}}),[y,l,h,d]);typeof n=="string"&&(n=pl(n));let{pathname:b="/",search:w="",hash:C="",state:I=null,key:O="default"}=n,Z=M.useMemo(()=>{let G=Ys(b,y);return G==null?null:{location:{pathname:G,search:w,hash:C,state:I,key:O},navigationType:s}},[y,b,w,C,I,O,s]);return Hi(Z!=null,`<Router basename="${y}"> is not able to match the URL "${b}${w}${C}" because it does not start with the basename, so the <Router> won't render anything.`),Z==null?null:M.createElement(qi.Provider,{value:v},M.createElement(Yc.Provider,{children:t,value:Z}))}function nA({children:r,location:t}){return US(Gm(r),t)}function Gm(r,t=[]){let n=[];return M.Children.forEach(r,(s,l)=>{if(!M.isValidElement(s))return;let h=[...t,l];if(s.type===M.Fragment){n.push.apply(n,Gm(s.props.children,h));return}Ve(s.type===rn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ve(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Gm(s.props.children,h)),n.push(d)}),n}var Ad="get",Cd="application/x-www-form-urlencoded";function af(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function iA(r){return af(r)&&r.tagName.toLowerCase()==="button"}function rA(r){return af(r)&&r.tagName.toLowerCase()==="form"}function sA(r){return af(r)&&r.tagName.toLowerCase()==="input"}function aA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function oA(r,t){return r.button===0&&(!t||t==="_self")&&!aA(r)}var _d=null;function lA(){if(_d===null)try{new FormData(document.createElement("form"),0),_d=!1}catch{_d=!0}return _d}var uA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rm(r){return r!=null&&!uA.has(r)?(Hi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cd}"`),null):r}function cA(r,t){let n,s,l,h,d;if(rA(r)){let y=r.getAttribute("action");s=y?Ys(y,t):null,n=r.getAttribute("method")||Ad,l=Rm(r.getAttribute("enctype"))||Cd,h=new FormData(r)}else if(iA(r)||sA(r)&&(r.type==="submit"||r.type==="image")){let y=r.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=r.getAttribute("formaction")||y.getAttribute("action");if(s=v?Ys(v,t):null,n=r.getAttribute("formmethod")||y.getAttribute("method")||Ad,l=Rm(r.getAttribute("formenctype"))||Rm(y.getAttribute("enctype"))||Cd,h=new FormData(y,r),!lA()){let{name:b,type:w,value:C}=r;if(w==="image"){let I=b?`${b}.`:"";h.append(`${I}x`,"0"),h.append(`${I}y`,"0")}else b&&h.append(b,C)}}else{if(af(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ad,s=null,l=Cd,d=r}return h&&l==="text/plain"&&(d=h,h=void 0),{action:s,method:n.toLowerCase(),encType:l,formData:h,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rg(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function hA(r,t,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&Ys(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function dA(r,t){if(r.id in t)return t[r.id];try{let n=await import(r.module);return t[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fA(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function pA(r,t,n){let s=await Promise.all(r.map(async l=>{let h=t.routes[l.route.id];if(h){let d=await dA(h,n);return d.links?d.links():[]}return[]}));return yA(s.flat(1).filter(fA).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function V0(r,t,n,s,l,h){let d=(v,b)=>n[b]?v.route.id!==n[b].route.id:!0,y=(v,b)=>n[b].pathname!==v.pathname||n[b].route.path?.endsWith("*")&&n[b].params["*"]!==v.params["*"];return h==="assets"?t.filter((v,b)=>d(v,b)||y(v,b)):h==="data"?t.filter((v,b)=>{let w=s.routes[v.route.id];if(!w||!w.hasLoader)return!1;if(d(v,b)||y(v,b))return!0;if(v.route.shouldRevalidate){let C=v.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function mA(r,t,{includeHydrateFallback:n}={}){return gA(r.map(s=>{let l=t.routes[s.route.id];if(!l)return[];let h=[l.module];return l.clientActionModule&&(h=h.concat(l.clientActionModule)),l.clientLoaderModule&&(h=h.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(h=h.concat(l.hydrateFallbackModule)),l.imports&&(h=h.concat(l.imports)),h}).flat(1))}function gA(r){return[...new Set(r)]}function _A(r){let t={},n=Object.keys(r).sort();for(let s of n)t[s]=r[s];return t}function yA(r,t){let n=new Set;return new Set(t),r.reduce((s,l)=>{let h=JSON.stringify(_A(l));return n.has(h)||(n.add(h),s.push({key:h,link:l})),s},[])}function Fb(){let r=M.useContext(Cu);return Rg(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function vA(){let r=M.useContext(sf);return Rg(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Ig=M.createContext(void 0);Ig.displayName="FrameworkContext";function Hb(){let r=M.useContext(Ig);return Rg(r,"You must render this element inside a <HydratedRouter> element"),r}function xA(r,t){let n=M.useContext(Ig),[s,l]=M.useState(!1),[h,d]=M.useState(!1),{onFocus:y,onBlur:v,onMouseEnter:b,onMouseLeave:w,onTouchStart:C}=t,I=M.useRef(null);M.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let G=$=>{$.forEach(q=>{d(q.isIntersecting)})},V=new IntersectionObserver(G,{threshold:.5});return I.current&&V.observe(I.current),()=>{V.disconnect()}}},[r]),M.useEffect(()=>{if(s){let G=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(G)}}},[s]);let O=()=>{l(!0)},Z=()=>{l(!1),d(!1)};return n?r!=="intent"?[h,I,{}]:[h,I,{onFocus:Sc(y,O),onBlur:Sc(v,Z),onMouseEnter:Sc(b,O),onMouseLeave:Sc(w,Z),onTouchStart:Sc(C,O)}]:[!1,I,{}]}function Sc(r,t){return n=>{r&&r(n),n.defaultPrevented||t(n)}}function bA({page:r,...t}){let{router:n}=Fb(),s=M.useMemo(()=>Rb(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?M.createElement(TA,{page:r,matches:s,...t}):null}function EA(r){let{manifest:t,routeModules:n}=Hb(),[s,l]=M.useState([]);return M.useEffect(()=>{let h=!1;return pA(r,t,n).then(d=>{h||l(d)}),()=>{h=!0}},[r,t,n]),s}function TA({page:r,matches:t,...n}){let s=Ei(),{manifest:l,routeModules:h}=Hb(),{basename:d}=Fb(),{loaderData:y,matches:v}=vA(),b=M.useMemo(()=>V0(r,t,v,l,s,"data"),[r,t,v,l,s]),w=M.useMemo(()=>V0(r,t,v,l,s,"assets"),[r,t,v,l,s]),C=M.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let Z=new Set,G=!1;if(t.forEach($=>{let q=l.routes[$.route.id];!q||!q.hasLoader||(!b.some(nt=>nt.route.id===$.route.id)&&$.route.id in y&&h[$.route.id]?.shouldRevalidate||q.hasClientLoader?G=!0:Z.add($.route.id))}),Z.size===0)return[];let V=hA(r,d,"data");return G&&Z.size>0&&V.searchParams.set("_routes",t.filter($=>Z.has($.route.id)).map($=>$.route.id).join(",")),[V.pathname+V.search]},[d,y,s,l,b,t,r,h]),I=M.useMemo(()=>mA(w,l),[w,l]),O=EA(w);return M.createElement(M.Fragment,null,C.map(Z=>M.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...n})),I.map(Z=>M.createElement("link",{key:Z,rel:"modulepreload",href:Z,...n})),O.map(({key:Z,link:G})=>M.createElement("link",{key:Z,nonce:n.nonce,...G})))}function wA(...r){return t=>{r.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var SA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{SA&&(window.__reactRouterVersion="7.11.0")}catch{}function AA({basename:r,children:t,unstable_useTransitions:n,window:s}){let l=M.useRef();l.current==null&&(l.current=sS({window:s,v5Compat:!0}));let h=l.current,[d,y]=M.useState({action:h.action,location:h.location}),v=M.useCallback(b=>{n===!1?y(b):M.startTransition(()=>y(b))},[n]);return M.useLayoutEffect(()=>h.listen(v),[h,v]),M.createElement(eA,{basename:r,children:t,location:d.location,navigationType:d.action,navigator:h,unstable_useTransitions:n})}var qb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,of=M.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:l,reloadDocument:h,replace:d,state:y,target:v,to:b,preventScrollReset:w,viewTransition:C,unstable_defaultShouldRevalidate:I,...O},Z){let{basename:G,unstable_useTransitions:V}=M.useContext(qi),$=typeof b=="string"&&qb.test(b),q=Lb(b,G);b=q.to;let nt=VS(b,{relative:l}),[lt,bt,Tt]=xA(s,O),k=PA(b,{replace:d,state:y,target:v,preventScrollReset:w,relative:l,viewTransition:C,unstable_defaultShouldRevalidate:I,unstable_useTransitions:V});function D(K){t&&t(K),K.defaultPrevented||k(K)}let j=M.createElement("a",{...O,...Tt,href:q.absoluteURL||nt,onClick:q.isExternal||h?t:D,ref:wA(Z,bt),target:v,"data-discover":!$&&n==="render"?"true":void 0});return lt&&!$?M.createElement(M.Fragment,null,j,M.createElement(bA,{page:nt})):j});of.displayName="Link";var CA=M.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:l=!1,style:h,to:d,viewTransition:y,children:v,...b},w){let C=Qc(d,{relative:b.relative}),I=Ei(),O=M.useContext(sf),{navigator:Z,basename:G}=M.useContext(qi),V=O!=null&&kA(C)&&y===!0,$=Z.encodeLocation?Z.encodeLocation(C).pathname:C.pathname,q=I.pathname,nt=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(q=q.toLowerCase(),nt=nt?nt.toLowerCase():null,$=$.toLowerCase()),nt&&G&&(nt=Ys(nt,G)||nt);const lt=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let bt=q===$||!l&&q.startsWith($)&&q.charAt(lt)==="/",Tt=nt!=null&&(nt===$||!l&&nt.startsWith($)&&nt.charAt($.length)==="/"),k={isActive:bt,isPending:Tt,isTransitioning:V},D=bt?t:void 0,j;typeof s=="function"?j=s(k):j=[s,bt?"active":null,Tt?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let K=typeof h=="function"?h(k):h;return M.createElement(of,{...b,"aria-current":D,className:j,ref:w,style:K,to:d,viewTransition:y},typeof v=="function"?v(k):v)});CA.displayName="NavLink";var RA=M.forwardRef(({discover:r="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:l,state:h,method:d=Ad,action:y,onSubmit:v,relative:b,preventScrollReset:w,viewTransition:C,unstable_defaultShouldRevalidate:I,...O},Z)=>{let{unstable_useTransitions:G}=M.useContext(qi),V=LA(),$=OA(y,{relative:b}),q=d.toLowerCase()==="get"?"get":"post",nt=typeof y=="string"&&qb.test(y),lt=bt=>{if(v&&v(bt),bt.defaultPrevented)return;bt.preventDefault();let Tt=bt.nativeEvent.submitter,k=Tt?.getAttribute("formmethod")||d,D=()=>V(Tt||bt.currentTarget,{fetcherKey:t,method:k,navigate:n,replace:l,state:h,relative:b,preventScrollReset:w,viewTransition:C,unstable_defaultShouldRevalidate:I});G&&n!==!1?M.startTransition(()=>D()):D()};return M.createElement("form",{ref:Z,method:q,action:$,onSubmit:s?v:lt,...O,"data-discover":!nt&&r==="render"?"true":void 0})});RA.displayName="Form";function IA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gb(r){let t=M.useContext(Cu);return Ve(t,IA(r)),t}function PA(r,{target:t,replace:n,state:s,preventScrollReset:l,relative:h,viewTransition:d,unstable_defaultShouldRevalidate:y,unstable_useTransitions:v}={}){let b=an(),w=Ei(),C=Qc(r,{relative:h});return M.useCallback(I=>{if(oA(I,t)){I.preventDefault();let O=n!==void 0?n:Vc(w)===Vc(C),Z=()=>b(r,{replace:O,state:s,preventScrollReset:l,relative:h,viewTransition:d,unstable_defaultShouldRevalidate:y});v?M.startTransition(()=>Z()):Z()}},[w,b,C,n,s,t,r,l,h,d,y,v])}var NA=0,DA=()=>`__${String(++NA)}__`;function LA(){let{router:r}=Gb("useSubmit"),{basename:t}=M.useContext(qi),n=QS(),s=r.fetch,l=r.navigate;return M.useCallback(async(h,d={})=>{let{action:y,method:v,encType:b,formData:w,body:C}=cA(h,t);if(d.navigate===!1){let I=d.fetcherKey||DA();await s(I,n,d.action||y,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:C,formMethod:d.method||v,formEncType:d.encType||b,flushSync:d.flushSync})}else await l(d.action||y,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:C,formMethod:d.method||v,formEncType:d.encType||b,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[s,l,t,n])}function OA(r,{relative:t}={}){let{basename:n}=M.useContext(qi),s=M.useContext(jr);Ve(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),h={...Qc(r||".",{relative:t})},d=Ei();if(r==null){h.search=d.search;let y=new URLSearchParams(h.search),v=y.getAll("index");if(v.some(w=>w==="")){y.delete("index"),v.filter(C=>C).forEach(C=>y.append("index",C));let w=y.toString();h.search=w?`?${w}`:""}}return(!r||r===".")&&l.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(h.pathname=h.pathname==="/"?n:Gs([n,h.pathname])),Vc(h)}function kA(r,{relative:t}={}){let n=M.useContext(kb);Ve(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Gb("useViewTransitionState"),l=Qc(r,{relative:t});if(!n.isTransitioning)return!1;let h=Ys(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=Ys(n.nextLocation.pathname,s)||n.nextLocation.pathname;return zd(l.pathname,d)!=null||zd(l.pathname,h)!=null}var MA=Cb();const jA=()=>{};var B0={};const Zb=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},zA=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const h=r[n++];t[s++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=r[n++],d=r[n++],y=r[n++],v=((l&7)<<18|(h&63)<<12|(d&63)<<6|y&63)-65536;t[s++]=String.fromCharCode(55296+(v>>10)),t[s++]=String.fromCharCode(56320+(v&1023))}else{const h=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(h&63)<<6|d&63)}}return t.join("")},Wb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const h=r[l],d=l+1<r.length,y=d?r[l+1]:0,v=l+2<r.length,b=v?r[l+2]:0,w=h>>2,C=(h&3)<<4|y>>4;let I=(y&15)<<2|b>>6,O=b&63;v||(O=64,d||(I=64)),s.push(n[w],n[C],n[I],n[O])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(Zb(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):zA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const h=n[r.charAt(l++)],y=l<r.length?n[r.charAt(l)]:0;++l;const b=l<r.length?n[r.charAt(l)]:64;++l;const C=l<r.length?n[r.charAt(l)]:64;if(++l,h==null||y==null||b==null||C==null)throw new VA;const I=h<<2|y>>4;if(s.push(I),b!==64){const O=y<<4&240|b>>2;if(s.push(O),C!==64){const Z=b<<6&192|C;s.push(Z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class VA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BA=function(r){const t=Zb(r);return Wb.encodeByteArray(t,!0)},Vd=function(r){return BA(r).replace(/\./g,"")},Kb=function(r){try{return Wb.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function UA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const FA=()=>UA().__FIREBASE_DEFAULTS__,HA=()=>{if(typeof process>"u"||typeof B0>"u")return;const r=B0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},qA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&Kb(r[1]);return t&&JSON.parse(t)},lf=()=>{try{return jA()||FA()||HA()||qA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Yb=r=>lf()?.emulatorHosts?.[r],GA=r=>{const t=Yb(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Qb=()=>lf()?.config,Xb=r=>lf()?.[`_${r}`];class ZA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}function Iu(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $b(r){return(await fetch(r,{credentials:"include"})).ok}function WA(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Vd(JSON.stringify(n)),Vd(JSON.stringify(d)),""].join(".")}const Dc={};function KA(){const r={prod:[],emulator:[]};for(const t of Object.keys(Dc))Dc[t]?r.emulator.push(t):r.prod.push(t);return r}function YA(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let U0=!1;function Jb(r,t){if(typeof window>"u"||typeof document>"u"||!Iu(window.location.host)||Dc[r]===t||Dc[r]||U0)return;Dc[r]=t;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",h=KA().prod.length>0;function d(){const I=document.getElementById(s);I&&I.remove()}function y(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function v(I,O){I.setAttribute("width","24"),I.setAttribute("id",O),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function b(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{U0=!0,d()},I}function w(I,O){I.setAttribute("id",O),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function C(){const I=YA(s),O=n("text"),Z=document.getElementById(O)||document.createElement("span"),G=n("learnmore"),V=document.getElementById(G)||document.createElement("a"),$=n("preprendIcon"),q=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const nt=I.element;y(nt),w(V,G);const lt=b();v(q,$),nt.append(q,Z,V,lt),document.body.appendChild(nt)}h?(Z.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}function Wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function XA(){const r=lf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $A(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function tC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eC(){const r=Wn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function nC(){return!XA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iC(){try{return typeof indexedDB=="object"}catch{return!1}}function rC(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}const sC="FirebaseError";class ia extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=sC,Object.setPrototypeOf(this,ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xc.prototype.create)}}class Xc{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,h=this.errors[t],d=h?aC(h,s):"Error",y=`${this.serviceName}: ${d} (${l}).`;return new ia(l,y,s)}}function aC(r,t){return r.replace(oC,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const oC=/\{\$([^}]+)}/g;function lC(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Qs(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const h=r[l],d=t[l];if(F0(h)&&F0(d)){if(!Qs(h,d))return!1}else if(h!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function F0(r){return r!==null&&typeof r=="object"}function $c(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Ac(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,h]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(h)}}),t}function Cc(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function uC(r,t){const n=new cC(r,t);return n.subscribe.bind(n)}class cC{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");hC(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Im),l.error===void 0&&(l.error=Im),l.complete===void 0&&(l.complete=Im);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hC(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Im(){}function gn(r){return r&&r._delegate?r._delegate:r}class ol{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const sl="[DEFAULT]";class dC{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new ZA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(pC(t))try{this.getOrInitializeService({instanceIdentifier:sl})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const h=this.getOrInitializeService({instanceIdentifier:l});s.resolve(h)}catch{}}}}clearInstance(t=sl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=sl){return this.instances.has(t)}getOptions(t=sl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[h,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(h);s===y&&d.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const h=this.instances.get(s);return h&&t(h,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:fC(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=sl){return this.component?this.component.multipleInstances?t:sl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fC(r){return r===sl?void 0:r}function pC(r){return r.instantiationMode==="EAGER"}class mC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new dC(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var re;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(re||(re={}));const gC={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},_C=re.INFO,yC={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},vC=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=yC[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Pg{constructor(t){this.name=t,this._logLevel=_C,this._logHandler=vC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in re))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?gC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...t),this._logHandler(this,re.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...t),this._logHandler(this,re.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,re.INFO,...t),this._logHandler(this,re.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,re.WARN,...t),this._logHandler(this,re.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...t),this._logHandler(this,re.ERROR,...t)}}const xC=(r,t)=>t.some(n=>r instanceof n);let H0,q0;function bC(){return H0||(H0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EC(){return q0||(q0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tE=new WeakMap,Zm=new WeakMap,eE=new WeakMap,Pm=new WeakMap,Ng=new WeakMap;function TC(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",h),r.removeEventListener("error",d)},h=()=>{n(no(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",h),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&tE.set(n,r)}).catch(()=>{}),Ng.set(t,r),t}function wC(r){if(Zm.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",d),r.removeEventListener("abort",d)},h=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",h),r.addEventListener("error",d),r.addEventListener("abort",d)});Zm.set(r,t)}let Wm={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Zm.get(r);if(t==="objectStoreNames")return r.objectStoreNames||eE.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return no(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function SC(r){Wm=r(Wm)}function AC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Nm(this),t,...n);return eE.set(s,t.sort?t.sort():[t]),no(s)}:EC().includes(r)?function(...t){return r.apply(Nm(this),t),no(tE.get(this))}:function(...t){return no(r.apply(Nm(this),t))}}function CC(r){return typeof r=="function"?AC(r):(r instanceof IDBTransaction&&wC(r),xC(r,bC())?new Proxy(r,Wm):r)}function no(r){if(r instanceof IDBRequest)return TC(r);if(Pm.has(r))return Pm.get(r);const t=CC(r);return t!==r&&(Pm.set(r,t),Ng.set(t,r)),t}const Nm=r=>Ng.get(r);function RC(r,t,{blocked:n,upgrade:s,blocking:l,terminated:h}={}){const d=indexedDB.open(r,t),y=no(d);return s&&d.addEventListener("upgradeneeded",v=>{s(no(d.result),v.oldVersion,v.newVersion,no(d.transaction),v)}),n&&d.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),y.then(v=>{h&&v.addEventListener("close",()=>h()),l&&v.addEventListener("versionchange",b=>l(b.oldVersion,b.newVersion,b))}).catch(()=>{}),y}const IC=["get","getKey","getAll","getAllKeys","count"],PC=["put","add","delete","clear"],Dm=new Map;function G0(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Dm.get(t))return Dm.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=PC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||IC.includes(n)))return;const h=async function(d,...y){const v=this.transaction(d,l?"readwrite":"readonly");let b=v.store;return s&&(b=b.index(y.shift())),(await Promise.all([b[n](...y),l&&v.done]))[0]};return Dm.set(t,h),h}SC(r=>({...r,get:(t,n,s)=>G0(t,n)||r.get(t,n,s),has:(t,n)=>!!G0(t,n)||r.has(t,n)}));class NC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function DC(r){return r.getComponent()?.type==="VERSION"}const Km="@firebase/app",Z0="0.14.6";const Xs=new Pg("@firebase/app"),LC="@firebase/app-compat",OC="@firebase/analytics-compat",kC="@firebase/analytics",MC="@firebase/app-check-compat",jC="@firebase/app-check",zC="@firebase/auth",VC="@firebase/auth-compat",BC="@firebase/database",UC="@firebase/data-connect",FC="@firebase/database-compat",HC="@firebase/functions",qC="@firebase/functions-compat",GC="@firebase/installations",ZC="@firebase/installations-compat",WC="@firebase/messaging",KC="@firebase/messaging-compat",YC="@firebase/performance",QC="@firebase/performance-compat",XC="@firebase/remote-config",$C="@firebase/remote-config-compat",JC="@firebase/storage",t2="@firebase/storage-compat",e2="@firebase/firestore",n2="@firebase/ai",i2="@firebase/firestore-compat",r2="firebase",s2="12.6.0";const Ym="[DEFAULT]",a2={[Km]:"fire-core",[LC]:"fire-core-compat",[kC]:"fire-analytics",[OC]:"fire-analytics-compat",[jC]:"fire-app-check",[MC]:"fire-app-check-compat",[zC]:"fire-auth",[VC]:"fire-auth-compat",[BC]:"fire-rtdb",[UC]:"fire-data-connect",[FC]:"fire-rtdb-compat",[HC]:"fire-fn",[qC]:"fire-fn-compat",[GC]:"fire-iid",[ZC]:"fire-iid-compat",[WC]:"fire-fcm",[KC]:"fire-fcm-compat",[YC]:"fire-perf",[QC]:"fire-perf-compat",[XC]:"fire-rc",[$C]:"fire-rc-compat",[JC]:"fire-gcs",[t2]:"fire-gcs-compat",[e2]:"fire-fst",[i2]:"fire-fst-compat",[n2]:"fire-vertex","fire-js":"fire-js",[r2]:"fire-js-all"};const Bd=new Map,o2=new Map,Qm=new Map;function W0(r,t){try{r.container.addComponent(t)}catch(n){Xs.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function yu(r){const t=r.name;if(Qm.has(t))return Xs.debug(`There were multiple attempts to register component ${t}.`),!1;Qm.set(t,r);for(const n of Bd.values())W0(n,r);for(const n of o2.values())W0(n,r);return!0}function Dg(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function fr(r){return r==null?!1:r.settings!==void 0}const l2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},io=new Xc("app","Firebase",l2);class u2{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ol("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw io.create("app-deleted",{appName:this._name})}}const Pu=s2;function nE(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Ym,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw io.create("bad-app-name",{appName:String(l)});if(n||(n=Qb()),!n)throw io.create("no-options");const h=Bd.get(l);if(h){if(Qs(n,h.options)&&Qs(s,h.config))return h;throw io.create("duplicate-app",{appName:l})}const d=new mC(l);for(const v of Qm.values())d.addComponent(v);const y=new u2(n,s,d);return Bd.set(l,y),y}function iE(r=Ym){const t=Bd.get(r);if(!t&&r===Ym&&Qb())return nE();if(!t)throw io.create("no-app",{appName:r});return t}function ro(r,t,n){let s=a2[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xs.warn(d.join(" "));return}yu(new ol(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const c2="firebase-heartbeat-database",h2=1,Bc="firebase-heartbeat-store";let Lm=null;function rE(){return Lm||(Lm=RC(c2,h2,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Bc)}catch(n){console.warn(n)}}}}).catch(r=>{throw io.create("idb-open",{originalErrorMessage:r.message})})),Lm}async function d2(r){try{const n=(await rE()).transaction(Bc),s=await n.objectStore(Bc).get(sE(r));return await n.done,s}catch(t){if(t instanceof ia)Xs.warn(t.message);else{const n=io.create("idb-get",{originalErrorMessage:t?.message});Xs.warn(n.message)}}}async function K0(r,t){try{const s=(await rE()).transaction(Bc,"readwrite");await s.objectStore(Bc).put(t,sE(r)),await s.done}catch(n){if(n instanceof ia)Xs.warn(n.message);else{const s=io.create("idb-set",{originalErrorMessage:n?.message});Xs.warn(s.message)}}}function sE(r){return`${r.name}!${r.options.appId}`}const f2=1024,p2=30;class m2{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Y0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>p2){const l=y2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Xs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Y0(),{heartbeatsToSend:n,unsentEntries:s}=g2(this._heartbeatsCache.heartbeats),l=Vd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Xs.warn(t),""}}}function Y0(){return new Date().toISOString().substring(0,10)}function g2(r,t=f2){const n=[];let s=r.slice();for(const l of r){const h=n.find(d=>d.agent===l.agent);if(h){if(h.dates.push(l.date),Q0(n)>t){h.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Q0(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iC()?rC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await d2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return K0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return K0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Q0(r){return Vd(JSON.stringify({version:2,heartbeats:r})).length}function y2(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}function v2(r){yu(new ol("platform-logger",t=>new NC(t),"PRIVATE")),yu(new ol("heartbeat",t=>new m2(t),"PRIVATE")),ro(Km,Z0,r),ro(Km,Z0,"esm2020"),ro("fire-js","")}v2("");function aE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x2=aE,oE=new Xc("auth","Firebase",aE());const Ud=new Pg("@firebase/auth");function b2(r,...t){Ud.logLevel<=re.WARN&&Ud.warn(`Auth (${Pu}): ${r}`,...t)}function Rd(r,...t){Ud.logLevel<=re.ERROR&&Ud.error(`Auth (${Pu}): ${r}`,...t)}function kr(r,...t){throw Lg(r,...t)}function us(r,...t){return Lg(r,...t)}function lE(r,t,n){const s={...x2(),[t]:n};return new Xc("auth","Firebase",s).create(t,{appName:r.name})}function Zs(r){return lE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lg(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return oE.create(r,...t)}function zt(r,t,...n){if(!r)throw Lg(t,...n)}function Hs(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Rd(t),new Error(t)}function $s(r,t){r||Hs(t)}function Xm(){return typeof self<"u"&&self.location?.href||""}function E2(){return X0()==="http:"||X0()==="https:"}function X0(){return typeof self<"u"&&self.location?.protocol||null}function T2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E2()||JA()||"connection"in navigator)?navigator.onLine:!0}function w2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Jc{constructor(t,n){this.shortDelay=t,this.longDelay=n,$s(n>t,"Short delay should be less than long delay!"),this.isMobile=QA()||tC()}get(){return T2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Og(r,t){$s(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class uE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const S2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const A2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C2=new Jc(3e4,6e4);function ra(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function sa(r,t,n,s,l={}){return cE(r,l,async()=>{let h={},d={};s&&(t==="GET"?d=s:h={body:JSON.stringify(s)});const y=$c({key:r.config.apiKey,...d}).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const b={method:t,headers:v,...h};return $A()||(b.referrerPolicy="no-referrer"),r.emulatorConfig&&Iu(r.emulatorConfig.host)&&(b.credentials="include"),uE.fetch()(await hE(r,r.config.apiHost,n,y),b)})}async function cE(r,t,n){r._canInitEmulator=!1;const s={...S2,...t};try{const l=new I2(r),h=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await h.json();if("needConfirmation"in d)throw yd(r,"account-exists-with-different-credential",d);if(h.ok&&!("errorMessage"in d))return d;{const y=h.ok?d.errorMessage:d.error.message,[v,b]=y.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(r,"credential-already-in-use",d);if(v==="EMAIL_EXISTS")throw yd(r,"email-already-in-use",d);if(v==="USER_DISABLED")throw yd(r,"user-disabled",d);const w=s[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw lE(r,w,b);kr(r,w)}}catch(l){if(l instanceof ia)throw l;kr(r,"network-request-failed",{message:String(l)})}}async function th(r,t,n,s,l={}){const h=await sa(r,t,n,s,l);return"mfaPendingCredential"in h&&kr(r,"multi-factor-auth-required",{_serverResponse:h}),h}async function hE(r,t,n,s){const l=`${t}${n}?${s}`,h=r,d=h.config.emulator?Og(r.config,l):`${r.config.apiScheme}://${l}`;return A2.includes(n)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(d).toString():d}function R2(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class I2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(us(this.auth,"network-request-failed")),C2.get())})}}function yd(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=us(r,t,s);return l.customData._tokenResponse=n,l}function $0(r){return r!==void 0&&r.enterprise!==void 0}class P2{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return R2(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function N2(r,t){return sa(r,"GET","/v2/recaptchaConfig",ra(r,t))}async function D2(r,t){return sa(r,"POST","/v1/accounts:delete",t)}async function Fd(r,t){return sa(r,"POST","/v1/accounts:lookup",t)}function Lc(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function L2(r,t=!1){const n=gn(r),s=await n.getIdToken(t),l=kg(s);zt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,d=h?.sign_in_provider;return{claims:l,token:s,authTime:Lc(Om(l.auth_time)),issuedAtTime:Lc(Om(l.iat)),expirationTime:Lc(Om(l.exp)),signInProvider:d||null,signInSecondFactor:h?.sign_in_second_factor||null}}function Om(r){return Number(r)*1e3}function kg(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Rd("JWT malformed, contained fewer than 3 sections"),null;try{const l=Kb(n);return l?JSON.parse(l):(Rd("Failed to decode base64 JWT payload"),null)}catch(l){return Rd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function J0(r){const t=kg(r);return zt(t,"internal-error"),zt(typeof t.exp<"u","internal-error"),zt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Uc(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof ia&&O2(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function O2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class k2{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $m{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lc(this.lastLoginAt),this.creationTime=Lc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Hd(r){const t=r.auth,n=await r.getIdToken(),s=await Uc(r,Fd(t,{idToken:n}));zt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const h=l.providerUserInfo?.length?dE(l.providerUserInfo):[],d=j2(r.providerData,h),y=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!d?.length,b=y?v:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new $m(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(r,w)}async function M2(r){const t=gn(r);await Hd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function j2(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function dE(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function z2(r,t){const n=await cE(r,{},async()=>{const s=$c({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=r.config,d=await hE(r,l,"/v1/token",`key=${h}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:y,body:s};return r.emulatorConfig&&Iu(r.emulatorConfig.host)&&(v.credentials="include"),uE.fetch()(d,v)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function V2(r,t){return sa(r,"POST","/v2/accounts:revokeToken",ra(r,t))}class pu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){zt(t.idToken,"internal-error"),zt(typeof t.idToken<"u","internal-error"),zt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):J0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){zt(t.length!==0,"internal-error");const n=J0(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(zt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:h}=await z2(t,n);this.updateTokensAndExpiration(s,l,Number(h))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:h}=n,d=new pu;return s&&(zt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(zt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),h&&(zt(typeof h=="number","internal-error",{appName:t}),d.expirationTime=h),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new pu,this.toJSON())}_performRefresh(){return Hs("not implemented")}}function Wa(r,t){zt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Nr{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new k2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new $m(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Uc(this,this.stsTokenManager.getToken(this.auth,t));return zt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return L2(this,t)}reload(){return M2(this)}_assign(t){this!==t&&(zt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Nr({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Hd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(Zs(this.auth));const t=await this.getIdToken();return await Uc(this,D2(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,h=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,v=n._redirectEventId??void 0,b=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:C,emailVerified:I,isAnonymous:O,providerData:Z,stsTokenManager:G}=n;zt(C&&G,t,"internal-error");const V=pu.fromJSON(this.name,G);zt(typeof C=="string",t,"internal-error"),Wa(s,t.name),Wa(l,t.name),zt(typeof I=="boolean",t,"internal-error"),zt(typeof O=="boolean",t,"internal-error"),Wa(h,t.name),Wa(d,t.name),Wa(y,t.name),Wa(v,t.name),Wa(b,t.name),Wa(w,t.name);const $=new Nr({uid:C,auth:t,email:l,emailVerified:I,displayName:s,isAnonymous:O,photoURL:d,phoneNumber:h,tenantId:y,stsTokenManager:V,createdAt:b,lastLoginAt:w});return Z&&Array.isArray(Z)&&($.providerData=Z.map(q=>({...q}))),v&&($._redirectEventId=v),$}static async _fromIdTokenResponse(t,n,s=!1){const l=new pu;l.updateFromServerResponse(n);const h=new Nr({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Hd(h),h}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];zt(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?dE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!h?.length,y=new pu;y.updateFromIdToken(s);const v=new Nr({uid:l.localId,auth:t,stsTokenManager:y,isAnonymous:d}),b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new $m(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(v,b),v}}const tx=new Map;function qs(r){$s(r instanceof Function,"Expected a class definition");let t=tx.get(r);return t?($s(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,tx.set(r,t),t)}class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}fE.type="NONE";const ex=fE;function Id(r,t,n){return`firebase:${r}:${t}:${n}`}class mu{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:h}=this.auth;this.fullUserKey=Id(this.userKey,l.apiKey,h),this.fullPersistenceKey=Id("persistence",l.apiKey,h),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Fd(this.auth,{idToken:t}).catch(()=>{});return n?Nr._fromGetAccountInfoResponse(this.auth,n,t):null}return Nr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new mu(qs(ex),t,s);const l=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let h=l[0]||qs(ex);const d=Id(s,t.config.apiKey,t.name);let y=null;for(const b of n)try{const w=await b._get(d);if(w){let C;if(typeof w=="string"){const I=await Fd(t,{idToken:w}).catch(()=>{});if(!I)break;C=await Nr._fromGetAccountInfoResponse(t,I,w)}else C=Nr._fromJSON(t,w);b!==h&&(y=C),h=b;break}}catch{}const v=l.filter(b=>b._shouldAllowMigration);return!h._shouldAllowMigration||!v.length?new mu(h,t,s):(h=v[0],y&&await h._set(d,y.toJSON()),await Promise.all(n.map(async b=>{if(b!==h)try{await b._remove(d)}catch{}})),new mu(h,t,s))}}function nx(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_E(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(pE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vE(t))return"Blackberry";if(xE(t))return"Webos";if(mE(t))return"Safari";if((t.includes("chrome/")||gE(t))&&!t.includes("edge/"))return"Chrome";if(yE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function pE(r=Wn()){return/firefox\//i.test(r)}function mE(r=Wn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gE(r=Wn()){return/crios\//i.test(r)}function _E(r=Wn()){return/iemobile/i.test(r)}function yE(r=Wn()){return/android/i.test(r)}function vE(r=Wn()){return/blackberry/i.test(r)}function xE(r=Wn()){return/webos/i.test(r)}function Mg(r=Wn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function B2(r=Wn()){return Mg(r)&&!!window.navigator?.standalone}function U2(){return eC()&&document.documentMode===10}function bE(r=Wn()){return Mg(r)||yE(r)||xE(r)||vE(r)||/windows phone/i.test(r)||_E(r)}function EE(r,t=[]){let n;switch(r){case"Browser":n=nx(Wn());break;case"Worker":n=`${nx(Wn())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pu}/${s}`}class F2{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=h=>new Promise((d,y)=>{try{const v=t(h);d(v)}catch(v){y(v)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function H2(r,t={}){return sa(r,"GET","/v2/passwordPolicy",ra(r,t))}const q2=6;class G2{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??q2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}class Z2{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ix(this),this.idTokenSubscription=new ix(this),this.beforeStateQueue=new F2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qs(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await mu.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Fd(this,{idToken:t}),s=await Nr._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(fr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,d=s?._redirectEventId,y=await this.tryRedirectSignIn(t);(!h||h===d)&&y?.user&&(s=y.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return zt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Hd(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=w2()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(fr(this.app))return Promise.reject(Zs(this));const n=t?gn(t):null;return n&&zt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&zt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(Zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return fr(this.app)?Promise.reject(Zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await H2(this),n=new G2(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Xc("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await V2(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qs(t)||this._popupRedirectResolver;zt(n,this,"argument-error"),this.redirectPersistenceManager=await mu.create(this,[qs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const h=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(zt(y,this,"internal-error"),y.then(()=>{d||h(this.currentUser)}),typeof n=="function"){const v=t.addObserver(n,s,l);return()=>{d=!0,v()}}else{const v=t.addObserver(n);return()=>{d=!0,v()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=EE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&b2(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ml(r){return gn(r)}class ix{constructor(t){this.auth=t,this.observer=null,this.addObserver=uC(n=>this.observer=n)}get next(){return zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W2(r){uf=r}function TE(r){return uf.loadJS(r)}function K2(){return uf.recaptchaEnterpriseScript}function Y2(){return uf.gapiScript}function Q2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class X2{constructor(){this.enterprise=new $2}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class $2{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const J2="recaptcha-enterprise",wE="NO_RECAPTCHA";class tR{constructor(t){this.type=J2,this.auth=ml(t)}async verify(t="verify",n=!1){async function s(h){if(!n){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(d,y)=>{N2(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const b=new P2(v);return h.tenantId==null?h._agentRecaptchaConfig=b:h._tenantRecaptchaConfigs[h.tenantId]=b,d(b.siteKey)}}).catch(v=>{y(v)})})}function l(h,d,y){const v=window.grecaptcha;$0(v)?v.enterprise.ready(()=>{v.enterprise.execute(h,{action:t}).then(b=>{d(b)}).catch(()=>{d(wE)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new X2().execute("siteKey",{action:"verify"}):new Promise((h,d)=>{s(this.auth).then(y=>{if(!n&&$0(window.grecaptcha))l(y,h,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let v=K2();v.length!==0&&(v+=y),TE(v).then(()=>{l(y,h,d)}).catch(b=>{d(b)})}}).catch(y=>{d(y)})})}}async function rx(r,t,n,s=!1,l=!1){const h=new tR(r);let d;if(l)d=wE;else try{d=await h.verify(n)}catch{d=await h.verify(n,!0)}const y={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const v=y.phoneEnrollmentInfo.phoneNumber,b=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:b,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const v=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return s?Object.assign(y,{captchaResp:d}):Object.assign(y,{captchaResponse:d}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Jm(r,t,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await rx(r,t,n,n==="getOobCode");return s(r,h)}else return s(r,t).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await rx(r,t,n,n==="getOobCode");return s(r,d)}else return Promise.reject(h)})}function eR(r,t){const n=Dg(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),h=n.getOptions();if(Qs(h,t??{}))return l;kr(l,"already-initialized")}return n.initialize({options:t})}function nR(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(qs);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function iR(r,t,n){const s=ml(r);zt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,h=SE(t),{host:d,port:y}=rR(t),v=y===null?"":`:${y}`,b={url:`${h}//${d}${v}/`},w=Object.freeze({host:d,port:y,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){zt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),zt(Qs(b,s.config.emulator)&&Qs(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,Iu(d)?($b(`${h}//${d}${v}`),Jb("Auth",!0)):sR()}function SE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function rR(r){const t=SE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const h=l[1];return{host:h,port:sx(s.substr(h.length+1))}}else{const[h,d]=s.split(":");return{host:h,port:sx(d)}}}function sx(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function sR(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class jg{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Hs("not implemented")}_getIdTokenResponse(t){return Hs("not implemented")}_linkToIdToken(t,n){return Hs("not implemented")}_getReauthenticationResolver(t){return Hs("not implemented")}}async function aR(r,t){return sa(r,"POST","/v1/accounts:signUp",t)}async function oR(r,t){return th(r,"POST","/v1/accounts:signInWithPassword",ra(r,t))}async function lR(r,t){return sa(r,"POST","/v1/accounts:sendOobCode",ra(r,t))}async function uR(r,t){return lR(r,t)}async function cR(r,t){return th(r,"POST","/v1/accounts:signInWithEmailLink",ra(r,t))}async function hR(r,t){return th(r,"POST","/v1/accounts:signInWithEmailLink",ra(r,t))}class Fc extends jg{constructor(t,n,s,l=null){super("password",s),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new Fc(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Fc(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jm(t,n,"signInWithPassword",oR);case"emailLink":return cR(t,{email:this._email,oobCode:this._password});default:kr(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jm(t,s,"signUpPassword",aR);case"emailLink":return hR(t,{idToken:n,email:this._email,oobCode:this._password});default:kr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function gu(r,t){return th(r,"POST","/v1/accounts:signInWithIdp",ra(r,t))}const dR="http://localhost";class ll extends jg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ll(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):kr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...h}=n;if(!s||!l)return null;const d=new ll(s,l);return d.idToken=h.idToken||void 0,d.accessToken=h.accessToken||void 0,d.secret=h.secret,d.nonce=h.nonce,d.pendingToken=h.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return gu(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,gu(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,gu(t,n)}buildRequest(){const t={requestUri:dR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=$c(n)}return t}}function fR(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pR(r){const t=Ac(Cc(r)).link,n=t?Ac(Cc(t)).deep_link_id:null,s=Ac(Cc(r)).deep_link_id;return(s?Ac(Cc(s)).link:null)||s||n||t||r}class zg{constructor(t){const n=Ac(Cc(t)),s=n.apiKey??null,l=n.oobCode??null,h=fR(n.mode??null);zt(s&&l&&h,"argument-error"),this.apiKey=s,this.operation=h,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=pR(t);try{return new zg(n)}catch{return null}}}class Nu{constructor(){this.providerId=Nu.PROVIDER_ID}static credential(t,n){return Fc._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=zg.parseLink(n);return zt(s,"argument-error"),Fc._fromEmailAndCode(t,s.code,s.tenantId)}}Nu.PROVIDER_ID="password";Nu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class AE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class eh extends AE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Xa extends eh{constructor(){super("facebook.com")}static credential(t){return ll._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Xa.credentialFromTaggedObject(t)}static credentialFromError(t){return Xa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Xa.credential(t.oauthAccessToken)}catch{return null}}}Xa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xa.PROVIDER_ID="facebook.com";class $a extends eh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ll._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return $a.credentialFromTaggedObject(t)}static credentialFromError(t){return $a.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return $a.credential(n,s)}catch{return null}}}$a.GOOGLE_SIGN_IN_METHOD="google.com";$a.PROVIDER_ID="google.com";class Ja extends eh{constructor(){super("github.com")}static credential(t){return ll._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ja.credentialFromTaggedObject(t)}static credentialFromError(t){return Ja.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ja.credential(t.oauthAccessToken)}catch{return null}}}Ja.GITHUB_SIGN_IN_METHOD="github.com";Ja.PROVIDER_ID="github.com";class to extends eh{constructor(){super("twitter.com")}static credential(t,n){return ll._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return to.credentialFromTaggedObject(t)}static credentialFromError(t){return to.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return to.credential(n,s)}catch{return null}}}to.TWITTER_SIGN_IN_METHOD="twitter.com";to.PROVIDER_ID="twitter.com";async function mR(r,t){return th(r,"POST","/v1/accounts:signUp",ra(r,t))}class ul{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const h=await Nr._fromIdTokenResponse(t,s,l),d=ax(s);return new ul({user:h,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=ax(s);return new ul({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function ax(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class qd extends ia{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,qd.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new qd(t,n,s,l)}}function CE(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?qd._fromErrorAndOperation(r,h,t,s):h})}async function gR(r,t,n=!1){const s=await Uc(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return ul._forOperation(r,"link",s)}async function _R(r,t,n=!1){const{auth:s}=r;if(fr(s.app))return Promise.reject(Zs(s));const l="reauthenticate";try{const h=await Uc(r,CE(s,l,t,r),n);zt(h.idToken,s,"internal-error");const d=kg(h.idToken);zt(d,s,"internal-error");const{sub:y}=d;return zt(r.uid===y,s,"user-mismatch"),ul._forOperation(r,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&kr(s,"user-mismatch"),h}}async function RE(r,t,n=!1){if(fr(r.app))return Promise.reject(Zs(r));const s="signIn",l=await CE(r,s,t),h=await ul._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(h.user),h}async function yR(r,t){return RE(ml(r),t)}async function IE(r){const t=ml(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function vR(r,t,n){if(fr(r.app))return Promise.reject(Zs(r));const s=ml(r),d=await Jm(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mR).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&IE(r),v}),y=await ul._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(y.user),y}function xR(r,t,n){return fr(r.app)?Promise.reject(Zs(r)):yR(gn(r),Nu.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&IE(r),s})}async function bR(r,t){const n=gn(r),l={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:h}=await uR(n.auth,l);h!==r.email&&await r.reload()}function ER(r,t,n,s){return gn(r).onIdTokenChanged(t,n,s)}function TR(r,t,n){return gn(r).beforeAuthStateChanged(t,n)}function wR(r,t,n,s){return gn(r).onAuthStateChanged(t,n,s)}function SR(r){return gn(r).signOut()}const Gd="__sak";class PE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const AR=1e3,CR=10;class NE extends PE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,y,v)=>{this.notifyListeners(d,v)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},h=this.storage.getItem(s);U2()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,CR):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},AR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}NE.type="LOCAL";const RR=NE;class DE extends PE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}DE.type="SESSION";const LE=DE;function IR(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class cf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new cf(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:h}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const y=Array.from(d).map(async b=>b(n.origin,h)),v=await IR(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:v})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cf.receivers=[];function Vg(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}class PR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,d;return new Promise((y,v)=>{const b=Vg("",20);l.port1.start();const w=setTimeout(()=>{v(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(C){const I=C;if(I.data.eventId===b)switch(I.data.status){case"ack":clearTimeout(w),h=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),y(I.data.response);break;default:clearTimeout(w),clearTimeout(h),v(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:b,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function cs(){return window}function NR(r){cs().location.href=r}function OE(){return typeof cs().WorkerGlobalScope<"u"&&typeof cs().importScripts=="function"}async function DR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LR(){return navigator?.serviceWorker?.controller||null}function OR(){return OE()?self:null}const kE="firebaseLocalStorageDb",kR=1,Zd="firebaseLocalStorage",ME="fbase_key";class nh{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hf(r,t){return r.transaction([Zd],t?"readwrite":"readonly").objectStore(Zd)}function MR(){const r=indexedDB.deleteDatabase(kE);return new nh(r).toPromise()}function tg(){const r=indexedDB.open(kE,kR);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Zd,{keyPath:ME})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Zd)?t(s):(s.close(),await MR(),t(await tg()))})})}async function ox(r,t,n){const s=hf(r,!0).put({[ME]:t,value:n});return new nh(s).toPromise()}async function jR(r,t){const n=hf(r,!1).get(t),s=await new nh(n).toPromise();return s===void 0?null:s.value}function lx(r,t){const n=hf(r,!0).delete(t);return new nh(n).toPromise()}const zR=800,VR=3;class jE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tg(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>VR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(OR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await DR(),!this.activeServiceWorker)return;this.sender=new PR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||LR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await tg();return await ox(t,Gd,"1"),await lx(t,Gd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>ox(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>jR(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>lx(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=hf(l,!1).getAll();return new nh(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jE.type="LOCAL";const BR=jE;new Jc(3e4,6e4);function UR(r,t){return t?qs(t):(zt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Bg extends jg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return gu(t,this._buildIdpRequest())}_linkToIdToken(t,n){return gu(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return gu(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function FR(r){return RE(r.auth,new Bg(r),r.bypassAuthState)}function HR(r){const{auth:t,user:n}=r;return zt(n,t,"internal-error"),_R(n,new Bg(r),r.bypassAuthState)}async function qR(r){const{auth:t,user:n}=r;return zt(n,t,"internal-error"),gR(n,new Bg(r),r.bypassAuthState)}class zE{constructor(t,n,s,l,h=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:h,error:d,type:y}=t;if(d){this.reject(d);return}const v={auth:this.auth,requestUri:n,sessionId:s,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(v))}catch(b){this.reject(b)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return FR;case"linkViaPopup":case"linkViaRedirect":return qR;case"reauthViaPopup":case"reauthViaRedirect":return HR;default:kr(this.auth,"internal-error")}}resolve(t){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const GR=new Jc(2e3,1e4);class du extends zE{constructor(t,n,s,l,h){super(t,n,l,h),this.provider=s,this.authWindow=null,this.pollId=null,du.currentPopupAction&&du.currentPopupAction.cancel(),du.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return zt(t,this.auth,"internal-error"),t}async onExecution(){$s(this.filter.length===1,"Popup operations only handle one event");const t=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,du.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,GR.get())};t()}}du.currentPopupAction=null;const ZR="pendingRedirect",Pd=new Map;class WR extends zE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Pd.get(this.auth._key());if(!t){try{const s=await KR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Pd.set(this.auth._key(),t)}return this.bypassAuthState||Pd.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KR(r,t){const n=XR(t),s=QR(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function YR(r,t){Pd.set(r._key(),t)}function QR(r){return qs(r._redirectPersistence)}function XR(r){return Id(ZR,r.config.apiKey,r.name)}async function $R(r,t,n=!1){if(fr(r.app))return Promise.reject(Zs(r));const s=ml(r),l=UR(s,t),d=await new WR(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}const JR=600*1e3;class tI{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!eI(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!VE(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(us(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=JR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ux(t))}saveEventToCache(t){this.cachedEventUids.add(ux(t)),this.lastProcessedEventTime=Date.now()}}function ux(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function VE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function eI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VE(r);default:return!1}}async function nI(r,t={}){return sa(r,"GET","/v1/projects",t)}const iI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rI=/^https?/;async function sI(r){if(r.config.emulator)return;const{authorizedDomains:t}=await nI(r);for(const n of t)try{if(aI(n))return}catch{}kr(r,"unauthorized-domain")}function aI(r){const t=Xm(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!rI.test(n))return!1;if(iI.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}const oI=new Jc(3e4,6e4);function cx(){const r=cs().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function lI(r){return new Promise((t,n)=>{function s(){cx(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cx(),n(us(r,"network-request-failed"))},timeout:oI.get()})}if(cs().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(cs().gapi?.load)s();else{const l=Q2("iframefcb");return cs()[l]=()=>{gapi.load?s():n(us(r,"network-request-failed"))},TE(`${Y2()}?onload=${l}`).catch(h=>n(h))}}).catch(t=>{throw Nd=null,t})}let Nd=null;function uI(r){return Nd=Nd||lI(r),Nd}const cI=new Jc(5e3,15e3),hI="__/auth/iframe",dI="emulator/auth/iframe",fI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mI(r){const t=r.config;zt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Og(t,dI):`https://${r.config.authDomain}/${hI}`,s={apiKey:t.apiKey,appName:r.name,v:Pu},l=pI.get(r.config.apiHost);l&&(s.eid=l);const h=r._getFrameworks();return h.length&&(s.fw=h.join(",")),`${n}?${$c(s).slice(1)}`}async function gI(r){const t=await uI(r),n=cs().gapi;return zt(n,r,"internal-error"),t.open({where:document.body,url:mI(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fI,dontclear:!0},s=>new Promise(async(l,h)=>{await s.restyle({setHideOnLeave:!1});const d=us(r,"network-request-failed"),y=cs().setTimeout(()=>{h(d)},cI.get());function v(){cs().clearTimeout(y),l(s)}s.ping(v).then(v,()=>{h(d)})}))}const _I={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yI=500,vI=600,xI="_blank",bI="http://localhost";class hx{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EI(r,t,n,s=yI,l=vI){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const v={..._I,width:s.toString(),height:l.toString(),top:h,left:d},b=Wn().toLowerCase();n&&(y=gE(b)?xI:n),pE(b)&&(t=t||bI,v.scrollbars="yes");const w=Object.entries(v).reduce((I,[O,Z])=>`${I}${O}=${Z},`,"");if(B2(b)&&y!=="_self")return TI(t||"",y),new hx(null);const C=window.open(t||"",y,w);zt(C,r,"popup-blocked");try{C.focus()}catch{}return new hx(C)}function TI(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const wI="__/auth/handler",SI="emulator/auth/handler",AI=encodeURIComponent("fac");async function dx(r,t,n,s,l,h){zt(r.config.authDomain,r,"auth-domain-config-required"),zt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Pu,eventId:l};if(t instanceof AE){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",lC(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[w,C]of Object.entries({}))d[w]=C}if(t instanceof eh){const w=t.getScopes().filter(C=>C!=="");w.length>0&&(d.scopes=w.join(","))}r.tenantId&&(d.tid=r.tenantId);const y=d;for(const w of Object.keys(y))y[w]===void 0&&delete y[w];const v=await r._getAppCheckToken(),b=v?`#${AI}=${encodeURIComponent(v)}`:"";return`${CI(r)}?${$c(y).slice(1)}${b}`}function CI({config:r}){return r.emulator?Og(r,SI):`https://${r.authDomain}/${wI}`}const km="webStorageSupport";class RI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LE,this._completeRedirectFn=$R,this._overrideRedirectResult=YR}async _openPopup(t,n,s,l){$s(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await dx(t,n,s,Xm(),l);return EI(t,h,Vg())}async _openRedirect(t,n,s,l){await this._originValidation(t);const h=await dx(t,n,s,Xm(),l);return NR(h),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:h}=this.eventManagers[n];return l?Promise.resolve(l):($s(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await gI(t),s=new tI(t);return n.register("authEvent",l=>(zt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(km,{type:km},l=>{const h=l?.[0]?.[km];h!==void 0&&n(!!h),kr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sI(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return bE()||mE()||Mg()}}const II=RI;var fx="@firebase/auth",px="1.12.0";class PI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function NI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DI(r){yu(new ol("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=s.options;zt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const v={apiKey:d,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EE(r)},b=new Z2(s,l,h,v);return nR(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),yu(new ol("auth-internal",t=>{const n=ml(t.getProvider("auth").getImmediate());return(s=>new PI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ro(fx,px,NI(r)),ro(fx,px,"esm2020")}const LI=300,OI=Xb("authIdTokenMaxAge")||LI;let mx=null;const kI=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>OI)return;const l=n?.token;mx!==l&&(mx=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function MI(r=iE()){const t=Dg(r,"auth");if(t.isInitialized())return t.getImmediate();const n=eR(r,{popupRedirectResolver:II,persistence:[BR,RR,LE]}),s=Xb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const d=kI(h.toString());TR(n,d,()=>d(n.currentUser)),ER(n,y=>d(y))}}const l=Yb("auth");return l&&iR(n,`http://${l}`),n}function jI(){return document.getElementsByTagName("head")?.[0]??document}W2({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const h=us("internal-error");h.customData=l,n(h)},s.type="text/javascript",s.charset="UTF-8",jI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DI("Browser");var gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var so,BE;(function(){var r;function t(k,D){function j(){}j.prototype=D.prototype,k.F=D.prototype,k.prototype=new j,k.prototype.constructor=k,k.D=function(K,F,Y){for(var B=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)B[oe-2]=arguments[oe];return D.prototype[F].apply(K,B)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(k,D,j){j||(j=0);const K=Array(16);if(typeof D=="string")for(var F=0;F<16;++F)K[F]=D.charCodeAt(j++)|D.charCodeAt(j++)<<8|D.charCodeAt(j++)<<16|D.charCodeAt(j++)<<24;else for(F=0;F<16;++F)K[F]=D[j++]|D[j++]<<8|D[j++]<<16|D[j++]<<24;D=k.g[0],j=k.g[1],F=k.g[2];let Y=k.g[3],B;B=D+(Y^j&(F^Y))+K[0]+3614090360&4294967295,D=j+(B<<7&4294967295|B>>>25),B=Y+(F^D&(j^F))+K[1]+3905402710&4294967295,Y=D+(B<<12&4294967295|B>>>20),B=F+(j^Y&(D^j))+K[2]+606105819&4294967295,F=Y+(B<<17&4294967295|B>>>15),B=j+(D^F&(Y^D))+K[3]+3250441966&4294967295,j=F+(B<<22&4294967295|B>>>10),B=D+(Y^j&(F^Y))+K[4]+4118548399&4294967295,D=j+(B<<7&4294967295|B>>>25),B=Y+(F^D&(j^F))+K[5]+1200080426&4294967295,Y=D+(B<<12&4294967295|B>>>20),B=F+(j^Y&(D^j))+K[6]+2821735955&4294967295,F=Y+(B<<17&4294967295|B>>>15),B=j+(D^F&(Y^D))+K[7]+4249261313&4294967295,j=F+(B<<22&4294967295|B>>>10),B=D+(Y^j&(F^Y))+K[8]+1770035416&4294967295,D=j+(B<<7&4294967295|B>>>25),B=Y+(F^D&(j^F))+K[9]+2336552879&4294967295,Y=D+(B<<12&4294967295|B>>>20),B=F+(j^Y&(D^j))+K[10]+4294925233&4294967295,F=Y+(B<<17&4294967295|B>>>15),B=j+(D^F&(Y^D))+K[11]+2304563134&4294967295,j=F+(B<<22&4294967295|B>>>10),B=D+(Y^j&(F^Y))+K[12]+1804603682&4294967295,D=j+(B<<7&4294967295|B>>>25),B=Y+(F^D&(j^F))+K[13]+4254626195&4294967295,Y=D+(B<<12&4294967295|B>>>20),B=F+(j^Y&(D^j))+K[14]+2792965006&4294967295,F=Y+(B<<17&4294967295|B>>>15),B=j+(D^F&(Y^D))+K[15]+1236535329&4294967295,j=F+(B<<22&4294967295|B>>>10),B=D+(F^Y&(j^F))+K[1]+4129170786&4294967295,D=j+(B<<5&4294967295|B>>>27),B=Y+(j^F&(D^j))+K[6]+3225465664&4294967295,Y=D+(B<<9&4294967295|B>>>23),B=F+(D^j&(Y^D))+K[11]+643717713&4294967295,F=Y+(B<<14&4294967295|B>>>18),B=j+(Y^D&(F^Y))+K[0]+3921069994&4294967295,j=F+(B<<20&4294967295|B>>>12),B=D+(F^Y&(j^F))+K[5]+3593408605&4294967295,D=j+(B<<5&4294967295|B>>>27),B=Y+(j^F&(D^j))+K[10]+38016083&4294967295,Y=D+(B<<9&4294967295|B>>>23),B=F+(D^j&(Y^D))+K[15]+3634488961&4294967295,F=Y+(B<<14&4294967295|B>>>18),B=j+(Y^D&(F^Y))+K[4]+3889429448&4294967295,j=F+(B<<20&4294967295|B>>>12),B=D+(F^Y&(j^F))+K[9]+568446438&4294967295,D=j+(B<<5&4294967295|B>>>27),B=Y+(j^F&(D^j))+K[14]+3275163606&4294967295,Y=D+(B<<9&4294967295|B>>>23),B=F+(D^j&(Y^D))+K[3]+4107603335&4294967295,F=Y+(B<<14&4294967295|B>>>18),B=j+(Y^D&(F^Y))+K[8]+1163531501&4294967295,j=F+(B<<20&4294967295|B>>>12),B=D+(F^Y&(j^F))+K[13]+2850285829&4294967295,D=j+(B<<5&4294967295|B>>>27),B=Y+(j^F&(D^j))+K[2]+4243563512&4294967295,Y=D+(B<<9&4294967295|B>>>23),B=F+(D^j&(Y^D))+K[7]+1735328473&4294967295,F=Y+(B<<14&4294967295|B>>>18),B=j+(Y^D&(F^Y))+K[12]+2368359562&4294967295,j=F+(B<<20&4294967295|B>>>12),B=D+(j^F^Y)+K[5]+4294588738&4294967295,D=j+(B<<4&4294967295|B>>>28),B=Y+(D^j^F)+K[8]+2272392833&4294967295,Y=D+(B<<11&4294967295|B>>>21),B=F+(Y^D^j)+K[11]+1839030562&4294967295,F=Y+(B<<16&4294967295|B>>>16),B=j+(F^Y^D)+K[14]+4259657740&4294967295,j=F+(B<<23&4294967295|B>>>9),B=D+(j^F^Y)+K[1]+2763975236&4294967295,D=j+(B<<4&4294967295|B>>>28),B=Y+(D^j^F)+K[4]+1272893353&4294967295,Y=D+(B<<11&4294967295|B>>>21),B=F+(Y^D^j)+K[7]+4139469664&4294967295,F=Y+(B<<16&4294967295|B>>>16),B=j+(F^Y^D)+K[10]+3200236656&4294967295,j=F+(B<<23&4294967295|B>>>9),B=D+(j^F^Y)+K[13]+681279174&4294967295,D=j+(B<<4&4294967295|B>>>28),B=Y+(D^j^F)+K[0]+3936430074&4294967295,Y=D+(B<<11&4294967295|B>>>21),B=F+(Y^D^j)+K[3]+3572445317&4294967295,F=Y+(B<<16&4294967295|B>>>16),B=j+(F^Y^D)+K[6]+76029189&4294967295,j=F+(B<<23&4294967295|B>>>9),B=D+(j^F^Y)+K[9]+3654602809&4294967295,D=j+(B<<4&4294967295|B>>>28),B=Y+(D^j^F)+K[12]+3873151461&4294967295,Y=D+(B<<11&4294967295|B>>>21),B=F+(Y^D^j)+K[15]+530742520&4294967295,F=Y+(B<<16&4294967295|B>>>16),B=j+(F^Y^D)+K[2]+3299628645&4294967295,j=F+(B<<23&4294967295|B>>>9),B=D+(F^(j|~Y))+K[0]+4096336452&4294967295,D=j+(B<<6&4294967295|B>>>26),B=Y+(j^(D|~F))+K[7]+1126891415&4294967295,Y=D+(B<<10&4294967295|B>>>22),B=F+(D^(Y|~j))+K[14]+2878612391&4294967295,F=Y+(B<<15&4294967295|B>>>17),B=j+(Y^(F|~D))+K[5]+4237533241&4294967295,j=F+(B<<21&4294967295|B>>>11),B=D+(F^(j|~Y))+K[12]+1700485571&4294967295,D=j+(B<<6&4294967295|B>>>26),B=Y+(j^(D|~F))+K[3]+2399980690&4294967295,Y=D+(B<<10&4294967295|B>>>22),B=F+(D^(Y|~j))+K[10]+4293915773&4294967295,F=Y+(B<<15&4294967295|B>>>17),B=j+(Y^(F|~D))+K[1]+2240044497&4294967295,j=F+(B<<21&4294967295|B>>>11),B=D+(F^(j|~Y))+K[8]+1873313359&4294967295,D=j+(B<<6&4294967295|B>>>26),B=Y+(j^(D|~F))+K[15]+4264355552&4294967295,Y=D+(B<<10&4294967295|B>>>22),B=F+(D^(Y|~j))+K[6]+2734768916&4294967295,F=Y+(B<<15&4294967295|B>>>17),B=j+(Y^(F|~D))+K[13]+1309151649&4294967295,j=F+(B<<21&4294967295|B>>>11),B=D+(F^(j|~Y))+K[4]+4149444226&4294967295,D=j+(B<<6&4294967295|B>>>26),B=Y+(j^(D|~F))+K[11]+3174756917&4294967295,Y=D+(B<<10&4294967295|B>>>22),B=F+(D^(Y|~j))+K[2]+718787259&4294967295,F=Y+(B<<15&4294967295|B>>>17),B=j+(Y^(F|~D))+K[9]+3951481745&4294967295,k.g[0]=k.g[0]+D&4294967295,k.g[1]=k.g[1]+(F+(B<<21&4294967295|B>>>11))&4294967295,k.g[2]=k.g[2]+F&4294967295,k.g[3]=k.g[3]+Y&4294967295}s.prototype.v=function(k,D){D===void 0&&(D=k.length);const j=D-this.blockSize,K=this.C;let F=this.h,Y=0;for(;Y<D;){if(F==0)for(;Y<=j;)l(this,k,Y),Y+=this.blockSize;if(typeof k=="string"){for(;Y<D;)if(K[F++]=k.charCodeAt(Y++),F==this.blockSize){l(this,K),F=0;break}}else for(;Y<D;)if(K[F++]=k[Y++],F==this.blockSize){l(this,K),F=0;break}}this.h=F,this.o+=D},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var D=1;D<k.length-8;++D)k[D]=0;D=this.o*8;for(var j=k.length-8;j<k.length;++j)k[j]=D&255,D/=256;for(this.v(k),k=Array(16),D=0,j=0;j<4;++j)for(let K=0;K<32;K+=8)k[D++]=this.g[j]>>>K&255;return k};function h(k,D){var j=y;return Object.prototype.hasOwnProperty.call(j,k)?j[k]:j[k]=D(k)}function d(k,D){this.h=D;const j=[];let K=!0;for(let F=k.length-1;F>=0;F--){const Y=k[F]|0;K&&Y==D||(j[F]=Y,K=!1)}this.g=j}var y={};function v(k){return-128<=k&&k<128?h(k,function(D){return new d([D|0],D<0?-1:0)}):new d([k|0],k<0?-1:0)}function b(k){if(isNaN(k)||!isFinite(k))return C;if(k<0)return V(b(-k));const D=[];let j=1;for(let K=0;k>=j;K++)D[K]=k/j|0,j*=4294967296;return new d(D,0)}function w(k,D){if(k.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k.charAt(0)=="-")return V(w(k.substring(1),D));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=b(Math.pow(D,8));let K=C;for(let Y=0;Y<k.length;Y+=8){var F=Math.min(8,k.length-Y);const B=parseInt(k.substring(Y,Y+F),D);F<8?(F=b(Math.pow(D,F)),K=K.j(F).add(b(B))):(K=K.j(j),K=K.add(b(B)))}return K}var C=v(0),I=v(1),O=v(16777216);r=d.prototype,r.m=function(){if(G(this))return-V(this).m();let k=0,D=1;for(let j=0;j<this.g.length;j++){const K=this.i(j);k+=(K>=0?K:4294967296+K)*D,D*=4294967296}return k},r.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(Z(this))return"0";if(G(this))return"-"+V(this).toString(k);const D=b(Math.pow(k,6));var j=this;let K="";for(;;){const F=lt(j,D).g;j=$(j,F.j(D));let Y=((j.g.length>0?j.g[0]:j.h)>>>0).toString(k);if(j=F,Z(j))return Y+K;for(;Y.length<6;)Y="0"+Y;K=Y+K}},r.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function Z(k){if(k.h!=0)return!1;for(let D=0;D<k.g.length;D++)if(k.g[D]!=0)return!1;return!0}function G(k){return k.h==-1}r.l=function(k){return k=$(this,k),G(k)?-1:Z(k)?0:1};function V(k){const D=k.g.length,j=[];for(let K=0;K<D;K++)j[K]=~k.g[K];return new d(j,~k.h).add(I)}r.abs=function(){return G(this)?V(this):this},r.add=function(k){const D=Math.max(this.g.length,k.g.length),j=[];let K=0;for(let F=0;F<=D;F++){let Y=K+(this.i(F)&65535)+(k.i(F)&65535),B=(Y>>>16)+(this.i(F)>>>16)+(k.i(F)>>>16);K=B>>>16,Y&=65535,B&=65535,j[F]=B<<16|Y}return new d(j,j[j.length-1]&-2147483648?-1:0)};function $(k,D){return k.add(V(D))}r.j=function(k){if(Z(this)||Z(k))return C;if(G(this))return G(k)?V(this).j(V(k)):V(V(this).j(k));if(G(k))return V(this.j(V(k)));if(this.l(O)<0&&k.l(O)<0)return b(this.m()*k.m());const D=this.g.length+k.g.length,j=[];for(var K=0;K<2*D;K++)j[K]=0;for(K=0;K<this.g.length;K++)for(let F=0;F<k.g.length;F++){const Y=this.i(K)>>>16,B=this.i(K)&65535,oe=k.i(F)>>>16,Je=k.i(F)&65535;j[2*K+2*F]+=B*Je,q(j,2*K+2*F),j[2*K+2*F+1]+=Y*Je,q(j,2*K+2*F+1),j[2*K+2*F+1]+=B*oe,q(j,2*K+2*F+1),j[2*K+2*F+2]+=Y*oe,q(j,2*K+2*F+2)}for(k=0;k<D;k++)j[k]=j[2*k+1]<<16|j[2*k];for(k=D;k<2*D;k++)j[k]=0;return new d(j,0)};function q(k,D){for(;(k[D]&65535)!=k[D];)k[D+1]+=k[D]>>>16,k[D]&=65535,D++}function nt(k,D){this.g=k,this.h=D}function lt(k,D){if(Z(D))throw Error("division by zero");if(Z(k))return new nt(C,C);if(G(k))return D=lt(V(k),D),new nt(V(D.g),V(D.h));if(G(D))return D=lt(k,V(D)),new nt(V(D.g),D.h);if(k.g.length>30){if(G(k)||G(D))throw Error("slowDivide_ only works with positive integers.");for(var j=I,K=D;K.l(k)<=0;)j=bt(j),K=bt(K);var F=Tt(j,1),Y=Tt(K,1);for(K=Tt(K,2),j=Tt(j,2);!Z(K);){var B=Y.add(K);B.l(k)<=0&&(F=F.add(j),Y=B),K=Tt(K,1),j=Tt(j,1)}return D=$(k,F.j(D)),new nt(F,D)}for(F=C;k.l(D)>=0;){for(j=Math.max(1,Math.floor(k.m()/D.m())),K=Math.ceil(Math.log(j)/Math.LN2),K=K<=48?1:Math.pow(2,K-48),Y=b(j),B=Y.j(D);G(B)||B.l(k)>0;)j-=K,Y=b(j),B=Y.j(D);Z(Y)&&(Y=I),F=F.add(Y),k=$(k,B)}return new nt(F,k)}r.B=function(k){return lt(this,k).h},r.and=function(k){const D=Math.max(this.g.length,k.g.length),j=[];for(let K=0;K<D;K++)j[K]=this.i(K)&k.i(K);return new d(j,this.h&k.h)},r.or=function(k){const D=Math.max(this.g.length,k.g.length),j=[];for(let K=0;K<D;K++)j[K]=this.i(K)|k.i(K);return new d(j,this.h|k.h)},r.xor=function(k){const D=Math.max(this.g.length,k.g.length),j=[];for(let K=0;K<D;K++)j[K]=this.i(K)^k.i(K);return new d(j,this.h^k.h)};function bt(k){const D=k.g.length+1,j=[];for(let K=0;K<D;K++)j[K]=k.i(K)<<1|k.i(K-1)>>>31;return new d(j,k.h)}function Tt(k,D){const j=D>>5;D%=32;const K=k.g.length-j,F=[];for(let Y=0;Y<K;Y++)F[Y]=D>0?k.i(Y+j)>>>D|k.i(Y+j+1)<<32-D:k.i(Y+j);return new d(F,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,BE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=b,d.fromString=w,so=d}).apply(typeof gx<"u"?gx:typeof self<"u"?self:typeof window<"u"?window:{});var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var UE,Rc,FE,Dd,eg,HE,qE,GE;(function(){var r,t=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof vd=="object"&&vd];for(var E=0;E<f.length;++E){var A=f[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var s=n(this);function l(f,E){if(E)t:{var A=s;f=f.split(".");for(var N=0;N<f.length-1;N++){var J=f[N];if(!(J in A))break t;A=A[J]}f=f[f.length-1],N=A[f],E=E(N),E!=N&&E!=null&&t(A,f,{configurable:!0,writable:!0,value:E})}}l("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(f){return f||function(E){var A=[],N;for(N in E)Object.prototype.hasOwnProperty.call(E,N)&&A.push([N,E[N]]);return A}});var h=h||{},d=this||self;function y(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function v(f,E,A){return f.call.apply(f.bind,arguments)}function b(f,E,A){return b=v,b.apply(null,arguments)}function w(f,E){var A=Array.prototype.slice.call(arguments,1);return function(){var N=A.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function C(f,E){function A(){}A.prototype=E.prototype,f.Z=E.prototype,f.prototype=new A,f.prototype.constructor=f,f.Ob=function(N,J,st){for(var vt=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)vt[Bt-2]=arguments[Bt];return E.prototype[J].apply(N,vt)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function O(f){const E=f.length;if(E>0){const A=Array(E);for(let N=0;N<E;N++)A[N]=f[N];return A}return[]}function Z(f,E){for(let N=1;N<arguments.length;N++){const J=arguments[N];var A=typeof J;if(A=A!="object"?A:J?Array.isArray(J)?"array":A:"null",A=="array"||A=="object"&&typeof J.length=="number"){A=f.length||0;const st=J.length||0;f.length=A+st;for(let vt=0;vt<st;vt++)f[A+vt]=J[vt]}else f.push(J)}}class G{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function V(f){d.setTimeout(()=>{throw f},0)}function $(){var f=k;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class q{constructor(){this.h=this.g=null}add(E,A){const N=nt.get();N.set(E,A),this.h?this.h.next=N:this.g=N,this.h=N}}var nt=new G(()=>new lt,f=>f.reset());class lt{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let bt,Tt=!1,k=new q,D=()=>{const f=Promise.resolve(void 0);bt=()=>{f.then(j)}};function j(){for(var f;f=$();){try{f.h.call(f.g)}catch(A){V(A)}var E=nt;E.j(f),E.h<100&&(E.h++,f.next=E.g,E.g=f)}Tt=!1}function K(){this.u=this.u,this.C=this.C}K.prototype.u=!1,K.prototype.dispose=function(){this.u||(this.u=!0,this.N())},K.prototype[Symbol.dispose]=function(){this.dispose()},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const A=()=>{};d.addEventListener("test",A,E),d.removeEventListener("test",A,E)}catch{}return f})();function B(f){return/^[\s\xa0]*$/.test(f)}function oe(f,E){F.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,E)}C(oe,F),oe.prototype.init=function(f,E){const A=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget,E||(A=="mouseover"?E=f.fromElement:A=="mouseout"&&(E=f.toElement)),this.relatedTarget=E,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Je="closure_listenable_"+(Math.random()*1e6|0),ot=0;function xt(f,E,A,N,J){this.listener=f,this.proxy=null,this.src=E,this.type=A,this.capture=!!N,this.ha=J,this.key=++ot,this.da=this.fa=!1}function gt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function te(f,E,A){for(const N in f)E.call(A,f[N],N,f)}function At(f,E){for(const A in f)E.call(void 0,f[A],A,f)}function H(f){const E={};for(const A in f)E[A]=f[A];return E}const ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _t(f,E){let A,N;for(let J=1;J<arguments.length;J++){N=arguments[J];for(A in N)f[A]=N[A];for(let st=0;st<ut.length;st++)A=ut[st],Object.prototype.hasOwnProperty.call(N,A)&&(f[A]=N[A])}}function yt(f){this.src=f,this.g={},this.h=0}yt.prototype.add=function(f,E,A,N,J){const st=f.toString();f=this.g[st],f||(f=this.g[st]=[],this.h++);const vt=wt(f,E,N,J);return vt>-1?(E=f[vt],A||(E.fa=!1)):(E=new xt(E,this.src,st,!!N,J),E.fa=A,f.push(E)),E};function St(f,E){const A=E.type;if(A in f.g){var N=f.g[A],J=Array.prototype.indexOf.call(N,E,void 0),st;(st=J>=0)&&Array.prototype.splice.call(N,J,1),st&&(gt(E),f.g[A].length==0&&(delete f.g[A],f.h--))}}function wt(f,E,A,N){for(let J=0;J<f.length;++J){const st=f[J];if(!st.da&&st.listener==E&&st.capture==!!A&&st.ha==N)return J}return-1}var Ft="closure_lm_"+(Math.random()*1e6|0),Ee={};function Ce(f,E,A,N,J){if(Array.isArray(E)){for(let st=0;st<E.length;st++)Ce(f,E[st],A,N,J);return null}return A=Ur(A),f&&f[Je]?f.J(E,A,y(N)?!!N.capture:!1,J):pr(f,E,A,!1,N,J)}function pr(f,E,A,N,J,st){if(!E)throw Error("Invalid event type");const vt=y(J)?!!J.capture:!!J;let Bt=Br(f);if(Bt||(f[Ft]=Bt=new yt(f)),A=Bt.add(E,A,N,vt,st),A.proxy)return A;if(N=zr(),A.proxy=N,N.src=f,N.listener=A,f.addEventListener)Y||(J=vt),J===void 0&&(J=!1),f.addEventListener(E.toString(),N,J);else if(f.attachEvent)f.attachEvent(Zi(E.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return A}function zr(){function f(A){return E.call(f.src,f.listener,A)}const E=oa;return f}function Gi(f,E,A,N,J){if(Array.isArray(E))for(var st=0;st<E.length;st++)Gi(f,E[st],A,N,J);else N=y(N)?!!N.capture:!!N,A=Ur(A),f&&f[Je]?(f=f.i,st=String(E).toString(),st in f.g&&(E=f.g[st],A=wt(E,A,N,J),A>-1&&(gt(E[A]),Array.prototype.splice.call(E,A,1),E.length==0&&(delete f.g[st],f.h--)))):f&&(f=Br(f))&&(E=f.g[E.toString()],f=-1,E&&(f=wt(E,A,N,J)),(A=f>-1?E[f]:null)&&Vr(A))}function Vr(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[Je])St(E.i,f);else{var A=f.type,N=f.proxy;E.removeEventListener?E.removeEventListener(A,N,f.capture):E.detachEvent?E.detachEvent(Zi(A),N):E.addListener&&E.removeListener&&E.removeListener(N),(A=Br(E))?(St(A,f),A.h==0&&(A.src=null,E[Ft]=null)):gt(f)}}}function Zi(f){return f in Ee?Ee[f]:Ee[f]="on"+f}function oa(f,E){if(f.da)f=!0;else{E=new oe(E,this);const A=f.listener,N=f.ha||f.src;f.fa&&Vr(f),f=A.call(N,E)}return f}function Br(f){return f=f[Ft],f instanceof yt?f:null}var ms="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ur(f){return typeof f=="function"?f:(f[ms]||(f[ms]=function(E){return f.handleEvent(E)}),f[ms])}function Ze(){K.call(this),this.i=new yt(this),this.M=this,this.G=null}C(Ze,K),Ze.prototype[Je]=!0,Ze.prototype.removeEventListener=function(f,E,A,N){Gi(this,f,E,A,N)};function We(f,E){var A,N=f.G;if(N)for(A=[];N;N=N.G)A.push(N);if(f=f.M,N=E.type||E,typeof E=="string")E=new F(E,f);else if(E instanceof F)E.target=E.target||f;else{var J=E;E=new F(N,f),_t(E,J)}J=!0;let st,vt;if(A)for(vt=A.length-1;vt>=0;vt--)st=E.g=A[vt],J=Wi(st,N,!0,E)&&J;if(st=E.g=f,J=Wi(st,N,!0,E)&&J,J=Wi(st,N,!1,E)&&J,A)for(vt=0;vt<A.length;vt++)st=E.g=A[vt],J=Wi(st,N,!1,E)&&J}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var f=this.i;for(const E in f.g){const A=f.g[E];for(let N=0;N<A.length;N++)gt(A[N]);delete f.g[E],f.h--}}this.G=null},Ze.prototype.J=function(f,E,A,N){return this.i.add(String(f),E,!1,A,N)},Ze.prototype.K=function(f,E,A,N){return this.i.add(String(f),E,!0,A,N)};function Wi(f,E,A,N){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();let J=!0;for(let st=0;st<E.length;++st){const vt=E[st];if(vt&&!vt.da&&vt.capture==A){const Bt=vt.listener,le=vt.ha||vt.src;vt.fa&&St(f.i,vt),J=Bt.call(le,N)!==!1&&J}}return J&&!N.defaultPrevented}function bl(f,E){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=b(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:d.setTimeout(f,E||0)}function vo(f){f.g=bl(()=>{f.g=null,f.i&&(f.i=!1,vo(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class Nn extends K{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:vo(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(f){K.call(this),this.h=f,this.g={}}C(gs,K);var _s=[];function la(f){te(f.g,function(E,A){this.g.hasOwnProperty(A)&&Vr(E)},f),f.g={}}gs.prototype.N=function(){gs.Z.N.call(this),la(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mr=d.JSON.stringify,zu=d.JSON.parse,xo=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function bo(){}function El(){}var ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){F.call(this,"d")}C(tn,F);function Kn(){F.call(this,"c")}C(Kn,F);var Be={},Fr=null;function ua(){return Fr=Fr||new Ze}Be.Ia="serverreachability";function Tl(f){F.call(this,Be.Ia,f)}C(Tl,F);function Ti(f){const E=ua();We(E,new Tl(E))}Be.STAT_EVENT="statevent";function Hr(f,E){F.call(this,Be.STAT_EVENT,f),this.stat=E}C(Hr,F);function Ue(f){const E=ua();We(E,new Hr(E,f))}Be.Ja="timingevent";function Ki(f,E){F.call(this,Be.Ja,f),this.size=E}C(Ki,F);function Yi(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},E)}function wi(){this.g=!0}wi.prototype.ua=function(){this.g=!1};function Vu(f,E,A,N,J,st){f.info(function(){if(f.g)if(st){var vt="",Bt=st.split("&");for(let ue=0;ue<Bt.length;ue++){var le=Bt[ue].split("=");if(le.length>1){const Ie=le[0];le=le[1];const ui=Ie.split("_");vt=ui.length>=2&&ui[1]=="type"?vt+(Ie+"="+le+"&"):vt+(Ie+"=redacted&")}}}else vt=null;else vt=st;return"XMLHTTP REQ ("+N+") [attempt "+J+"]: "+E+`
`+A+`
`+vt})}function wl(f,E,A,N,J,st,vt){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+J+"]: "+E+`
`+A+`
`+st+" "+vt})}function Qi(f,E,A,N){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+Bu(f,A)+(N?" "+N:"")})}function gr(f,E){f.info(function(){return"TIMEOUT: "+E})}wi.prototype.info=function(){};function Bu(f,E){if(!f.g)return E;if(!E)return null;try{const st=JSON.parse(E);if(st){for(f=0;f<st.length;f++)if(Array.isArray(st[f])){var A=st[f];if(!(A.length<2)){var N=A[1];if(Array.isArray(N)&&!(N.length<1)){var J=N[0];if(J!="noop"&&J!="stop"&&J!="close")for(let vt=1;vt<N.length;vt++)N[vt]=""}}}}return mr(st)}catch{return E}}var ys={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Eo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},To;function xn(){}C(xn,bo),xn.prototype.g=function(){return new XMLHttpRequest},To=new xn;function Pt(f){return encodeURIComponent(String(f))}function wo(f){var E=1;f=f.split(":");const A=[];for(;E>0&&f.length;)A.push(f.shift()),E--;return f.length&&A.push(f.join(":")),A}function ni(f,E,A,N){this.j=f,this.i=E,this.l=A,this.S=N||1,this.V=new gs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ii}function ii(){this.i=null,this.g="",this.h=!1}var Fe={},Ke={};function Si(f,E,A){f.M=1,f.A=ye(Le(E)),f.u=A,f.R=!0,Ai(f,null)}function Ai(f,E){f.F=Date.now(),Xi(f),f.B=Le(f.A);var A=f.B,N=f.S;Array.isArray(N)||(N=[String(N)]),Gr(A.i,"t",N),f.C=0,A=f.j.L,f.h=new ii,f.g=No(f.j,A?E:null,!f.u),f.P>0&&(f.O=new Nn(b(f.Y,f,f.g),f.P)),E=f.V,A=f.g,N=f.ba;var J="readystatechange";Array.isArray(J)||(J&&(_s[0]=J.toString()),J=_s);for(let st=0;st<J.length;st++){const vt=Ce(A,J[st],N||E.handleEvent,!1,E.h||E);if(!vt)break;E.g[vt.key]=vt}E=f.J?H(f.J):{},f.u?(f.v||(f.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,E)):(f.v="GET",f.g.ea(f.B,f.v,null,E)),Ti(),Vu(f.i,f.v,f.B,f.l,f.S,f.u)}ni.prototype.ba=function(f){f=f.target;const E=this.O;E&&Pi(f)==3?E.j():this.Y(f)},ni.prototype.Y=function(f){try{if(f==this.g)t:{const Bt=Pi(this.g),le=this.g.ya(),ue=this.g.ca();if(!(Bt<3)&&(Bt!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||Bt!=4||le==7||(le==8||ue<=0?Ti(3):Ti(2)),Ci(this);var E=this.g.ca();this.X=E;var A=Sl(this);if(this.o=E==200,wl(this.i,this.v,this.B,this.l,this.S,Bt,E),this.o){if(this.U&&!this.L){e:{if(this.g){var N,J=this.g;if((N=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(N)){var st=N;break e}}st=null}if(f=st)Qi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$i(this,f);else{this.o=!1,this.m=3,Ue(12),bn(this),ri(this);break t}}if(this.R){f=!0;let Ie;for(;!this.K&&this.C<A.length;)if(Ie=Cl(this,A),Ie==Ke){Bt==4&&(this.m=4,Ue(14),f=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ie==Fe){this.m=4,Ue(15),Qi(this.i,this.l,A,"[Invalid Chunk]"),f=!1;break}else Qi(this.i,this.l,Ie,null),$i(this,Ie);if(Al(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||A.length!=0||this.h.h||(this.m=1,Ue(16),f=!1),this.o=this.o&&f,!f)Qi(this.i,this.l,A,"[Invalid Chunked Response]"),bn(this),ri(this);else if(A.length>0&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.aa&&!vt.P&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),Io(vt),vt.P=!0,Ue(11))}}else Qi(this.i,this.l,A,null),$i(this,A);Bt==4&&bn(this),this.o&&!this.K&&(Bt==4?Xn(this.j,this):(this.o=!1,Xi(this)))}else Ni(this.g),E==400&&A.indexOf("Unknown SID")>0?(this.m=3,Ue(12)):(this.m=0,Ue(13)),bn(this),ri(this)}}}catch{}};function Sl(f){if(!Al(f))return f.g.la();const E=ln(f.g);if(E==="")return"";let A="";const N=E.length,J=Pi(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return bn(f),ri(f),"";f.h.i=new d.TextDecoder}for(let st=0;st<N;st++)f.h.h=!0,A+=f.h.i.decode(E[st],{stream:!(J&&st==N-1)});return E.length=0,f.h.g+=A,f.C=0,f.h.g}function Al(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Cl(f,E){var A=f.C,N=E.indexOf(`
`,A);return N==-1?Ke:(A=Number(E.substring(A,N)),isNaN(A)?Fe:(N+=1,N+A>E.length?Ke:(E=E.slice(N,N+A),f.C=N+A,E)))}ni.prototype.cancel=function(){this.K=!0,bn(this)};function Xi(f){f.T=Date.now()+f.H,ca(f,f.H)}function ca(f,E){if(f.D!=null)throw Error("WatchDog timer not null");f.D=Yi(b(f.aa,f),E)}function Ci(f){f.D&&(d.clearTimeout(f.D),f.D=null)}ni.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(gr(this.i,this.B),this.M!=2&&(Ti(),Ue(17)),bn(this),this.m=2,ri(this)):ca(this,this.T-f)};function ri(f){f.j.I==0||f.K||Xn(f.j,f)}function bn(f){Ci(f);var E=f.O;E&&typeof E.dispose=="function"&&E.dispose(),f.O=null,la(f.V),f.g&&(E=f.g,f.g=null,E.abort(),E.dispose())}function $i(f,E){try{var A=f.j;if(A.I!=0&&(A.g==f||si(A.h,f))){if(!f.L&&si(A.h,f)&&A.I==3){try{var N=A.Ba.g.parse(E)}catch{N=null}if(Array.isArray(N)&&N.length==3){var J=N;if(J[0]==0){t:if(!A.v){if(A.g)if(A.g.F+3e3<f.F)_a(A),Yr(A);else break t;ws(A),Ue(18)}}else A.xa=J[1],0<A.xa-A.K&&J[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=Yi(b(A.Va,A),6e3));Ji(A.h)<=1&&A.ta&&(A.ta=void 0)}else Di(A,11)}else if((f.L||A.g==f)&&_a(A),!B(E))for(J=A.Ba.g.parse(E),E=0;E<J.length;E++){let ue=J[E];const Ie=ue[0];if(!(Ie<=A.K))if(A.K=Ie,ue=ue[1],A.I==2)if(ue[0]=="c"){A.M=ue[1],A.ba=ue[2];const ui=ue[3];ui!=null&&(A.ka=ui,A.j.info("VER="+A.ka));const ci=ue[4];ci!=null&&(A.za=ci,A.j.info("SVER="+A.za));const $n=ue[5];$n!=null&&typeof $n=="number"&&$n>0&&(N=1.5*$n,A.O=N,A.j.info("backChannelRequestTimeoutMs_="+N)),N=A;const Oi=f.g;if(Oi){const Ss=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ss){var st=N.h;st.g||Ss.indexOf("spdy")==-1&&Ss.indexOf("quic")==-1&&Ss.indexOf("h2")==-1||(st.j=st.l,st.g=new Set,st.h&&(_r(st,st.h),st.h=null))}if(N.G){const As=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;As&&(N.wa=As,Rt(N.J,N.G,As))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-f.F,A.j.info("Handshake RTT: "+A.T+"ms")),N=A;var vt=f;if(N.na=Po(N,N.L?N.ba:null,N.W),vt.L){ha(N.h,vt);var Bt=vt,le=N.O;le&&(Bt.H=le),Bt.D&&(Ci(Bt),Xi(Bt)),N.g=vt}else Ro(N);A.i.length>0&&Bn(A)}else ue[0]!="stop"&&ue[0]!="close"||Di(A,7);else A.I==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Di(A,7):Kt(A):ue[0]!="noop"&&A.l&&A.l.qa(ue),A.A=0)}}Ti(4)}catch{}}var Ye=class{constructor(f,E){this.g=f,this.map=E}};function So(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ao(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ji(f){return f.h?1:f.g?f.g.size:0}function si(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function _r(f,E){f.g?f.g.add(E):f.h=E}function ha(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}So.prototype.cancel=function(){if(this.i=da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function da(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const A of f.g.values())E=E.concat(A.G);return E}return O(f.i)}var qr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yt(f,E){if(f){f=f.split("&");for(let A=0;A<f.length;A++){const N=f[A].indexOf("=");let J,st=null;N>=0?(J=f[A].substring(0,N),st=f[A].substring(N+1)):J=f[A],E(J,st?decodeURIComponent(st.replace(/\+/g," ")):"")}}}function Qt(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;f instanceof Qt?(this.l=f.l,Oe(this,f.j),this.o=f.o,this.g=f.g,Yn(this,f.u),this.h=f.h,vs(this,Es(f.i)),this.m=f.m):f&&(E=String(f).match(qr))?(this.l=!1,Oe(this,E[1]||"",!0),this.o=ai(E[2]||""),this.g=ai(E[3]||"",!0),Yn(this,E[4]),this.h=ai(E[5]||"",!0),vs(this,E[6]||"",!0),this.m=ai(E[7]||"")):(this.l=!1,this.i=new oi(null,this.l))}Qt.prototype.toString=function(){const f=[];var E=this.j;E&&f.push(tr(E,fa,!0),":");var A=this.g;return(A||E=="file")&&(f.push("//"),(E=this.o)&&f.push(tr(E,fa,!0),"@"),f.push(Pt(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&f.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(tr(A,A.charAt(0)=="/"?Ri:xs,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",tr(A,er)),f.join("")},Qt.prototype.resolve=function(f){const E=Le(this);let A=!!f.j;A?Oe(E,f.j):A=!!f.o,A?E.o=f.o:A=!!f.g,A?E.g=f.g:A=f.u!=null;var N=f.h;if(A)Yn(E,f.u);else if(A=!!f.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var J=E.h.lastIndexOf("/");J!=-1&&(N=E.h.slice(0,J+1)+N)}if(J=N,J==".."||J==".")N="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){N=J.lastIndexOf("/",0)==0,J=J.split("/");const st=[];for(let vt=0;vt<J.length;){const Bt=J[vt++];Bt=="."?N&&vt==J.length&&st.push(""):Bt==".."?((st.length>1||st.length==1&&st[0]!="")&&st.pop(),N&&vt==J.length&&st.push("")):(st.push(Bt),N=!0)}N=st.join("/")}else N=J}return A?E.h=N:A=f.i.toString()!=="",A?vs(E,Es(f.i)):A=!!f.m,A&&(E.m=f.m),E};function Le(f){return new Qt(f)}function Oe(f,E,A){f.j=A?ai(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function Yn(f,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);f.u=E}else f.u=null}function vs(f,E,A){E instanceof oi?(f.i=E,Zr(f.i,f.l)):(A||(E=tr(E,ve)),f.i=new oi(E,f.l))}function Rt(f,E,A){f.i.set(E,A)}function ye(f){return Rt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ai(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function tr(f,E,A){return typeof f=="string"?(f=encodeURI(f).replace(E,Re),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Re(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var fa=/[#\/\?@]/g,xs=/[#\?:]/g,Ri=/[#\?]/g,ve=/[#\?@]/g,er=/#/g;function oi(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function on(f){f.g||(f.g=new Map,f.h=0,f.i&&Yt(f.i,function(E,A){f.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}r=oi.prototype,r.add=function(f,E){on(this),this.i=null,f=nr(this,f);let A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(E),this.h+=1,this};function pa(f,E){on(f),E=nr(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function yr(f,E){return on(f),E=nr(f,E),f.g.has(E)}r.forEach=function(f,E){on(this),this.g.forEach(function(A,N){A.forEach(function(J){f.call(E,J,N,this)},this)},this)};function bs(f,E){on(f);let A=[];if(typeof E=="string")yr(f,E)&&(A=A.concat(f.g.get(nr(f,E))));else for(f=Array.from(f.g.values()),E=0;E<f.length;E++)A=A.concat(f[E]);return A}r.set=function(f,E){return on(this),this.i=null,f=nr(this,f),yr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},r.get=function(f,E){return f?(f=bs(this,f),f.length>0?String(f[0]):E):E};function Gr(f,E,A){pa(f,E),A.length>0&&(f.i=null,f.g.set(nr(f,E),O(A)),f.h+=A.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(let N=0;N<E.length;N++){var A=E[N];const J=Pt(A);A=bs(this,A);for(let st=0;st<A.length;st++){let vt=J;A[st]!==""&&(vt+="="+Pt(A[st])),f.push(vt)}}return this.i=f.join("&")};function Es(f){const E=new oi;return E.i=f.i,f.g&&(E.g=new Map(f.g),E.h=f.h),E}function nr(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function Zr(f,E){E&&!f.j&&(on(f),f.i=null,f.g.forEach(function(A,N){const J=N.toLowerCase();N!=J&&(pa(this,N),Gr(this,J,A))},f)),f.j=E}function jn(f,E){const A=new wi;if(d.Image){const N=new Image;N.onload=w(zn,A,"TestLoadImage: loaded",!0,E,N),N.onerror=w(zn,A,"TestLoadImage: error",!1,E,N),N.onabort=w(zn,A,"TestLoadImage: abort",!1,E,N),N.ontimeout=w(zn,A,"TestLoadImage: timeout",!1,E,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else E(!1)}function ma(f,E){const A=new wi,N=new AbortController,J=setTimeout(()=>{N.abort(),zn(A,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:N.signal}).then(st=>{clearTimeout(J),st.ok?zn(A,"TestPingServer: ok",!0,E):zn(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(J),zn(A,"TestPingServer: error",!1,E)})}function zn(f,E,A,N,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),N(A)}catch{}}function Wr(){this.g=new xo}function Mt(f){this.i=f.Sb||null,this.h=f.ab||!1}C(Mt,bo),Mt.prototype.g=function(){return new En(this.i,this.h)};function En(f,E){Ze.call(this),this.H=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(En,Ze),r=En.prototype,r.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=E,this.readyState=1,Qn(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(E.body=f),(this.H||d).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vr(this)),this.readyState=0},r.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;he(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function he(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}r.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?vr(this):Qn(this),this.readyState==3&&he(this)}},r.Oa=function(f){this.g&&(this.response=this.responseText=f,vr(this))},r.Na=function(f){this.g&&(this.response=f,vr(this))},r.ga=function(){this.g&&vr(this)};function vr(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Qn(f)}r.setRequestHeader=function(f,E){this.A.append(f,E)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=E.next();return f.join(`\r
`)};function Qn(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(En.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Vn(f){let E="";return te(f,function(A,N){E+=N,E+=":",E+=A,E+=`\r
`}),E}function xr(f,E,A){t:{for(N in A){var N=!1;break t}N=!0}N||(A=Vn(A),typeof f=="string"?A!=null&&Pt(A):Rt(f,E,A))}function ee(f){Ze.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(ee,Ze);var li=/^https?$/i,br=["POST","PUT"];r=ee.prototype,r.Fa=function(f){this.H=f},r.ea=function(f,E,A,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():To.g(),this.g.onreadystatechange=I(b(this.Ca,this));try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(st){ke(this,st);return}if(f=A||"",A=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var J in N)A.set(J,N[J]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const st of N.keys())A.set(st,N.get(st));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(A.keys()).find(st=>st.toLowerCase()=="content-type"),J=d.FormData&&f instanceof d.FormData,!(Array.prototype.indexOf.call(br,E,void 0)>=0)||N||J||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[st,vt]of A)this.g.setRequestHeader(st,vt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(st){ke(this,st)}};function ke(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.o=5,Ii(f),ir(f)}function Ii(f){f.A||(f.A=!0,We(f,"complete"),We(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,We(this,"complete"),We(this,"abort"),ir(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ir(this,!0)),ee.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},r.Xa=function(){Kr(this)};function Kr(f){if(f.h&&typeof h<"u"){if(f.v&&Pi(f)==4)setTimeout(f.Ca.bind(f),0);else if(We(f,"readystatechange"),Pi(f)==4){f.h=!1;try{const st=f.ca();t:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break t;default:E=!1}var A;if(!(A=E)){var N;if(N=st===0){let vt=String(f.D).match(qr)[1]||null;!vt&&d.self&&d.self.location&&(vt=d.self.location.protocol.slice(0,-1)),N=!li.test(vt?vt.toLowerCase():"")}A=N}if(A)We(f,"complete"),We(f,"success");else{f.o=6;try{var J=Pi(f)>2?f.g.statusText:""}catch{J=""}f.l=J+" ["+f.ca()+"]",Ii(f)}}finally{ir(f)}}}}function ir(f,E){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const A=f.g;f.g=null,E||We(f,"ready");try{A.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Pi(f){return f.g?f.g.readyState:0}r.ca=function(){try{return Pi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),zu(E)}};function ln(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ni(f){const E={};f=(f.g&&Pi(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(B(f[N]))continue;var A=wo(f[N]);const J=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const st=E[J]||[];E[J]=st,st.push(A)}At(E,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(f,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||E}function Er(f){this.za=0,this.i=[],this.j=new wi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rr("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rr("baseRetryDelayMs",5e3,f),this.Za=rr("retryDelaySeedMs",1e4,f),this.Ta=rr("forwardChannelMaxRetries",2,f),this.va=rr("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new So(f&&f.concurrentRequestLimit),this.Ba=new Wr,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Er.prototype,r.ka=8,r.I=1,r.connect=function(f,E,A,N){Ue(0),this.W=f,this.H=E||{},A&&N!==void 0&&(this.H.OSID=A,this.H.OAID=N),this.F=this.X,this.J=Po(this,null,this.W),Bn(this)};function Kt(f){if(Tn(f),f.I==3){var E=f.V++,A=Le(f.J);if(Rt(A,"SID",f.M),Rt(A,"RID",E),Rt(A,"TYPE","terminate"),Tr(f,A),E=new ni(f,f.j,E),E.M=2,E.A=ye(Le(A)),A=!1,d.navigator&&d.navigator.sendBeacon)try{A=d.navigator.sendBeacon(E.A.toString(),"")}catch{}!A&&d.Image&&(new Image().src=E.A,A=!0),A||(E.g=No(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Xi(E)}Li(f)}function Yr(f){f.g&&(Io(f),f.g.cancel(),f.g=null)}function Tn(f){Yr(f),f.v&&(d.clearTimeout(f.v),f.v=null),_a(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&d.clearTimeout(f.m),f.m=null)}function Bn(f){if(!Ao(f.h)&&!f.m){f.m=!0;var E=f.Ea;bt||D(),Tt||(bt(),Tt=!0),k.add(E,f),f.D=0}}function Ts(f,E){return Ji(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=E.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=Yi(b(f.Ea,f,E),Il(f,f.D)),f.D++,!0)}r.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const J=new ni(this,this.j,f);let st=this.o;if(this.U&&(st?(st=H(st),_t(st,this.U)):st=this.U),this.u!==null||this.R||(J.J=st,st=null),this.S)t:{for(var E=0,A=0;A<this.i.length;A++){e:{var N=this.i[A];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break e}N=void 0}if(N===void 0)break;if(E+=N,E>4096){E=A;break t}if(E===4096||A===this.i.length-1){E=A+1;break t}}E=1e3}else E=1e3;E=Rl(this,J,E),A=Le(this.J),Rt(A,"RID",f),Rt(A,"CVER",22),this.G&&Rt(A,"X-HTTP-Session-Id",this.G),Tr(this,A),st&&(this.R?E="headers="+Pt(Vn(st))+"&"+E:this.u&&xr(A,this.u,st)),_r(this.h,J),this.Ra&&Rt(A,"TYPE","init"),this.S?(Rt(A,"$req",E),Rt(A,"SID","null"),J.U=!0,Si(J,A,null)):Si(J,A,E),this.I=2}}else this.I==3&&(f?Co(this,f):this.i.length==0||Ao(this.h)||Co(this))};function Co(f,E){var A;E?A=E.l:A=f.V++;const N=Le(f.J);Rt(N,"SID",f.M),Rt(N,"RID",A),Rt(N,"AID",f.K),Tr(f,N),f.u&&f.o&&xr(N,f.u,f.o),A=new ni(f,f.j,A,f.D+1),f.u===null&&(A.J=f.o),E&&(f.i=E.G.concat(f.i)),E=Rl(f,A,1e3),A.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),_r(f.h,A),Si(A,N,E)}function Tr(f,E){f.H&&te(f.H,function(A,N){Rt(E,N,A)}),f.l&&te({},function(A,N){Rt(E,N,A)})}function Rl(f,E,A){A=Math.min(f.i.length,A);const N=f.l?b(f.l.Ka,f.l,f):null;t:{var J=f.i;let Bt=-1;for(;;){const le=["count="+A];Bt==-1?A>0?(Bt=J[0].g,le.push("ofs="+Bt)):Bt=0:le.push("ofs="+Bt);let ue=!0;for(let Ie=0;Ie<A;Ie++){var st=J[Ie].g;const ui=J[Ie].map;if(st-=Bt,st<0)Bt=Math.max(0,J[Ie].g-100),ue=!1;else try{st="req"+st+"_"||"";try{var vt=ui instanceof Map?ui:Object.entries(ui);for(const[ci,$n]of vt){let Oi=$n;y($n)&&(Oi=mr($n)),le.push(st+ci+"="+encodeURIComponent(Oi))}}catch(ci){throw le.push(st+"type="+encodeURIComponent("_badmap")),ci}}catch{N&&N(ui)}}if(ue){vt=le.join("&");break t}}vt=void 0}return f=f.i.splice(0,A),E.G=f,vt}function Ro(f){if(!f.g&&!f.v){f.Y=1;var E=f.Da;bt||D(),Tt||(bt(),Tt=!0),k.add(E,f),f.A=0}}function ws(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=Yi(b(f.Da,f),Il(f,f.A)),f.A++,!0)}r.Da=function(){if(this.v=null,ga(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=Yi(b(this.Wa,this),f)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ue(10),Yr(this),ga(this))};function Io(f){f.B!=null&&(d.clearTimeout(f.B),f.B=null)}function ga(f){f.g=new ni(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var E=Le(f.na);Rt(E,"RID","rpc"),Rt(E,"SID",f.M),Rt(E,"AID",f.K),Rt(E,"CI",f.F?"0":"1"),!f.F&&f.ia&&Rt(E,"TO",f.ia),Rt(E,"TYPE","xmlhttp"),Tr(f,E),f.u&&f.o&&xr(E,f.u,f.o),f.O&&(f.g.H=f.O);var A=f.g;f=f.ba,A.M=1,A.A=ye(Le(E)),A.u=null,A.R=!0,Ai(A,f)}r.Va=function(){this.C!=null&&(this.C=null,Yr(this),ws(this),Ue(19))};function _a(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function Xn(f,E){var A=null;if(f.g==E){_a(f),Io(f),f.g=null;var N=2}else if(si(f.h,E))A=E.G,ha(f.h,E),N=1;else return;if(f.I!=0){if(E.o)if(N==1){A=E.u?E.u.length:0,E=Date.now()-E.F;var J=f.D;N=ua(),We(N,new Ki(N,A)),Bn(f)}else Ro(f);else if(J=E.m,J==3||J==0&&E.X>0||!(N==1&&Ts(f,E)||N==2&&ws(f)))switch(A&&A.length>0&&(E=f.h,E.i=E.i.concat(A)),J){case 1:Di(f,5);break;case 4:Di(f,10);break;case 3:Di(f,6);break;default:Di(f,2)}}}function Il(f,E){let A=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(A*=2),A*E}function Di(f,E){if(f.j.info("Error code "+E),E==2){var A=b(f.bb,f),N=f.Ua;const J=!N;N=new Qt(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Oe(N,"https"),ye(N),J?jn(N.toString(),A):ma(N.toString(),A)}else Ue(2);f.I=0,f.l&&f.l.pa(E),Li(f),Tn(f)}r.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function Li(f){if(f.I=0,f.ja=[],f.l){const E=da(f.h);(E.length!=0||f.i.length!=0)&&(Z(f.ja,E),Z(f.ja,f.i),f.h.i.length=0,O(f.i),f.i.length=0),f.l.oa()}}function Po(f,E,A){var N=A instanceof Qt?Le(A):new Qt(A);if(N.g!="")E&&(N.g=E+"."+N.g),Yn(N,N.u);else{var J=d.location;N=J.protocol,E=E?E+"."+J.hostname:J.hostname,J=+J.port;const st=new Qt(null);N&&Oe(st,N),E&&(st.g=E),J&&Yn(st,J),A&&(st.h=A),N=st}return A=f.G,E=f.wa,A&&E&&Rt(N,A,E),Rt(N,"VER",f.ka),Tr(f,N),N}function No(f,E,A){if(E&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Aa&&!f.ma?new ee(new Mt({ab:A})):new ee(f.ma),E.Fa(f.L),E}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ya(){}r=ya.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Qr(){}Qr.prototype.g=function(f,E){return new wn(f,E)};function wn(f,E){Ze.call(this),this.g=new Er(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(f?f["X-WebChannel-Client-Profile"]=E.sa:f={"X-WebChannel-Client-Profile":E.sa}),this.g.U=f,(f=E&&E.Qb)&&!B(f)&&(this.g.u=f),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!B(E)&&(this.g.G=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new wr(this)}C(wn,Ze),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Kt(this.g)},wn.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.v&&(A={},A.__data__=mr(f),f=A);E.i.push(new Ye(E.Ya++,f)),E.I==3&&Bn(E)},wn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,wn.Z.N.call(this)};function Do(f){tn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){t:{for(const A in E){f=A;break t}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}C(Do,tn);function Pl(){Kn.call(this),this.status=1}C(Pl,Kn);function wr(f){this.g=f}C(wr,ya),wr.prototype.ra=function(){We(this.g,"a")},wr.prototype.qa=function(f){We(this.g,new Do(f))},wr.prototype.pa=function(f){We(this.g,new Pl)},wr.prototype.oa=function(){We(this.g,"b")},Qr.prototype.createWebChannel=Qr.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,GE=function(){return new Qr},qE=function(){return ua()},HE=Be,eg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,Dd=ys,Eo.COMPLETE="complete",FE=Eo,El.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Rc=El,ee.prototype.listenOnce=ee.prototype.K,ee.prototype.getLastError=ee.prototype.Ha,ee.prototype.getLastErrorCode=ee.prototype.ya,ee.prototype.getStatus=ee.prototype.ca,ee.prototype.getResponseJson=ee.prototype.La,ee.prototype.getResponseText=ee.prototype.la,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Fa,UE=ee}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});const _x="@firebase/firestore",yx="4.9.3";class Gn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");let Du="12.7.0";const cl=new Pg("@firebase/firestore");function lu(){return cl.logLevel}function It(r,...t){if(cl.logLevel<=re.DEBUG){const n=t.map(Ug);cl.debug(`Firestore (${Du}): ${r}`,...n)}}function Js(r,...t){if(cl.logLevel<=re.ERROR){const n=t.map(Ug);cl.error(`Firestore (${Du}): ${r}`,...n)}}function hl(r,...t){if(cl.logLevel<=re.WARN){const n=t.map(Ug);cl.warn(`Firestore (${Du}): ${r}`,...n)}}function Ug(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Vt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,ZE(r,s,n)}function ZE(r,t,n){let s=`FIRESTORE (${Du}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Js(s),new Error(s)}function _e(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||ZE(t,l,s)}function qt(r,t){return r}const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends ia{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ws{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class WE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class KE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Gn.UNAUTHENTICATED)))}shutdown(){}}class zI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class VI{constructor(t){this.t=t,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){_e(this.o===void 0,42304);let s=this.i;const l=v=>this.i!==s?(s=this.i,n(v)):Promise.resolve();let h=new Ws;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ws,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const v=h;t.enqueueRetryable((async()=>{await v.promise,await l(this.currentUser)}))},y=v=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>y(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?y(v):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ws)}}),0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(_e(typeof s.accessToken=="string",31837,{l:s}),new WE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _e(t===null||typeof t=="string",2055,{h:t}),new Gn(t)}}class BI{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UI{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new BI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fr(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){_e(this.o===void 0,3512);const s=h=>{h.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,It("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable((()=>s(h)))};const l=h=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>l(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function HI(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class df{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=HI(40);for(let h=0;h<l.length;++h)s.length<20&&l[h]<n&&(s+=t.charAt(l[h]%62))}return s}}function se(r,t){return r<t?-1:r>t?1:0}function ng(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),h=t.charAt(s);if(l!==h)return Mm(l)===Mm(h)?se(l,h):Mm(l)?1:-1}return se(r.length,t.length)}const qI=55296,GI=57343;function Mm(r){const t=r.charCodeAt(0);return t>=qI&&t<=GI}function vu(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}const xx="__name__";class ls{constructor(t,n,s){n===void 0?n=0:n>t.length&&Vt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Vt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ls.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ls?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const h=ls.compareSegments(t.get(l),n.get(l));if(h!==0)return h}return se(t.length,n.length)}static compareSegments(t,n){const s=ls.isNumericId(t),l=ls.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ls.extractNumericId(t).compare(ls.extractNumericId(n)):ng(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return so.fromString(t.substring(4,t.length-2))}}class Ne extends ls{construct(t,n,s){return new Ne(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new Ct(dt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new Ne(n)}static emptyPath(){return new Ne([])}}const ZI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends ls{construct(t,n,s){return new In(t,n,s)}static isValidIdentifier(t){return ZI.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xx}static keyField(){return new In([xx])}static fromServerFormat(t){const n=[];let s="",l=0;const h=()=>{if(s.length===0)throw new Ct(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const y=t[l];if(y==="\\"){if(l+1===t.length)throw new Ct(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[l+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ct(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=v,l+=2}else y==="`"?(d=!d,l++):y!=="."||d?(s+=y,l++):(h(),l++)}if(h(),d)throw new Ct(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new In(n)}static emptyPath(){return new In([])}}class Ot{constructor(t){this.path=t}static fromPath(t){return new Ot(Ne.fromString(t))}static fromName(t){return new Ot(Ne.fromString(t).popFirst(5))}static empty(){return new Ot(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ne.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ne.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ot(new Ne(t.slice()))}}function YE(r,t,n){if(!n)throw new Ct(dt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function QE(r,t,n,s){if(t===!0&&s===!0)throw new Ct(dt.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function bx(r){if(!Ot.isDocumentKey(r))throw new Ct(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ex(r){if(Ot.isDocumentKey(r))throw new Ct(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function XE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ff(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Vt(12329,{type:typeof r})}function bi(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new Ct(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ff(r);throw new Ct(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}function mn(r,t){const n={typeString:r};return t&&(n.value=t),n}function ih(r,t){if(!XE(r))throw new Ct(dt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,h="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(h!==void 0&&d!==h.value){n=`Expected '${s}' field to equal '${h.value}'`;break}}if(n)throw new Ct(dt.INVALID_ARGUMENT,n);return!0}const Tx=-62135596800,wx=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(t){return De.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*wx);return new De(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ct(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ct(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Tx)throw new Ct(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ct(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wx}_compareTo(t){return this.seconds===t.seconds?se(this.nanoseconds,t.nanoseconds):se(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ih(t,De._jsonSchema))return new De(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Tx;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:mn("string",De._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};class Ut{static fromTimestamp(t){return new Ut(t)}static min(){return new Ut(new De(0,0))}static max(){return new Ut(new De(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Hc=-1;function WI(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Ut.fromTimestamp(s===1e9?new De(n+1,0):new De(n,s));return new lo(l,Ot.empty(),t)}function KI(r){return new lo(r.readTime,r.key,Hc)}class lo{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new lo(Ut.min(),Ot.empty(),Hc)}static max(){return new lo(Ut.max(),Ot.empty(),Hc)}}function YI(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=Ot.comparator(r.documentKey,t.documentKey),n!==0?n:se(r.largestBatchId,t.largestBatchId))}const QI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Lu(r){if(r.code!==dt.FAILED_PRECONDITION||r.message!==QI)throw r;It("LocalStore","Unexpectedly lost primary lease")}class mt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new mt(((s,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(s,l)},this.catchCallback=h=>{this.wrapFailure(n,h).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof mt?n:mt.resolve(n)}catch(n){return mt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):mt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):mt.reject(n)}static resolve(t){return new mt(((n,s)=>{n(t)}))}static reject(t){return new mt(((n,s)=>{s(t)}))}static waitFor(t){return new mt(((n,s)=>{let l=0,h=0,d=!1;t.forEach((y=>{++l,y.next((()=>{++h,d&&h===l&&n()}),(v=>s(v)))})),d=!0,h===l&&n()}))}static or(t){let n=mt.resolve(!1);for(const s of t)n=n.next((l=>l?mt.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,h)=>{s.push(n.call(this,l,h))})),this.waitFor(s)}static mapArray(t,n){return new mt(((s,l)=>{const h=t.length,d=new Array(h);let y=0;for(let v=0;v<h;v++){const b=v;n(t[b]).next((w=>{d[b]=w,++y,y===h&&s(d)}),(w=>l(w)))}}))}static doWhile(t,n){return new mt(((s,l)=>{const h=()=>{t()===!0?n().next((()=>{h()}),l):s()};h()}))}}function $I(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ou(r){return r.name==="IndexedDbTransactionError"}class pf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}pf.ce=-1;const Fg=-1;function mf(r){return r==null}function Wd(r){return r===0&&1/r==-1/0}function JI(r){return typeof r=="number"&&Number.isInteger(r)&&!Wd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const $E="";function tP(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Sx(t)),t=eP(r.get(n),t);return Sx(t)}function eP(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const h=r.charAt(l);switch(h){case"\0":n+="";break;case $E:n+="";break;default:n+=h}}return n}function Sx(r){return r+$E+""}function Ax(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function go(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function JE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class Ge{constructor(t,n){this.comparator=t,this.root=n||kn.EMPTY}insert(t,n){return new Ge(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(t){return new Ge(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new xd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new xd(this.root,t,this.comparator,!1)}getReverseIterator(){return new xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new xd(this.root,t,this.comparator,!0)}}class xd{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=n?s(t.key,n):1,n&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class kn{constructor(t,n,s,l,h){this.key=t,this.value=n,this.color=s??kn.RED,this.left=l??kn.EMPTY,this.right=h??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,h){return new kn(t??this.key,n??this.value,s??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const h=s(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,n,s),null):h===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return kn.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Vt(27949);return t+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt(57766)}get value(){throw Vt(16141)}get color(){throw Vt(16727)}get left(){throw Vt(29726)}get right(){throw Vt(36894)}copy(t,n,s,l,h){return this}insert(t,n,s){return new kn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(t){this.comparator=t,this.data=new Ge(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cx(this.data.getIterator())}getIteratorFrom(t){return new Cx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof vn)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=s.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new vn(this.comparator);return n.data=t,n}}class Cx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fi{constructor(t){this.fields=t,t.sort(In.comparator)}static empty(){return new Fi([])}unionWith(t){let n=new vn(In.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Fi(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return vu(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}class tT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new tT("Invalid base64 string: "+h):h}})(t);return new Pn(n)}static fromUint8Array(t){const n=(function(l){let h="";for(let d=0;d<l.length;++d)h+=String.fromCharCode(l[d]);return h})(t);return new Pn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return se(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const nP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(r){if(_e(!!r,39018),typeof r=="string"){let t=0;const n=nP.exec(r);if(_e(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:sn(r.seconds),nanos:sn(r.nanos)}}function sn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function co(r){return typeof r=="string"?Pn.fromBase64String(r):Pn.fromUint8Array(r)}const eT="server_timestamp",nT="__type__",iT="__previous_value__",rT="__local_write_time__";function Hg(r){return(r?.mapValue?.fields||{})[nT]?.stringValue===eT}function gf(r){const t=r.mapValue.fields[iT];return Hg(t)?gf(t):t}function qc(r){const t=uo(r.mapValue.fields[rT].timestampValue);return new De(t.seconds,t.nanos)}class iP{constructor(t,n,s,l,h,d,y,v,b,w){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=v,this.useFetchStreams=b,this.isUsingEmulator=w}}const Kd="(default)";class xu{constructor(t,n){this.projectId=t,this.database=n||Kd}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database===Kd}isEqual(t){return t instanceof xu&&t.projectId===this.projectId&&t.database===this.database}}const sT="__type__",rP="__max__",bd={mapValue:{}},aT="__vector__",Yd="value";function ho(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Hg(r)?4:aP(r)?9007199254740991:sP(r)?10:11:Vt(28295,{value:r})}function fs(r,t){if(r===t)return!0;const n=ho(r);if(n!==ho(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return qc(r).isEqual(qc(t));case 3:return(function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const d=uo(l.timestampValue),y=uo(h.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,h){return co(l.bytesValue).isEqual(co(h.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,h){return sn(l.geoPointValue.latitude)===sn(h.geoPointValue.latitude)&&sn(l.geoPointValue.longitude)===sn(h.geoPointValue.longitude)})(r,t);case 2:return(function(l,h){if("integerValue"in l&&"integerValue"in h)return sn(l.integerValue)===sn(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const d=sn(l.doubleValue),y=sn(h.doubleValue);return d===y?Wd(d)===Wd(y):isNaN(d)&&isNaN(y)}return!1})(r,t);case 9:return vu(r.arrayValue.values||[],t.arrayValue.values||[],fs);case 10:case 11:return(function(l,h){const d=l.mapValue.fields||{},y=h.mapValue.fields||{};if(Ax(d)!==Ax(y))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(y[v]===void 0||!fs(d[v],y[v])))return!1;return!0})(r,t);default:return Vt(52216,{left:r})}}function Gc(r,t){return(r.values||[]).find((n=>fs(n,t)))!==void 0}function bu(r,t){if(r===t)return 0;const n=ho(r),s=ho(t);if(n!==s)return se(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(r.booleanValue,t.booleanValue);case 2:return(function(h,d){const y=sn(h.integerValue||h.doubleValue),v=sn(d.integerValue||d.doubleValue);return y<v?-1:y>v?1:y===v?0:isNaN(y)?isNaN(v)?0:-1:1})(r,t);case 3:return Rx(r.timestampValue,t.timestampValue);case 4:return Rx(qc(r),qc(t));case 5:return ng(r.stringValue,t.stringValue);case 6:return(function(h,d){const y=co(h),v=co(d);return y.compareTo(v)})(r.bytesValue,t.bytesValue);case 7:return(function(h,d){const y=h.split("/"),v=d.split("/");for(let b=0;b<y.length&&b<v.length;b++){const w=se(y[b],v[b]);if(w!==0)return w}return se(y.length,v.length)})(r.referenceValue,t.referenceValue);case 8:return(function(h,d){const y=se(sn(h.latitude),sn(d.latitude));return y!==0?y:se(sn(h.longitude),sn(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Ix(r.arrayValue,t.arrayValue);case 10:return(function(h,d){const y=h.fields||{},v=d.fields||{},b=y[Yd]?.arrayValue,w=v[Yd]?.arrayValue,C=se(b?.values?.length||0,w?.values?.length||0);return C!==0?C:Ix(b,w)})(r.mapValue,t.mapValue);case 11:return(function(h,d){if(h===bd.mapValue&&d===bd.mapValue)return 0;if(h===bd.mapValue)return 1;if(d===bd.mapValue)return-1;const y=h.fields||{},v=Object.keys(y),b=d.fields||{},w=Object.keys(b);v.sort(),w.sort();for(let C=0;C<v.length&&C<w.length;++C){const I=ng(v[C],w[C]);if(I!==0)return I;const O=bu(y[v[C]],b[w[C]]);if(O!==0)return O}return se(v.length,w.length)})(r.mapValue,t.mapValue);default:throw Vt(23264,{he:n})}}function Rx(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return se(r,t);const n=uo(r),s=uo(t),l=se(n.seconds,s.seconds);return l!==0?l:se(n.nanos,s.nanos)}function Ix(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const h=bu(n[l],s[l]);if(h)return h}return se(n.length,s.length)}function Eu(r){return ig(r)}function ig(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=uo(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return co(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Ot.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const h of n.values||[])l?l=!1:s+=",",s+=ig(h);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",h=!0;for(const d of s)h?h=!1:l+=",",l+=`${d}:${ig(n.fields[d])}`;return l+"}"})(r.mapValue):Vt(61005,{value:r})}function Ld(r){switch(ho(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=gf(r);return t?16+Ld(t):16;case 5:return 2*r.stringValue.length;case 6:return co(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,h)=>l+Ld(h)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return go(s.fields,((h,d)=>{l+=h.length+Ld(d)})),l})(r.mapValue);default:throw Vt(13486,{value:r})}}function Px(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function rg(r){return!!r&&"integerValue"in r}function qg(r){return!!r&&"arrayValue"in r}function Nx(r){return!!r&&"nullValue"in r}function Dx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Od(r){return!!r&&"mapValue"in r}function sP(r){return(r?.mapValue?.fields||{})[sT]?.stringValue===aT}function Oc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return go(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Oc(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Oc(r.arrayValue.values[n]);return t}return{...r}}function aP(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===rP}class xi{constructor(t){this.value=t}static empty(){return new xi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Od(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Oc(n)}setAll(t){let n=In.emptyPath(),s={},l=[];t.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const v=this.getFieldsMap(n);this.applyChanges(v,s,l),s={},l=[],n=y.popLast()}d?s[y.lastSegment()]=Oc(d):l.push(y.lastSegment())}));const h=this.getFieldsMap(n);this.applyChanges(h,s,l)}delete(t){const n=this.field(t.popLast());Od(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return fs(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Od(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){go(n,((l,h)=>t[l]=h));for(const l of s)delete t[l]}clone(){return new xi(Oc(this.value))}}function oT(r){const t=[];return go(r.fields,((n,s)=>{const l=new In([n]);if(Od(s)){const h=oT(s.mapValue).fields;if(h.length===0)t.push(l);else for(const d of h)t.push(l.child(d))}else t.push(l)})),new Fi(t)}class Zn{constructor(t,n,s,l,h,d,y){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=h,this.data=d,this.documentState=y}static newInvalidDocument(t){return new Zn(t,0,Ut.min(),Ut.min(),Ut.min(),xi.empty(),0)}static newFoundDocument(t,n,s,l){return new Zn(t,1,n,Ut.min(),s,l,0)}static newNoDocument(t,n){return new Zn(t,2,n,Ut.min(),Ut.min(),xi.empty(),0)}static newUnknownDocument(t,n){return new Zn(t,3,n,Ut.min(),Ut.min(),xi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Zn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qd{constructor(t,n){this.position=t,this.inclusive=n}}function Lx(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const h=t[l],d=r.position[l];if(h.field.isKeyField()?s=Ot.comparator(Ot.fromName(d.referenceValue),n.key):s=bu(d,n.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ox(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!fs(r.position[n],t.position[n]))return!1;return!0}class Zc{constructor(t,n="asc"){this.field=t,this.dir=n}}function oP(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class lT{}class pn extends lT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new uP(t,n,s):n==="array-contains"?new dP(t,s):n==="in"?new fP(t,s):n==="not-in"?new pP(t,s):n==="array-contains-any"?new mP(t,s):new pn(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new cP(t,s):new hP(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bu(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(bu(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends lT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Mr(t,n)}matches(t){return uT(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uT(r){return r.op==="and"}function cT(r){return lP(r)&&uT(r)}function lP(r){for(const t of r.filters)if(t instanceof Mr)return!1;return!0}function sg(r){if(r instanceof pn)return r.field.canonicalString()+r.op.toString()+Eu(r.value);if(cT(r))return r.filters.map((t=>sg(t))).join(",");{const t=r.filters.map((n=>sg(n))).join(",");return`${r.op}(${t})`}}function hT(r,t){return r instanceof pn?(function(s,l){return l instanceof pn&&s.op===l.op&&s.field.isEqual(l.field)&&fs(s.value,l.value)})(r,t):r instanceof Mr?(function(s,l){return l instanceof Mr&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((h,d,y)=>h&&hT(d,l.filters[y])),!0):!1})(r,t):void Vt(19439)}function dT(r){return r instanceof pn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Eu(n.value)}`})(r):r instanceof Mr?(function(n){return n.op.toString()+" {"+n.getFilters().map(dT).join(" ,")+"}"})(r):"Filter"}class uP extends pn{constructor(t,n,s){super(t,n,s),this.key=Ot.fromName(s.referenceValue)}matches(t){const n=Ot.comparator(t.key,this.key);return this.matchesComparison(n)}}class cP extends pn{constructor(t,n){super(t,"in",n),this.keys=fT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class hP extends pn{constructor(t,n){super(t,"not-in",n),this.keys=fT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function fT(r,t){return(t.arrayValue?.values||[]).map((n=>Ot.fromName(n.referenceValue)))}class dP extends pn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return qg(n)&&Gc(n.arrayValue,this.value)}}class fP extends pn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Gc(this.value.arrayValue,n)}}class pP extends pn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gc(this.value.arrayValue,n)}}class mP extends pn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!qg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Gc(this.value.arrayValue,s)))}}class gP{constructor(t,n=null,s=[],l=[],h=null,d=null,y=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=h,this.startAt=d,this.endAt=y,this.Te=null}}function kx(r,t=null,n=[],s=[],l=null,h=null,d=null){return new gP(r,t,n,s,l,h,d)}function Gg(r){const t=qt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>sg(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(h){return h.field.canonicalString()+h.dir})(s))).join(","),mf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Eu(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Eu(s))).join(",")),t.Te=n}return t.Te}function Zg(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!oP(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!hT(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Ox(r.startAt,t.startAt)&&Ox(r.endAt,t.endAt)}function ag(r){return Ot.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class ku{constructor(t,n=null,s=[],l=[],h=null,d="F",y=null,v=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=h,this.limitType=d,this.startAt=y,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _P(r,t,n,s,l,h,d,y){return new ku(r,t,n,s,l,h,d,y)}function _f(r){return new ku(r)}function Mx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function pT(r){return r.collectionGroup!==null}function kc(r){const t=qt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),n.add(h.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new vn(In.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((b=>{b.isInequality()&&(y=y.add(b.field))}))})),y})(t).forEach((h=>{n.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new Zc(h,s))})),n.has(In.keyField().canonicalString())||t.Ie.push(new Zc(In.keyField(),s))}return t.Ie}function hs(r){const t=qt(r);return t.Ee||(t.Ee=yP(t,kc(r))),t.Ee}function yP(r,t){if(r.limitType==="F")return kx(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const h=l.dir==="desc"?"asc":"desc";return new Zc(l.field,h)}));const n=r.endAt?new Qd(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Qd(r.startAt.position,r.startAt.inclusive):null;return kx(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function og(r,t){const n=r.filters.concat([t]);return new ku(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function lg(r,t,n){return new ku(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function yf(r,t){return Zg(hs(r),hs(t))&&r.limitType===t.limitType}function mT(r){return`${Gg(hs(r))}|lt:${r.limitType}`}function uu(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>dT(l))).join(", ")}]`),mf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Eu(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Eu(l))).join(",")),`Target(${s})`})(hs(r))}; limitType=${r.limitType})`}function vf(r,t){return t.isFoundDocument()&&(function(s,l){const h=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):Ot.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)})(r,t)&&(function(s,l){for(const h of kc(s))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const h of s.filters)if(!h.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(d,y,v){const b=Lx(d,y,v);return d.inclusive?b<=0:b<0})(s.startAt,kc(s),l)||s.endAt&&!(function(d,y,v){const b=Lx(d,y,v);return d.inclusive?b>=0:b>0})(s.endAt,kc(s),l))})(r,t)}function vP(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function gT(r){return(t,n)=>{let s=!1;for(const l of kc(r)){const h=xP(l,t,n);if(h!==0)return h;s=s||l.field.isKeyField()}return 0}}function xP(r,t,n){const s=r.field.isKeyField()?Ot.comparator(t.key,n.key):(function(h,d,y){const v=d.data.field(h),b=y.data.field(h);return v!==null&&b!==null?bu(v,b):Vt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Vt(19790,{direction:r.dir})}}class gl{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,h]of s)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){go(this.inner,((n,s)=>{for(const[l,h]of s)t(l,h)}))}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}const bP=new Ge(Ot.comparator);function ta(){return bP}const _T=new Ge(Ot.comparator);function Ic(...r){let t=_T;for(const n of r)t=t.insert(n.key,n);return t}function yT(r){let t=_T;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function al(){return Mc()}function vT(){return Mc()}function Mc(){return new gl((r=>r.toString()),((r,t)=>r.isEqual(t)))}const EP=new Ge(Ot.comparator),TP=new vn(Ot.comparator);function ae(...r){let t=TP;for(const n of r)t=t.add(n);return t}const wP=new vn(se);function SP(){return wP}function Wg(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wd(t)?"-0":t}}function xT(r){return{integerValue:""+r}}function bT(r,t){return JI(t)?xT(t):Wg(r,t)}class xf{constructor(){this._=void 0}}function AP(r,t,n){return r instanceof Wc?(function(l,h){const d={fields:{[nT]:{stringValue:eT},[rT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&Hg(h)&&(h=gf(h)),h&&(d.fields[iT]=h),{mapValue:d}})(n,t):r instanceof Tu?TT(r,t):r instanceof wu?wT(r,t):(function(l,h){const d=ET(l,h),y=jx(d)+jx(l.Ae);return rg(d)&&rg(l.Ae)?xT(y):Wg(l.serializer,y)})(r,t)}function CP(r,t,n){return r instanceof Tu?TT(r,t):r instanceof wu?wT(r,t):n}function ET(r,t){return r instanceof Kc?(function(s){return rg(s)||(function(h){return!!h&&"doubleValue"in h})(s)})(t)?t:{integerValue:0}:null}class Wc extends xf{}class Tu extends xf{constructor(t){super(),this.elements=t}}function TT(r,t){const n=ST(t);for(const s of r.elements)n.some((l=>fs(l,s)))||n.push(s);return{arrayValue:{values:n}}}class wu extends xf{constructor(t){super(),this.elements=t}}function wT(r,t){let n=ST(t);for(const s of r.elements)n=n.filter((l=>!fs(l,s)));return{arrayValue:{values:n}}}class Kc extends xf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function jx(r){return sn(r.integerValue||r.doubleValue)}function ST(r){return qg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class bf{constructor(t,n){this.field=t,this.transform=n}}function RP(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof Tu&&l instanceof Tu||s instanceof wu&&l instanceof wu?vu(s.elements,l.elements,fs):s instanceof Kc&&l instanceof Kc?fs(s.Ae,l.Ae):s instanceof Wc&&l instanceof Wc})(r.transform,t.transform)}class IP{constructor(t,n){this.version=t,this.transformResults=n}}class Dr{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Dr}static exists(t){return new Dr(void 0,t)}static updateTime(t){return new Dr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function kd(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Ef{}function AT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new RT(r.key,Dr.none()):new rh(r.key,r.data,Dr.none());{const n=r.data,s=xi.empty();let l=new vn(In.comparator);for(let h of t.fields)if(!l.has(h)){let d=n.field(h);d===null&&h.length>1&&(h=h.popLast(),d=n.field(h)),d===null?s.delete(h):s.set(h,d),l=l.add(h)}return new _o(r.key,s,new Fi(l.toArray()),Dr.none())}}function PP(r,t,n){r instanceof rh?(function(l,h,d){const y=l.value.clone(),v=Vx(l.fieldTransforms,h,d.transformResults);y.setAll(v),h.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,t,n):r instanceof _o?(function(l,h,d){if(!kd(l.precondition,h))return void h.convertToUnknownDocument(d.version);const y=Vx(l.fieldTransforms,h,d.transformResults),v=h.data;v.setAll(CT(l)),v.setAll(y),h.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(r,t,n):(function(l,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,n)}function jc(r,t,n,s){return r instanceof rh?(function(h,d,y,v){if(!kd(h.precondition,d))return y;const b=h.value.clone(),w=Bx(h.fieldTransforms,v,d);return b.setAll(w),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),null})(r,t,n,s):r instanceof _o?(function(h,d,y,v){if(!kd(h.precondition,d))return y;const b=Bx(h.fieldTransforms,v,d),w=d.data;return w.setAll(CT(h)),w.setAll(b),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),y===null?null:y.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((C=>C.field)))})(r,t,n,s):(function(h,d,y){return kd(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(r,t,n)}function NP(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),h=ET(s.transform,l||null);h!=null&&(n===null&&(n=xi.empty()),n.set(s.field,h))}return n||null}function zx(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&vu(s,l,((h,d)=>RP(h,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class rh extends Ef{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class _o extends Ef{constructor(t,n,s,l,h=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function CT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function Vx(r,t,n){const s=new Map;_e(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const h=r[l],d=h.transform,y=t.data.field(h.field);s.set(h.field,CP(d,y,n[l]))}return s}function Bx(r,t,n){const s=new Map;for(const l of r){const h=l.transform,d=n.data.field(l.field);s.set(l.field,AP(h,d,t))}return s}class RT extends Ef{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DP extends Ef{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class LP{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&PP(h,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=jc(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=jc(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=vT();return this.mutations.forEach((l=>{const h=t.get(l.key),d=h.overlayedDocument;let y=this.applyToLocalView(d,h.mutatedFields);y=n.has(l.key)?null:y;const v=AT(d,y);v!==null&&s.set(l.key,v),d.isValidDocument()||d.convertToNoDocument(Ut.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ae())}isEqual(t){return this.batchId===t.batchId&&vu(this.mutations,t.mutations,((n,s)=>zx(n,s)))&&vu(this.baseMutations,t.baseMutations,((n,s)=>zx(n,s)))}}class Kg{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){_e(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return EP})();const h=t.mutations;for(let d=0;d<h.length;d++)l=l.insert(h[d].key,s[d].version);return new Kg(t,n,s,l)}}class OP{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kP{constructor(t,n){this.count=t,this.unchangedNames=n}}var fn,ce;function MP(r){switch(r){case dt.OK:return Vt(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Vt(15467,{code:r})}}function IT(r){if(r===void 0)return Js("GRPC error has no .code"),dt.UNKNOWN;switch(r){case fn.OK:return dt.OK;case fn.CANCELLED:return dt.CANCELLED;case fn.UNKNOWN:return dt.UNKNOWN;case fn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case fn.INTERNAL:return dt.INTERNAL;case fn.UNAVAILABLE:return dt.UNAVAILABLE;case fn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case fn.NOT_FOUND:return dt.NOT_FOUND;case fn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case fn.ABORTED:return dt.ABORTED;case fn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case fn.DATA_LOSS:return dt.DATA_LOSS;default:return Vt(39323,{code:r})}}(ce=fn||(fn={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";function jP(){return new TextEncoder}const zP=new so([4294967295,4294967295],0);function Ux(r){const t=jP().encode(r),n=new BE;return n.update(t),new Uint8Array(n.digest())}function Fx(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new so([n,s],0),new so([l,h],0)]}class Yg{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Pc(`Invalid padding: ${n}`);if(s<0)throw new Pc(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Pc(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Pc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=so.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(so.fromNumber(s)));return l.compare(zP)===1&&(l=new so([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Ux(t),[s,l]=Fx(n);for(let h=0;h<this.hashCount;h++){const d=this.ye(s,l,h);if(!this.we(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),d=new Yg(h,l,n);return s.forEach((y=>d.insert(y))),d}insert(t){if(this.ge===0)return;const n=Ux(t),[s,l]=Fx(n);for(let h=0;h<this.hashCount;h++){const d=this.ye(s,l,h);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tf{constructor(t,n,s,l,h){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,sh.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Tf(Ut.min(),l,new Ge(se),ta(),ae())}}class sh{constructor(t,n,s,l,h){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new sh(s,n,ae(),ae(),ae())}}class Md{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class PT{constructor(t,n){this.targetId=t,this.Ce=n}}class NT{constructor(t,n,s=Pn.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Hx{constructor(){this.ve=0,this.Fe=qx(),this.Me=Pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ae(),n=ae(),s=ae();return this.Fe.forEach(((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Vt(38017,{changeType:h})}})),new sh(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=qx()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VP{constructor(t){this.Ge=t,this.ze=new Map,this.je=ta(),this.Je=Ed(),this.He=Ed(),this.Ye=new Ge(se)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Vt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const h=l.target;if(ag(h))if(s===0){const d=new Ot(h.path);this.et(n,d,Zn.newNoDocument(d,Ut.min()))}else _e(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const y=this.ut(t),v=y?this.ct(y,t,d):1;if(v!==0){this.it(n);const b=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,b)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=n;let d,y;try{d=co(s).toUint8Array()}catch(v){if(v instanceof tT)return hl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{y=new Yg(d,l,h)}catch(v){return hl(v instanceof Pc?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return y.ge===0?null:y}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((h=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;t.mightContain(y)||(this.et(n,h,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((h,d)=>{const y=this.ot(d);if(y){if(h.current&&ag(y.target)){const v=new Ot(y.target.path);this.It(v).has(d)||this.Et(d,v)||this.et(d,v,Zn.newNoDocument(v,t))}h.Be&&(n.set(d,h.ke()),h.qe())}}));let s=ae();this.He.forEach(((h,d)=>{let y=!0;d.forEachWhile((v=>{const b=this.ot(v);return!b||b.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(h))})),this.je.forEach(((h,d)=>d.setReadTime(t)));const l=new Tf(t,n,this.Ye,this.je,s);return this.je=ta(),this.Je=Ed(),this.He=Ed(),this.Ye=new Ge(se),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Hx,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new vn(se),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new vn(se),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Hx),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Ed(){return new Ge(Ot.comparator)}function qx(){return new Ge(Ot.comparator)}const BP={asc:"ASCENDING",desc:"DESCENDING"},UP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FP={and:"AND",or:"OR"};class HP{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ug(r,t){return r.useProto3Json||mf(t)?t:{value:t}}function Xd(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function qP(r,t){return Xd(r,t.toTimestamp())}function ds(r){return _e(!!r,49232),Ut.fromTimestamp((function(n){const s=uo(n);return new De(s.seconds,s.nanos)})(r))}function Qg(r,t){return cg(r,t).canonicalString()}function cg(r,t){const n=(function(l){return new Ne(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function LT(r){const t=Ne.fromString(r);return _e(zT(t),10190,{key:t.toString()}),t}function hg(r,t){return Qg(r.databaseId,t.path)}function jm(r,t){const n=LT(t);if(n.get(1)!==r.databaseId.projectId)throw new Ct(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Ct(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ot(kT(n))}function OT(r,t){return Qg(r.databaseId,t)}function GP(r){const t=LT(r);return t.length===4?Ne.emptyPath():kT(t)}function dg(r){return new Ne(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kT(r){return _e(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Gx(r,t,n){return{name:hg(r,t),fields:n.value.mapValue.fields}}function ZP(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Vt(39313,{state:b})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=(function(b,w){return b.useProto3Json?(_e(w===void 0||typeof w=="string",58123),Pn.fromBase64String(w||"")):(_e(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Pn.fromUint8Array(w||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,y=d&&(function(b){const w=b.code===void 0?dt.UNKNOWN:IT(b.code);return new Ct(w,b.message||"")})(d);n=new NT(s,l,h,y||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=jm(r,s.document.name),h=ds(s.document.updateTime),d=s.document.createTime?ds(s.document.createTime):Ut.min(),y=new xi({mapValue:{fields:s.document.fields}}),v=Zn.newFoundDocument(l,h,d,y),b=s.targetIds||[],w=s.removedTargetIds||[];n=new Md(b,w,v.key,v)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=jm(r,s.document),h=s.readTime?ds(s.readTime):Ut.min(),d=Zn.newNoDocument(l,h),y=s.removedTargetIds||[];n=new Md([],y,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=jm(r,s.document),h=s.removedTargetIds||[];n=new Md([],h,l,null)}else{if(!("filter"in t))return Vt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:h}=s,d=new kP(l,h),y=s.targetId;n=new PT(y,d)}}return n}function WP(r,t){let n;if(t instanceof rh)n={update:Gx(r,t.key,t.value)};else if(t instanceof RT)n={delete:hg(r,t.key)};else if(t instanceof _o)n={update:Gx(r,t.key,t.data),updateMask:nN(t.fieldMask)};else{if(!(t instanceof DP))return Vt(16599,{Vt:t.type});n={verify:hg(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(h,d){const y=d.transform;if(y instanceof Wc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Tu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof wu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Kc)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw Vt(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,h){return h.updateTime!==void 0?{updateTime:qP(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Vt(27497)})(r,t.precondition)),n}function KP(r,t){return r&&r.length>0?(_e(t!==void 0,14353),r.map((n=>(function(l,h){let d=l.updateTime?ds(l.updateTime):ds(h);return d.isEqual(Ut.min())&&(d=ds(h)),new IP(d,l.transformResults||[])})(n,t)))):[]}function YP(r,t){return{documents:[OT(r,t.path)]}}function QP(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=OT(r,l);const h=(function(b){if(b.length!==0)return jT(Mr.create(b,"and"))})(t.filters);h&&(n.structuredQuery.where=h);const d=(function(b){if(b.length!==0)return b.map((w=>(function(I){return{field:cu(I.field),direction:JP(I.dir)}})(w)))})(t.orderBy);d&&(n.structuredQuery.orderBy=d);const y=ug(r,t.limit);return y!==null&&(n.structuredQuery.limit=y),t.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(t.endAt)),{ft:n,parent:l}}function XP(r){let t=GP(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){_e(s===1,65062);const w=n.from[0];w.allDescendants?l=w.collectionId:t=t.child(w.collectionId)}let h=[];n.where&&(h=(function(C){const I=MT(C);return I instanceof Mr&&cT(I)?I.getFilters():[I]})(n.where));let d=[];n.orderBy&&(d=(function(C){return C.map((I=>(function(Z){return new Zc(hu(Z.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(I)))})(n.orderBy));let y=null;n.limit&&(y=(function(C){let I;return I=typeof C=="object"?C.value:C,mf(I)?null:I})(n.limit));let v=null;n.startAt&&(v=(function(C){const I=!!C.before,O=C.values||[];return new Qd(O,I)})(n.startAt));let b=null;return n.endAt&&(b=(function(C){const I=!C.before,O=C.values||[];return new Qd(O,I)})(n.endAt)),_P(t,l,d,h,y,"F",v,b)}function $P(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function MT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=hu(n.unaryFilter.field);return pn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=hu(n.unaryFilter.field);return pn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=hu(n.unaryFilter.field);return pn.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=hu(n.unaryFilter.field);return pn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vt(61313);default:return Vt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return pn.create(hu(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vt(58110);default:return Vt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Mr.create(n.compositeFilter.filters.map((s=>MT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Vt(1026)}})(n.compositeFilter.op))})(r):Vt(30097,{filter:r})}function JP(r){return BP[r]}function tN(r){return UP[r]}function eN(r){return FP[r]}function cu(r){return{fieldPath:r.canonicalString()}}function hu(r){return In.fromServerFormat(r.fieldPath)}function jT(r){return r instanceof pn?(function(n){if(n.op==="=="){if(Dx(n.value))return{unaryFilter:{field:cu(n.field),op:"IS_NAN"}};if(Nx(n.value))return{unaryFilter:{field:cu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dx(n.value))return{unaryFilter:{field:cu(n.field),op:"IS_NOT_NAN"}};if(Nx(n.value))return{unaryFilter:{field:cu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cu(n.field),op:tN(n.op),value:n.value}}})(r):r instanceof Mr?(function(n){const s=n.getFilters().map((l=>jT(l)));return s.length===1?s[0]:{compositeFilter:{op:eN(n.op),filters:s}}})(r):Vt(54877,{filter:r})}function nN(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function zT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class eo{constructor(t,n,s,l,h=Ut.min(),d=Ut.min(),y=Pn.EMPTY_BYTE_STRING,v=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=v}withSequenceNumber(t){return new eo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class iN{constructor(t){this.yt=t}}function rN(r){const t=XP({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?lg(t,t.limit,"L"):t}class sN{constructor(){this.Cn=new aN}addToCollectionParentIndex(t,n){return this.Cn.add(n),mt.resolve()}getCollectionParents(t,n){return mt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return mt.resolve()}deleteFieldIndex(t,n){return mt.resolve()}deleteAllFieldIndexes(t){return mt.resolve()}createTargetIndexes(t,n){return mt.resolve()}getDocumentsMatchingTarget(t,n){return mt.resolve(null)}getIndexType(t,n){return mt.resolve(0)}getFieldIndexes(t,n){return mt.resolve([])}getNextCollectionGroupToUpdate(t){return mt.resolve(null)}getMinOffset(t,n){return mt.resolve(lo.min())}getMinOffsetFromCollectionGroup(t,n){return mt.resolve(lo.min())}updateCollectionGroup(t,n,s){return mt.resolve()}updateIndexEntries(t,n){return mt.resolve()}}class aN{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new vn(Ne.comparator),h=!l.has(s);return this.index[n]=l.add(s),h}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new vn(Ne.comparator)).toArray()}}const Zx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VT=41943040;class vi{static withCacheSize(t){return new vi(t,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(VT,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);class Su{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Su(0)}static cr(){return new Su(-1)}}const Wx="LruGarbageCollector",oN=1048576;function Kx([r,t],[n,s]){const l=se(r,n);return l===0?se(t,s):l}class lN{constructor(t){this.Ir=t,this.buffer=new vn(Kx),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Kx(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uN{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){It(Wx,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ou(n)?It(Wx,"Ignoring IndexedDB error during garbage collection: ",n):await Lu(n)}await this.Vr(3e5)}))}}class cN{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return mt.resolve(pf.ce);const s=new lN(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(It("LruGarbageCollector","Garbage collection skipped; disabled"),mt.resolve(Zx)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zx):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,h,d,y,v,b;const w=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,d=Date.now(),this.nthSequenceNumber(t,l)))).next((C=>(s=C,y=Date.now(),this.removeTargets(t,s,n)))).next((C=>(h=C,v=Date.now(),this.removeOrphanedDocuments(t,s)))).next((C=>(b=Date.now(),lu()<=re.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${l} in `+(y-d)+`ms
	Removed ${h} targets in `+(v-y)+`ms
	Removed ${C} documents in `+(b-v)+`ms
Total Duration: ${b-w}ms`),mt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:C}))))}}function hN(r,t){return new cN(r,t)}class dN{constructor(){this.changes=new gl((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Zn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?mt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class fN{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class pN{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&jc(s.mutation,l,Fi.empty(),De.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,ae()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=ae()){const l=al();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((h=>{let d=Ic();return h.forEach(((y,v)=>{d=d.insert(y,v.overlayedDocument)})),d}))))}getOverlayedDocuments(t,n){const s=al();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,ae())))}populateOverlays(t,n,s){const l=[];return s.forEach((h=>{n.has(h)||l.push(h)})),this.documentOverlayCache.getOverlays(t,l).next((h=>{h.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(t,n,s,l){let h=ta();const d=Mc(),y=(function(){return Mc()})();return n.forEach(((v,b)=>{const w=s.get(b.key);l.has(b.key)&&(w===void 0||w.mutation instanceof _o)?h=h.insert(b.key,b):w!==void 0?(d.set(b.key,w.mutation.getFieldMask()),jc(w.mutation,b,w.mutation.getFieldMask(),De.now())):d.set(b.key,Fi.empty())})),this.recalculateAndSaveOverlays(t,h).next((v=>(v.forEach(((b,w)=>d.set(b,w))),n.forEach(((b,w)=>y.set(b,new fN(w,d.get(b)??null)))),y)))}recalculateAndSaveOverlays(t,n){const s=Mc();let l=new Ge(((d,y)=>d-y)),h=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((d=>{for(const y of d)y.keys().forEach((v=>{const b=n.get(v);if(b===null)return;let w=s.get(v)||Fi.empty();w=y.applyToLocalView(b,w),s.set(v,w);const C=(l.get(y.batchId)||ae()).add(v);l=l.insert(y.batchId,C)}))})).next((()=>{const d=[],y=l.getReverseIterator();for(;y.hasNext();){const v=y.getNext(),b=v.key,w=v.value,C=vT();w.forEach((I=>{if(!h.has(I)){const O=AT(n.get(I),s.get(I));O!==null&&C.set(I,O),h=h.add(I)}})),d.push(this.documentOverlayCache.saveOverlays(t,b,C))}return mt.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(d){return Ot.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):pT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((h=>{const d=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-h.size):mt.resolve(al());let y=Hc,v=h;return d.next((b=>mt.forEach(b,((w,C)=>(y<C.largestBatchId&&(y=C.largestBatchId),h.get(w)?mt.resolve():this.remoteDocumentCache.getEntry(t,w).next((I=>{v=v.insert(w,I)}))))).next((()=>this.populateOverlays(t,b,h))).next((()=>this.computeViews(t,v,b,ae()))).next((w=>({batchId:y,changes:yT(w)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ot(n)).next((s=>{let l=Ic();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const h=n.collectionGroup;let d=Ic();return this.indexManager.getCollectionParents(t,h).next((y=>mt.forEach(y,(v=>{const b=(function(C,I){return new ku(I,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(n,v.child(h));return this.getDocumentsMatchingCollectionQuery(t,b,s,l).next((w=>{w.forEach(((C,I)=>{d=d.insert(C,I)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,h,l)))).next((d=>{h.forEach(((v,b)=>{const w=b.getKey();d.get(w)===null&&(d=d.insert(w,Zn.newInvalidDocument(w)))}));let y=Ic();return d.forEach(((v,b)=>{const w=h.get(v);w!==void 0&&jc(w.mutation,b,Fi.empty(),De.now()),vf(n,b)&&(y=y.insert(v,b))})),y}))}}class mN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return mt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ds(l.createTime)}})(n)),mt.resolve()}getNamedQuery(t,n){return mt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:rN(l.bundledQuery),readTime:ds(l.readTime)}})(n)),mt.resolve()}}class gN{constructor(){this.overlays=new Ge(Ot.comparator),this.qr=new Map}getOverlay(t,n){return mt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=al();return mt.forEach(n,(l=>this.getOverlay(t,l).next((h=>{h!==null&&s.set(l,h)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,h)=>{this.St(t,n,h)})),mt.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(s)),mt.resolve()}getOverlaysForCollection(t,n,s){const l=al(),h=n.length+1,d=new Ot(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const v=y.getNext().value,b=v.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===h&&v.largestBatchId>s&&l.set(v.getKey(),v)}return mt.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let h=new Ge(((b,w)=>b-w));const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let w=h.get(b.largestBatchId);w===null&&(w=al(),h=h.insert(b.largestBatchId,w)),w.set(b.getKey(),b)}}const y=al(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((b,w)=>y.set(b,w))),!(y.size()>=l)););return mt.resolve(y)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new OP(n,s));let h=this.qr.get(n);h===void 0&&(h=ae(),this.qr.set(n,h)),this.qr.set(n,h.add(s.key))}}class _N{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(t){return mt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,mt.resolve()}}class Xg{constructor(){this.Qr=new vn(Rn.$r),this.Ur=new vn(Rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Rn(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Rn(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new Ot(new Ne([])),s=new Rn(n,t),l=new Rn(n,t+1),h=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),h.push(d.key)})),h}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Ot(new Ne([])),s=new Rn(n,t),l=new Rn(n,t+1);let h=ae();return this.Ur.forEachInRange([s,l],(d=>{h=h.add(d.key)})),h}containsKey(t){const n=new Rn(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Rn{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Ot.comparator(t.key,n.key)||se(t.Yr,n.Yr)}static Kr(t,n){return se(t.Yr,n.Yr)||Ot.comparator(t.key,n.key)}}class yN{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vn(Rn.$r)}checkEmpty(t){return mt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new LP(h,n,s,l);this.mutationQueue.push(d);for(const y of l)this.Zr=this.Zr.add(new Rn(y.key,h)),this.indexManager.addToCollectionParentIndex(t,y.key.path.popLast());return mt.resolve(d)}lookupMutationBatch(t,n){return mt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),h=l<0?0:l;return mt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return mt.resolve(this.mutationQueue.length===0?Fg:this.tr-1)}getAllMutationBatches(t){return mt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Rn(n,0),l=new Rn(n,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([s,l],(d=>{const y=this.Xr(d.Yr);h.push(y)})),mt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new vn(se);return n.forEach((l=>{const h=new Rn(l,0),d=new Rn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],(y=>{s=s.add(y.Yr)}))})),mt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let h=s;Ot.isDocumentKey(h)||(h=h.child(""));const d=new Rn(new Ot(h),0);let y=new vn(se);return this.Zr.forEachWhile((v=>{const b=v.key.path;return!!s.isPrefixOf(b)&&(b.length===l&&(y=y.add(v.Yr)),!0)}),d),mt.resolve(this.ti(y))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return mt.forEach(n.mutations,(l=>{const h=new Rn(l.key,n.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Rn(n,0),l=this.Zr.firstAfterOrEqual(s);return mt.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,mt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class vN{constructor(t){this.ri=t,this.docs=(function(){return new Ge(Ot.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),h=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return mt.resolve(s?s.document.mutableCopy():Zn.newInvalidDocument(n))}getEntries(t,n){let s=ta();return n.forEach((l=>{const h=this.docs.get(l);s=s.insert(l,h?h.document.mutableCopy():Zn.newInvalidDocument(l))})),mt.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let h=ta();const d=n.path,y=new Ot(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(y);for(;v.hasNext();){const{key:b,value:{document:w}}=v.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||YI(KI(w),s)<=0||(l.has(w.key)||vf(n,w))&&(h=h.insert(w.key,w.mutableCopy()))}return mt.resolve(h)}getAllFromCollectionGroup(t,n,s,l){Vt(9500)}ii(t,n){return mt.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new xN(this)}getSize(t){return mt.resolve(this.size)}}class xN extends dN{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),mt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class bN{constructor(t){this.persistence=t,this.si=new gl((n=>Gg(n)),Zg),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.oi=0,this._i=new Xg,this.targetCount=0,this.ai=Su.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),mt.resolve()}getLastRemoteSnapshotVersion(t){return mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return mt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),mt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),mt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Su(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,mt.resolve()}updateTargetData(t,n){return this.Pr(n),mt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,mt.resolve()}removeTargets(t,n,s){let l=0;const h=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(t,y.targetId)),l++)})),mt.waitFor(h).next((()=>l))}getTargetCount(t){return mt.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return mt.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),mt.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,h=[];return l&&n.forEach((d=>{h.push(l.markPotentiallyOrphaned(t,d))})),mt.waitFor(h)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),mt.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return mt.resolve(s)}containsKey(t,n){return mt.resolve(this._i.containsKey(n))}}class BT{constructor(t,n){this.ui={},this.overlays={},this.ci=new pf(0),this.li=!1,this.li=!0,this.hi=new _N,this.referenceDelegate=t(this),this.Pi=new bN(this),this.indexManager=new sN,this.remoteDocumentCache=(function(l){return new vN(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new iN(n),this.Ii=new mN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new gN,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new yN(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){It("MemoryPersistence","Starting transaction:",t);const l=new EN(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((h=>this.referenceDelegate.di(l).next((()=>h)))).toPromise().then((h=>(l.raiseOnCommittedEvent(),h)))}Ai(t,n){return mt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class EN extends XI{constructor(t){super(),this.currentSequenceNumber=t}}class $g{constructor(t){this.persistence=t,this.Ri=new Xg,this.Vi=null}static mi(t){return new $g(t)}get fi(){if(this.Vi)return this.Vi;throw Vt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),mt.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),mt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),mt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((h=>this.fi.add(h.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mt.forEach(this.fi,(s=>{const l=Ot.fromPath(s);return this.gi(t,l).next((h=>{h||n.removeEntry(l,Ut.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return mt.or([()=>mt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class $d{constructor(t,n){this.persistence=t,this.pi=new gl((s=>tP(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=hN(this,n)}static mi(t,n){return new $d(t,n)}Ei(){}di(t){return mt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return mt.forEach(this.pi,((s,l)=>this.br(t,s,l).next((h=>h?mt.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,n).next((y=>{y||(s++,h.removeEntry(d,Ut.min()))})))).next((()=>h.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),mt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),mt.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),mt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),mt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ld(t.data.value)),n}br(t,n,s){return mt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return mt.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Jg{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=ae(),l=ae();for(const h of n.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new Jg(t,n.fromCache,s,l)}}class TN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class wN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nC()?8:$I(Wn())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const h={result:null};return this.ys(t,n).next((d=>{h.result=d})).next((()=>{if(!h.result)return this.ws(t,n,l,s).next((d=>{h.result=d}))})).next((()=>{if(h.result)return;const d=new TN;return this.Ss(t,n,d).next((y=>{if(h.result=y,this.Vs)return this.bs(t,n,d,y.size)}))})).next((()=>h.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(lu()<=re.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",uu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),mt.resolve()):(lu()<=re.DEBUG&&It("QueryEngine","Query:",uu(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(lu()<=re.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",uu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,hs(n))):mt.resolve())}ys(t,n){if(Mx(n))return mt.resolve(null);let s=hs(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=lg(n,null,"F"),s=hs(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((h=>{const d=ae(...h);return this.ps.getDocuments(t,d).next((y=>this.indexManager.getMinOffset(t,s).next((v=>{const b=this.Ds(n,y);return this.Cs(n,b,d,v.readTime)?this.ys(t,lg(n,null,"F")):this.vs(t,b,n,v)}))))})))))}ws(t,n,s,l){return Mx(n)||l.isEqual(Ut.min())?mt.resolve(null):this.ps.getDocuments(t,s).next((h=>{const d=this.Ds(n,h);return this.Cs(n,d,s,l)?mt.resolve(null):(lu()<=re.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),uu(n)),this.vs(t,d,n,WI(l,Hc)).next((y=>y)))}))}Ds(t,n){let s=new vn(gT(t));return n.forEach(((l,h)=>{vf(t,h)&&(s=s.add(h))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const h=t.limitType==="F"?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,n,s){return lu()<=re.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",uu(n)),this.ps.getDocumentsMatchingQuery(t,n,lo.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((h=>(n.forEach((d=>{h=h.insert(d.key,d)})),h)))}}const t_="LocalStore",SN=3e8;class AN{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new Ge(se),this.xs=new gl((h=>Gg(h)),Zg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new pN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function CN(r,t,n,s){return new AN(r,t,n,s)}async function UT(r,t){const n=qt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((h=>(l=h,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((h=>{const d=[],y=[];let v=ae();for(const b of l){d.push(b.batchId);for(const w of b.mutations)v=v.add(w.key)}for(const b of h){y.push(b.batchId);for(const w of b.mutations)v=v.add(w.key)}return n.localDocuments.getDocuments(s,v).next((b=>({Ls:b,removedBatchIds:d,addedBatchIds:y})))}))}))}function RN(r,t){const n=qt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),h=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,v,b,w){const C=b.batch,I=C.keys();let O=mt.resolve();return I.forEach((Z=>{O=O.next((()=>w.getEntry(v,Z))).next((G=>{const V=b.docVersions.get(Z);_e(V!==null,48541),G.version.compareTo(V)<0&&(C.applyToRemoteDocument(G,b),G.isValidDocument()&&(G.setReadTime(b.commitVersion),w.addEntry(G)))}))})),O.next((()=>y.mutationQueue.removeMutationBatch(v,C)))})(n,s,t,h).next((()=>h.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let v=ae();for(let b=0;b<y.mutationResults.length;++b)y.mutationResults[b].transformResults.length>0&&(v=v.add(y.batch.mutations[b].key));return v})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function FT(r){const t=qt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function IN(r,t){const n=qt(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const y=[];t.targetChanges.forEach(((w,C)=>{const I=l.get(C);if(!I)return;y.push(n.Pi.removeMatchingKeys(h,w.removedDocuments,C).next((()=>n.Pi.addMatchingKeys(h,w.addedDocuments,C))));let O=I.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(C)!==null?O=O.withResumeToken(Pn.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,s)),l=l.insert(C,O),(function(G,V,$){return G.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=SN?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(I,O,w)&&y.push(n.Pi.updateTargetData(h,O))}));let v=ta(),b=ae();if(t.documentUpdates.forEach((w=>{t.resolvedLimboDocuments.has(w)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(h,w))})),y.push(PN(h,d,t.documentUpdates).next((w=>{v=w.ks,b=w.qs}))),!s.isEqual(Ut.min())){const w=n.Pi.getLastRemoteSnapshotVersion(h).next((C=>n.Pi.setTargetsMetadata(h,h.currentSequenceNumber,s)));y.push(w)}return mt.waitFor(y).next((()=>d.apply(h))).next((()=>n.localDocuments.getLocalViewOfDocuments(h,v,b))).next((()=>v))})).then((h=>(n.Ms=l,h)))}function PN(r,t,n){let s=ae(),l=ae();return n.forEach((h=>s=s.add(h))),t.getEntries(r,s).next((h=>{let d=ta();return n.forEach(((y,v)=>{const b=h.get(y);v.isFoundDocument()!==b.isFoundDocument()&&(l=l.add(y)),v.isNoDocument()&&v.version.isEqual(Ut.min())?(t.removeEntry(y,v.readTime),d=d.insert(y,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||v.version.compareTo(b.version)===0&&b.hasPendingWrites?(t.addEntry(v),d=d.insert(y,v)):It(t_,"Ignoring outdated watch update for ",y,". Current version:",b.version," Watch version:",v.version)})),{ks:d,qs:l}}))}function NN(r,t){const n=qt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Fg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function DN(r,t){const n=qt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((h=>h?(l=h,mt.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new eo(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function fg(r,t,n){const s=qt(r),l=s.Ms.get(t),h=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",h,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Ou(d))throw d;It(t_,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Yx(r,t,n){const s=qt(r);let l=Ut.min(),h=ae();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,b,w){const C=qt(v),I=C.xs.get(w);return I!==void 0?mt.resolve(C.Ms.get(I)):C.Pi.getTargetData(b,w)})(s,d,hs(t)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,y.targetId).next((v=>{h=v}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,n?l:Ut.min(),n?h:ae()))).next((y=>(LN(s,vP(t),y),{documents:y,Qs:h})))))}function LN(r,t,n){let s=r.Os.get(t)||Ut.min();n.forEach(((l,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)})),r.Os.set(t,s)}class Qx{constructor(){this.activeTargetIds=SP()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ON{constructor(){this.Mo=new Qx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Qx,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class kN{Oo(t){}shutdown(){}}const Xx="ConnectivityMonitor";class $x{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){It(Xx,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){It(Xx,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Td=null;function pg(){return Td===null?Td=(function(){return 268435456+Math.round(2147483648*Math.random())})():Td++,"0x"+Td.toString(16)}const zm="RestConnection",MN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Kd?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,h){const d=pg(),y=this.zo(t,n.toUriEncodedString());It(zm,`Sending RPC '${t}' ${d}:`,y,s);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,l,h);const{host:b}=new URL(y),w=Iu(b);return this.Jo(t,y,v,s,w).then((C=>(It(zm,`Received RPC '${t}' ${d}: `,C),C)),(C=>{throw hl(zm,`RPC '${t}' ${d} failed with error: `,C,"url: ",y,"request:",s),C}))}Ho(t,n,s,l,h,d){return this.Go(t,n,s,l,h)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Du})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,h)=>t[h]=l)),s&&s.headers.forEach(((l,h)=>t[h]=l))}zo(t,n){const s=MN[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class zN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const qn="WebChannelConnection";class VN extends jN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,h){const d=pg();return new Promise(((y,v)=>{const b=new UE;b.setWithCredentials(!0),b.listenOnce(FE.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Dd.NO_ERROR:const C=b.getResponseJson();It(qn,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(C)),y(C);break;case Dd.TIMEOUT:It(qn,`RPC '${t}' ${d} timed out`),v(new Ct(dt.DEADLINE_EXCEEDED,"Request time out"));break;case Dd.HTTP_ERROR:const I=b.getStatus();if(It(qn,`RPC '${t}' ${d} failed with status:`,I,"response text:",b.getResponseText()),I>0){let O=b.getResponseJson();Array.isArray(O)&&(O=O[0]);const Z=O?.error;if(Z&&Z.status&&Z.message){const G=(function($){const q=$.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(q)>=0?q:dt.UNKNOWN})(Z.status);v(new Ct(G,Z.message))}else v(new Ct(dt.UNKNOWN,"Server responded with status "+b.getStatus()))}else v(new Ct(dt.UNAVAILABLE,"Connection failed."));break;default:Vt(9055,{l_:t,streamId:d,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{It(qn,`RPC '${t}' ${d} completed.`)}}));const w=JSON.stringify(l);It(qn,`RPC '${t}' ${d} sending request:`,l),b.send(n,"POST",w,s,15)}))}T_(t,n,s){const l=pg(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=GE(),y=qE(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(v.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,n,s),v.encodeInitMessageHeaders=!0;const w=h.join("");It(qn,`Creating RPC '${t}' stream ${l}: ${w}`,v);const C=d.createWebChannel(w,v);this.I_(C);let I=!1,O=!1;const Z=new zN({Yo:V=>{O?It(qn,`Not sending because RPC '${t}' stream ${l} is closed:`,V):(I||(It(qn,`Opening RPC '${t}' stream ${l} transport.`),C.open(),I=!0),It(qn,`RPC '${t}' stream ${l} sending:`,V),C.send(V))},Zo:()=>C.close()}),G=(V,$,q)=>{V.listen($,(nt=>{try{q(nt)}catch(lt){setTimeout((()=>{throw lt}),0)}}))};return G(C,Rc.EventType.OPEN,(()=>{O||(It(qn,`RPC '${t}' stream ${l} transport opened.`),Z.o_())})),G(C,Rc.EventType.CLOSE,(()=>{O||(O=!0,It(qn,`RPC '${t}' stream ${l} transport closed`),Z.a_(),this.E_(C))})),G(C,Rc.EventType.ERROR,(V=>{O||(O=!0,hl(qn,`RPC '${t}' stream ${l} transport errored. Name:`,V.name,"Message:",V.message),Z.a_(new Ct(dt.UNAVAILABLE,"The operation could not be completed")))})),G(C,Rc.EventType.MESSAGE,(V=>{if(!O){const $=V.data[0];_e(!!$,16349);const q=$,nt=q?.error||q[0]?.error;if(nt){It(qn,`RPC '${t}' stream ${l} received error:`,nt);const lt=nt.status;let bt=(function(D){const j=fn[D];if(j!==void 0)return IT(j)})(lt),Tt=nt.message;bt===void 0&&(bt=dt.INTERNAL,Tt="Unknown error status: "+lt+" with message "+nt.message),O=!0,Z.a_(new Ct(bt,Tt)),C.close()}else It(qn,`RPC '${t}' stream ${l} received:`,$),Z.u_($)}})),G(y,HE.STAT_EVENT,(V=>{V.stat===eg.PROXY?It(qn,`RPC '${t}' stream ${l} detected buffering proxy`):V.stat===eg.NOPROXY&&It(qn,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Z.__()}),0),Z}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Vm(){return typeof document<"u"?document:null}function wf(r){return new HP(r,!0)}class HT{constructor(t,n,s=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&It("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Jx="PersistentStream";class qT{constructor(t,n,s,l,h,d,y,v){this.Mi=t,this.S_=s,this.b_=l,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?(Js(n.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new Ct(dt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return It(Jx,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(It(Jx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class BN extends qT{constructor(t,n,s,l,h,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=h}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=ZP(this.serializer,t),s=(function(h){if(!("targetChange"in h))return Ut.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?Ut.min():d.readTime?ds(d.readTime):Ut.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=dg(this.serializer),n.addTarget=(function(h,d){let y;const v=d.target;if(y=ag(v)?{documents:YP(h,v)}:{query:QP(h,v).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=DT(h,d.resumeToken);const b=ug(h,d.expectedCount);b!==null&&(y.expectedCount=b)}else if(d.snapshotVersion.compareTo(Ut.min())>0){y.readTime=Xd(h,d.snapshotVersion.toTimestamp());const b=ug(h,d.expectedCount);b!==null&&(y.expectedCount=b)}return y})(this.serializer,t);const s=$P(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=dg(this.serializer),n.removeTarget=t,this.q_(n)}}class UN extends qT{constructor(t,n,s,l,h,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return _e(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,_e(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){_e(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=KP(t.writeResults,t.commitTime),s=ds(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=dg(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>WP(this.serializer,s)))};this.q_(n)}}class FN{}class HN extends FN{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ct(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,d])=>this.connection.Go(t,cg(n,s),l,h,d))).catch((h=>{throw h.name==="FirebaseError"?(h.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ct(dt.UNKNOWN,h.toString())}))}Ho(t,n,s,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(t,cg(n,s),l,d,y,h))).catch((d=>{throw d.name==="FirebaseError"?(d.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ct(dt.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Js(n),this.aa=!1):It("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const dl="RemoteStore";class GN{constructor(t,n,s,l,h){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{_l(this)&&(It(dl,"Restarting streams for network reachability change."),await(async function(v){const b=qt(v);b.Ea.add(4),await ah(b),b.Ra.set("Unknown"),b.Ea.delete(4),await Sf(b)})(this))}))})),this.Ra=new qN(s,l)}}async function Sf(r){if(_l(r))for(const t of r.da)await t(!0)}async function ah(r){for(const t of r.da)await t(!1)}function GT(r,t){const n=qt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),r_(n)?i_(n):Mu(n).O_()&&n_(n,t))}function e_(r,t){const n=qt(r),s=Mu(n);n.Ia.delete(t),s.O_()&&ZT(n,t),n.Ia.size===0&&(s.O_()?s.L_():_l(n)&&n.Ra.set("Unknown"))}function n_(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ut.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Mu(r).Y_(t)}function ZT(r,t){r.Va.Ue(t),Mu(r).Z_(t)}function i_(r){r.Va=new VP({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Mu(r).start(),r.Ra.ua()}function r_(r){return _l(r)&&!Mu(r).x_()&&r.Ia.size>0}function _l(r){return qt(r).Ea.size===0}function WT(r){r.Va=void 0}async function ZN(r){r.Ra.set("Online")}async function WN(r){r.Ia.forEach(((t,n)=>{n_(r,t)}))}async function KN(r,t){WT(r),r_(r)?(r.Ra.ha(t),i_(r)):r.Ra.set("Unknown")}async function YN(r,t,n){if(r.Ra.set("Online"),t instanceof NT&&t.state===2&&t.cause)try{await(async function(l,h){const d=h.cause;for(const y of h.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,d),l.Ia.delete(y),l.Va.removeTarget(y))})(r,t)}catch(s){It(dl,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Jd(r,s)}else if(t instanceof Md?r.Va.Ze(t):t instanceof PT?r.Va.st(t):r.Va.tt(t),!n.isEqual(Ut.min()))try{const s=await FT(r.localStore);n.compareTo(s)>=0&&await(function(h,d){const y=h.Va.Tt(d);return y.targetChanges.forEach(((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const w=h.Ia.get(b);w&&h.Ia.set(b,w.withResumeToken(v.resumeToken,d))}})),y.targetMismatches.forEach(((v,b)=>{const w=h.Ia.get(v);if(!w)return;h.Ia.set(v,w.withResumeToken(Pn.EMPTY_BYTE_STRING,w.snapshotVersion)),ZT(h,v);const C=new eo(w.target,v,b,w.sequenceNumber);n_(h,C)})),h.remoteSyncer.applyRemoteEvent(y)})(r,n)}catch(s){It(dl,"Failed to raise snapshot:",s),await Jd(r,s)}}async function Jd(r,t,n){if(!Ou(t))throw t;r.Ea.add(1),await ah(r),r.Ra.set("Offline"),n||(n=()=>FT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{It(dl,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Sf(r)}))}function KT(r,t){return t().catch((n=>Jd(r,n,t)))}async function Af(r){const t=qt(r),n=fo(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Fg;for(;QN(t);)try{const l=await NN(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,XN(t,l)}catch(l){await Jd(t,l)}YT(t)&&QT(t)}function QN(r){return _l(r)&&r.Ta.length<10}function XN(r,t){r.Ta.push(t);const n=fo(r);n.O_()&&n.X_&&n.ea(t.mutations)}function YT(r){return _l(r)&&!fo(r).x_()&&r.Ta.length>0}function QT(r){fo(r).start()}async function $N(r){fo(r).ra()}async function JN(r){const t=fo(r);for(const n of r.Ta)t.ea(n.mutations)}async function tD(r,t,n){const s=r.Ta.shift(),l=Kg.from(s,t,n);await KT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Af(r)}async function eD(r,t){t&&fo(r).X_&&await(async function(s,l){if((function(d){return MP(d)&&d!==dt.ABORTED})(l.code)){const h=s.Ta.shift();fo(s).B_(),await KT(s,(()=>s.remoteSyncer.rejectFailedWrite(h.batchId,l))),await Af(s)}})(r,t),YT(r)&&QT(r)}async function tb(r,t){const n=qt(r);n.asyncQueue.verifyOperationInProgress(),It(dl,"RemoteStore received new credentials");const s=_l(n);n.Ea.add(3),await ah(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Sf(n)}async function nD(r,t){const n=qt(r);t?(n.Ea.delete(2),await Sf(n)):t||(n.Ea.add(2),await ah(n),n.Ra.set("Unknown"))}function Mu(r){return r.ma||(r.ma=(function(n,s,l){const h=qt(n);return h.sa(),new BN(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(r.datastore,r.asyncQueue,{Xo:ZN.bind(null,r),t_:WN.bind(null,r),r_:KN.bind(null,r),H_:YN.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),r_(r)?i_(r):r.Ra.set("Unknown")):(await r.ma.stop(),WT(r))}))),r.ma}function fo(r){return r.fa||(r.fa=(function(n,s,l){const h=qt(n);return h.sa(),new UN(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:$N.bind(null,r),r_:eD.bind(null,r),ta:JN.bind(null,r),na:tD.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Af(r)):(await r.fa.stop(),r.Ta.length>0&&(It(dl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class s_{constructor(t,n,s,l,h){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=h,this.deferred=new Ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,h){const d=Date.now()+s,y=new s_(t,n,d,l,h);return y.start(s),y}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a_(r,t){if(Js("AsyncQueue",`${t}: ${r}`),Ou(r))return new Ct(dt.UNAVAILABLE,`${t}: ${r}`);throw r}class _u{static emptySet(t){return new _u(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||Ot.comparator(n.key,s.key):(n,s)=>Ot.comparator(n.key,s.key),this.keyedMap=Ic(),this.sortedSet=new Ge(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof _u)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=s.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new _u;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}class eb{constructor(){this.ga=new Ge(Ot.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Vt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Au{constructor(t,n,s,l,h,d,y,v,b){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(t,n,s,l,h){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new Au(t,n,_u.emptySet(n),d,s,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}class iD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class rD{constructor(){this.queries=nb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=qt(n),h=l.queries;l.queries=nb(),h.forEach(((d,y)=>{for(const v of y.Sa)v.onError(s)}))})(this,new Ct(dt.ABORTED,"Firestore shutting down"))}}function nb(){return new gl((r=>mT(r)),yf)}async function o_(r,t){const n=qt(r);let s=3;const l=t.query;let h=n.queries.get(l);h?!h.ba()&&t.Da()&&(s=2):(h=new iD,s=t.Da()?0:1);try{switch(s){case 0:h.wa=await n.onListen(l,!0);break;case 1:h.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const y=a_(d,`Initialization of query '${uu(t.query)}' failed`);return void t.onError(y)}n.queries.set(l,h),h.Sa.push(t),t.va(n.onlineState),h.wa&&t.Fa(h.wa)&&u_(n)}async function l_(r,t){const n=qt(r),s=t.query;let l=3;const h=n.queries.get(s);if(h){const d=h.Sa.indexOf(t);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function sD(r,t){const n=qt(r);let s=!1;for(const l of t){const h=l.query,d=n.queries.get(h);if(d){for(const y of d.Sa)y.Fa(l)&&(s=!0);d.wa=l}}s&&u_(n)}function aD(r,t,n){const s=qt(r),l=s.queries.get(t);if(l)for(const h of l.Sa)h.onError(n);s.queries.delete(t)}function u_(r){r.Ca.forEach((t=>{t.next()}))}var mg,ib;(ib=mg||(mg={})).Ma="default",ib.Cache="cache";class c_{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Au(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Au.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==mg.Cache}}class XT{constructor(t){this.key=t}}class $T{constructor(t){this.key=t}}class oD{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ae(),this.mutatedKeys=ae(),this.eu=gT(t),this.tu=new _u(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new eb,l=n?n.tu:this.tu;let h=n?n.mutatedKeys:this.mutatedKeys,d=l,y=!1;const v=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,b=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((w,C)=>{const I=l.get(w),O=vf(this.query,C)?C:null,Z=!!I&&this.mutatedKeys.has(I.key),G=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let V=!1;I&&O?I.data.isEqual(O.data)?Z!==G&&(s.track({type:3,doc:O}),V=!0):this.su(I,O)||(s.track({type:2,doc:O}),V=!0,(v&&this.eu(O,v)>0||b&&this.eu(O,b)<0)&&(y=!0)):!I&&O?(s.track({type:0,doc:O}),V=!0):I&&!O&&(s.track({type:1,doc:I}),V=!0,(v||b)&&(y=!0)),V&&(O?(d=d.add(O),h=G?h.add(w):h.delete(w)):(d=d.delete(w),h=h.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),h=h.delete(w.key),s.track({type:1,doc:w})}return{tu:d,iu:s,Cs:y,mutatedKeys:h}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((w,C)=>(function(O,Z){const G=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt(20277,{Rt:V})}};return G(O)-G(Z)})(w.type,C.type)||this.eu(w.doc,C.doc))),this.ou(s),l=l??!1;const y=n&&!l?this._u():[],v=this.Xa.size===0&&this.current&&!l?1:0,b=v!==this.Za;return this.Za=v,d.length!==0||b?{snapshot:new Au(this.query,t.tu,h,d,t.mutatedKeys,v===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ae(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new $T(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new XT(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=ae();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Au.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const h_="SyncEngine";class lD{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class uD{constructor(t){this.key=t,this.hu=!1}}class cD{constructor(t,n,s,l,h,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new gl((y=>mT(y)),yf),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(Ot.comparator),this.Au=new Map,this.Ru=new Xg,this.Vu={},this.mu=new Map,this.fu=Su.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hD(r,t,n=!0){const s=rw(r);let l;const h=s.Tu.get(t);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await JT(s,t,n,!0),l}async function dD(r,t){const n=rw(r);await JT(n,t,!0,!1)}async function JT(r,t,n,s){const l=await DN(r.localStore,hs(t)),h=l.targetId,d=r.sharedClientState.addLocalQueryTarget(h,n);let y;return s&&(y=await fD(r,t,h,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&GT(r.remoteStore,l),y}async function fD(r,t,n,s,l){r.pu=(C,I,O)=>(async function(G,V,$,q){let nt=V.view.ru($);nt.Cs&&(nt=await Yx(G.localStore,V.query,!1).then((({documents:k})=>V.view.ru(k,nt))));const lt=q&&q.targetChanges.get(V.targetId),bt=q&&q.targetMismatches.get(V.targetId)!=null,Tt=V.view.applyChanges(nt,G.isPrimaryClient,lt,bt);return sb(G,V.targetId,Tt.au),Tt.snapshot})(r,C,I,O);const h=await Yx(r.localStore,t,!0),d=new oD(t,h.Qs),y=d.ru(h.documents),v=sh.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),b=d.applyChanges(y,r.isPrimaryClient,v);sb(r,n,b.au);const w=new lD(t,n,d);return r.Tu.set(t,w),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),b.snapshot}async function pD(r,t,n){const s=qt(r),l=s.Tu.get(t),h=s.Iu.get(l.targetId);if(h.length>1)return s.Iu.set(l.targetId,h.filter((d=>!yf(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await fg(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&e_(s.remoteStore,l.targetId),gg(s,l.targetId)})).catch(Lu)):(gg(s,l.targetId),await fg(s.localStore,l.targetId,!0))}async function mD(r,t){const n=qt(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),e_(n.remoteStore,s.targetId))}async function gD(r,t,n){const s=TD(r);try{const l=await(function(d,y){const v=qt(d),b=De.now(),w=y.reduce(((O,Z)=>O.add(Z.key)),ae());let C,I;return v.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let Z=ta(),G=ae();return v.Ns.getEntries(O,w).next((V=>{Z=V,Z.forEach((($,q)=>{q.isValidDocument()||(G=G.add($))}))})).next((()=>v.localDocuments.getOverlayedDocuments(O,Z))).next((V=>{C=V;const $=[];for(const q of y){const nt=NP(q,C.get(q.key).overlayedDocument);nt!=null&&$.push(new _o(q.key,nt,oT(nt.value.mapValue),Dr.exists(!0)))}return v.mutationQueue.addMutationBatch(O,b,$,y)})).next((V=>{I=V;const $=V.applyToLocalDocumentSet(C,G);return v.documentOverlayCache.saveOverlays(O,V.batchId,$)}))})).then((()=>({batchId:I.batchId,changes:yT(C)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(d,y,v){let b=d.Vu[d.currentUser.toKey()];b||(b=new Ge(se)),b=b.insert(y,v),d.Vu[d.currentUser.toKey()]=b})(s,l.batchId,n),await oh(s,l.changes),await Af(s.remoteStore)}catch(l){const h=a_(l,"Failed to persist write");n.reject(h)}}async function tw(r,t){const n=qt(r);try{const s=await IN(n.localStore,t);t.targetChanges.forEach(((l,h)=>{const d=n.Au.get(h);d&&(_e(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?_e(d.hu,14607):l.removedDocuments.size>0&&(_e(d.hu,42227),d.hu=!1))})),await oh(n,s,t)}catch(s){await Lu(s)}}function rb(r,t,n){const s=qt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((h,d)=>{const y=d.view.va(t);y.snapshot&&l.push(y.snapshot)})),(function(d,y){const v=qt(d);v.onlineState=y;let b=!1;v.queries.forEach(((w,C)=>{for(const I of C.Sa)I.va(y)&&(b=!0)})),b&&u_(v)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function _D(r,t,n){const s=qt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),h=l&&l.key;if(h){let d=new Ge(Ot.comparator);d=d.insert(h,Zn.newNoDocument(h,Ut.min()));const y=ae().add(h),v=new Tf(Ut.min(),new Map,new Ge(se),d,y);await tw(s,v),s.du=s.du.remove(h),s.Au.delete(t),d_(s)}else await fg(s.localStore,t,!1).then((()=>gg(s,t,n))).catch(Lu)}async function yD(r,t){const n=qt(r),s=t.batch.batchId;try{const l=await RN(n.localStore,t);nw(n,s,null),ew(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await oh(n,l)}catch(l){await Lu(l)}}async function vD(r,t,n){const s=qt(r);try{const l=await(function(d,y){const v=qt(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let w;return v.mutationQueue.lookupMutationBatch(b,y).next((C=>(_e(C!==null,37113),w=C.keys(),v.mutationQueue.removeMutationBatch(b,C)))).next((()=>v.mutationQueue.performConsistencyCheck(b))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(b,w,y))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,w))).next((()=>v.localDocuments.getDocuments(b,w)))}))})(s.localStore,t);nw(s,t,n),ew(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await oh(s,l)}catch(l){await Lu(l)}}function ew(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function nw(r,t,n){const s=qt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const h=l.get(t);h&&(n?h.reject(n):h.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function gg(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||iw(r,s)}))}function iw(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(e_(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),d_(r))}function sb(r,t,n){for(const s of n)s instanceof XT?(r.Ru.addReference(s.key,t),xD(r,s)):s instanceof $T?(It(h_,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||iw(r,s.key)):Vt(19791,{wu:s})}function xD(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(It(h_,"New document in limbo: "+n),r.Eu.add(s),d_(r))}function d_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new Ot(Ne.fromString(t)),s=r.fu.next();r.Au.set(s,new uD(n)),r.du=r.du.insert(n,s),GT(r.remoteStore,new eo(hs(_f(n.path)),s,"TargetPurposeLimboResolution",pf.ce))}}async function oh(r,t,n){const s=qt(r),l=[],h=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,v)=>{d.push(s.pu(v,t,n).then((b=>{if((b||n)&&s.isPrimaryClient){const w=b?!b.fromCache:n?.targetChanges.get(v.targetId)?.current;s.sharedClientState.updateQueryState(v.targetId,w?"current":"not-current")}if(b){l.push(b);const w=Jg.As(v.targetId,b);h.push(w)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(v,b){const w=qt(v);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>mt.forEach(b,(I=>mt.forEach(I.Es,(O=>w.persistence.referenceDelegate.addReference(C,I.targetId,O))).next((()=>mt.forEach(I.ds,(O=>w.persistence.referenceDelegate.removeReference(C,I.targetId,O)))))))))}catch(C){if(!Ou(C))throw C;It(t_,"Failed to update sequence numbers: "+C)}for(const C of b){const I=C.targetId;if(!C.fromCache){const O=w.Ms.get(I),Z=O.snapshotVersion,G=O.withLastLimboFreeSnapshotVersion(Z);w.Ms=w.Ms.insert(I,G)}}})(s.localStore,h))}async function bD(r,t){const n=qt(r);if(!n.currentUser.isEqual(t)){It(h_,"User change. New user:",t.toKey());const s=await UT(n.localStore,t);n.currentUser=t,(function(h,d){h.mu.forEach((y=>{y.forEach((v=>{v.reject(new Ct(dt.CANCELLED,d))}))})),h.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await oh(n,s.Ls)}}function ED(r,t){const n=qt(r),s=n.Au.get(t);if(s&&s.hu)return ae().add(s.key);{let l=ae();const h=n.Iu.get(t);if(!h)return l;for(const d of h){const y=n.Tu.get(d);l=l.unionWith(y.view.nu)}return l}}function rw(r){const t=qt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=tw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ED.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_D.bind(null,t),t.Pu.H_=sD.bind(null,t.eventManager),t.Pu.yu=aD.bind(null,t.eventManager),t}function TD(r){const t=qt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vD.bind(null,t),t}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=wf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return CN(this.persistence,new wN,t.initialUser,this.serializer)}Cu(t){return new BT($g.mi,this.serializer)}Du(t){return new ON}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class wD extends tf{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){_e(this.persistence.referenceDelegate instanceof $d,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new uN(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new BT((s=>$d.mi(s,n)),this.serializer)}}class _g{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>rb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=bD.bind(null,this.syncEngine),await nD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new rD})()}createDatastore(t){const n=wf(t.databaseInfo.databaseId),s=(function(h){return new VN(h)})(t.databaseInfo);return(function(h,d,y,v){return new HN(h,d,y,v)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,h,d,y){return new GN(s,l,h,d,y)})(this.localStore,this.datastore,t.asyncQueue,(n=>rb(this.syncEngine,n,0)),(function(){return $x.v()?new $x:new kN})())}createSyncEngine(t,n){return(function(l,h,d,y,v,b,w){const C=new cD(l,h,d,y,v,b);return w&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=qt(n);It(dl,"RemoteStore shutting down."),s.Ea.add(5),await ah(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_g.provider={build:()=>new _g};class f_{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Js("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const po="FirestoreClient";class SD{constructor(t,n,s,l,h){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Gn.UNAUTHENTICATED,this.clientId=df.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,(async d=>{It(po,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(It(po,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=a_(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Bm(r,t){r.asyncQueue.verifyOperationInProgress(),It(po,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await UT(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function ab(r,t){r.asyncQueue.verifyOperationInProgress();const n=await AD(r);It(po,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>tb(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>tb(t.remoteStore,l))),r._onlineComponents=t}async function AD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){It(po,"Using user provided OfflineComponentProvider");try{await Bm(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===dt.FAILED_PRECONDITION||l.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;hl("Error using user provided cache. Falling back to memory cache: "+n),await Bm(r,new tf)}}else It(po,"Using default OfflineComponentProvider"),await Bm(r,new wD(void 0));return r._offlineComponents}async function sw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(It(po,"Using user provided OnlineComponentProvider"),await ab(r,r._uninitializedComponentsProvider._online)):(It(po,"Using default OnlineComponentProvider"),await ab(r,new _g))),r._onlineComponents}function CD(r){return sw(r).then((t=>t.syncEngine))}async function ef(r){const t=await sw(r),n=t.eventManager;return n.onListen=hD.bind(null,t.syncEngine),n.onUnlisten=pD.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=dD.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=mD.bind(null,t.syncEngine),n}function RD(r,t,n={}){const s=new Ws;return r.asyncQueue.enqueueAndForget((async()=>(function(h,d,y,v,b){const w=new f_({next:I=>{w.Nu(),d.enqueueAndForget((()=>l_(h,C)));const O=I.docs.has(y);!O&&I.fromCache?b.reject(new Ct(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&v&&v.source==="server"?b.reject(new Ct(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(I)},error:I=>b.reject(I)}),C=new c_(_f(y.path),w,{includeMetadataChanges:!0,qa:!0});return o_(h,C)})(await ef(r),r.asyncQueue,t,n,s))),s.promise}function ID(r,t,n={}){const s=new Ws;return r.asyncQueue.enqueueAndForget((async()=>(function(h,d,y,v,b){const w=new f_({next:I=>{w.Nu(),d.enqueueAndForget((()=>l_(h,C))),I.fromCache&&v.source==="server"?b.reject(new Ct(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(I)},error:I=>b.reject(I)}),C=new c_(y,w,{includeMetadataChanges:!0,qa:!0});return o_(h,C)})(await ef(r),r.asyncQueue,t,n,s))),s.promise}function aw(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const ob=new Map;const ow="firestore.googleapis.com",lb=!0;class ub{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Ct(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ow,this.ssl=lb}else this.host=t.host,this.ssl=t.ssl??lb;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=VT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<oN)throw new Ct(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}QE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aw(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ct(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ct(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ct(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Cf{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ub({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ct(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ub(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new KE;switch(s.type){case"firstParty":return new UI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ct(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=ob.get(n);s&&(It("ComponentProvider","Removing Datastore"),ob.delete(n),s.terminate())})(this),Promise.resolve()}}function lw(r,t,n,s={}){r=bi(r,Cf);const l=Iu(t),h=r._getSettings(),d={...h,emulatorOptions:r._getEmulatorOptions()},y=`${t}:${n}`;l&&($b(`https://${y}`),Jb("Firestore",!0)),h.host!==ow&&h.host!==y&&hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...h,host:y,ssl:l,emulatorOptions:s};if(!Qs(v,d)&&(r._setSettings(v),s.mockUserToken)){let b,w;if(typeof s.mockUserToken=="string")b=s.mockUserToken,w=Gn.MOCK_USER;else{b=WA(s.mockUserToken,r._app?.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new Ct(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Gn(C)}r._authCredentials=new zI(new WE(b,w))}}class aa{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new aa(this.firestore,t,this._query)}}class qe{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qe(this.firestore,t,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(ih(n,qe._jsonSchema))return new qe(t,s||null,new Ot(Ne.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:mn("string",qe._jsonSchemaVersion),referencePath:mn("string")};class Ks extends aa{constructor(t,n,s){super(t,n,_f(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qe(this.firestore,null,new Ot(t))}withConverter(t){return new Ks(this.firestore,t,this._path)}}function ea(r,t,...n){if(r=gn(r),YE("collection","path",t),r instanceof Cf){const s=Ne.fromString(t,...n);return Ex(s),new Ks(r,null,s)}{if(!(r instanceof qe||r instanceof Ks))throw new Ct(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ne.fromString(t,...n));return Ex(s),new Ks(r.firestore,null,s)}}function Mn(r,t,...n){if(r=gn(r),arguments.length===1&&(t=df.newId()),YE("doc","path",t),r instanceof Cf){const s=Ne.fromString(t,...n);return bx(s),new qe(r,null,new Ot(s))}{if(!(r instanceof qe||r instanceof Ks))throw new Ct(dt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ne.fromString(t,...n));return bx(s),new qe(r.firestore,r instanceof Ks?r.converter:null,new Ot(s))}}const cb="AsyncQueue";class hb{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HT(this,"async_queue_retry"),this._c=()=>{const s=Vm();s&&It(cb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ws;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Ou(t))throw t;It(cb,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Js("INTERNAL UNHANDLED ERROR: ",db(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=s_.createAndSchedule(this,t,n,s,(h=>this.hc(h)));return this.tc.push(l),l}uc(){this.nc&&Vt(47125,{Pc:db(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function db(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}function fb(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const h of s)if(h in l&&typeof l[h]=="function")return!0;return!1})(r,["next","error","complete"])}class na extends Cf{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new hb,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hb(t),this._firestoreClient=void 0,await t}}}function uw(r,t){const n=typeof r=="object"?r:iE(),s=typeof r=="string"?r:Kd,l=Dg(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const h=GA("firestore");h&&lw(l,...h)}return l}function lh(r){if(r._terminated)throw new Ct(dt.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||PD(r),r._firestoreClient}function PD(r){const t=r._freezeSettings(),n=(function(l,h,d,y){return new iP(l,h,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,aw(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new SD(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}})(r._componentsProvider))}class Ui{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ui(Pn.fromBase64String(t))}catch(n){throw new Ct(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ui(Pn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ih(t,Ui._jsonSchema))return Ui.fromBase64String(t.bytes)}}Ui._jsonSchemaVersion="firestore/bytes/1.0",Ui._jsonSchema={type:mn("string",Ui._jsonSchemaVersion),bytes:mn("string")};class uh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ct(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class yo{constructor(t){this._methodName=t}}class Lr{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ct(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ct(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return se(this._lat,t._lat)||se(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Lr._jsonSchemaVersion}}static fromJSON(t){if(ih(t,Lr._jsonSchema))return new Lr(t.latitude,t.longitude)}}Lr._jsonSchemaVersion="firestore/geoPoint/1.0",Lr._jsonSchema={type:mn("string",Lr._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};class Or{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==l[h])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ih(t,Or._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Or(t.vectorValues);throw new Ct(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Or._jsonSchemaVersion="firestore/vectorValue/1.0",Or._jsonSchema={type:mn("string",Or._jsonSchemaVersion),vectorValues:mn("object")};const ND=/^__.*__$/;class DD{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new _o(t,this.data,this.fieldMask,n,this.fieldTransforms):new rh(t,this.data,n,this.fieldTransforms)}}class cw{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new _o(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function hw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt(40011,{Ac:r})}}class Rf{constructor(t,n,s,l,h,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Rf({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return nf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(hw(this.Ac)&&ND.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class LD{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||wf(t)}Cc(t,n,s,l=!1){return new Rf({Ac:t,methodName:n,Dc:s,path:In.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function If(r){const t=r._freezeSettings(),n=wf(r._databaseId);return new LD(r._databaseId,!!t.ignoreUndefinedProperties,n)}function dw(r,t,n,s,l,h={}){const d=r.Cc(h.merge||h.mergeFields?2:0,t,n,l);y_("Data must be an object, but it was:",d,s);const y=pw(s,d);let v,b;if(h.merge)v=new Fi(d.fieldMask),b=d.fieldTransforms;else if(h.mergeFields){const w=[];for(const C of h.mergeFields){const I=yg(t,C,n);if(!d.contains(I))throw new Ct(dt.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);gw(w,I)||w.push(I)}v=new Fi(w),b=d.fieldTransforms.filter((C=>v.covers(C.field)))}else v=null,b=d.fieldTransforms;return new DD(new xi(y),v,b)}class Pf extends yo{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Pf}}function fw(r,t,n){return new Rf({Ac:3,Dc:t.settings.Dc,methodName:r._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class p_ extends yo{_toFieldTransform(t){return new bf(t.path,new Wc)}isEqual(t){return t instanceof p_}}class m_ extends yo{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=fw(this,t,!0),s=this.vc.map((h=>yl(h,n))),l=new Tu(s);return new bf(t.path,l)}isEqual(t){return t instanceof m_&&Qs(this.vc,t.vc)}}class g_ extends yo{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=fw(this,t,!0),s=this.vc.map((h=>yl(h,n))),l=new wu(s);return new bf(t.path,l)}isEqual(t){return t instanceof g_&&Qs(this.vc,t.vc)}}class __ extends yo{constructor(t,n){super(t),this.Fc=n}_toFieldTransform(t){const n=new Kc(t.serializer,bT(t.serializer,this.Fc));return new bf(t.path,n)}isEqual(t){return t instanceof __&&this.Fc===t.Fc}}function OD(r,t,n,s){const l=r.Cc(1,t,n);y_("Data must be an object, but it was:",l,s);const h=[],d=xi.empty();go(s,((v,b)=>{const w=v_(t,v,n);b=gn(b);const C=l.yc(w);if(b instanceof Pf)h.push(w);else{const I=yl(b,C);I!=null&&(h.push(w),d.set(w,I))}}));const y=new Fi(h);return new cw(d,y,l.fieldTransforms)}function kD(r,t,n,s,l,h){const d=r.Cc(1,t,n),y=[yg(t,s,n)],v=[l];if(h.length%2!=0)throw new Ct(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<h.length;I+=2)y.push(yg(t,h[I])),v.push(h[I+1]);const b=[],w=xi.empty();for(let I=y.length-1;I>=0;--I)if(!gw(b,y[I])){const O=y[I];let Z=v[I];Z=gn(Z);const G=d.yc(O);if(Z instanceof Pf)b.push(O);else{const V=yl(Z,G);V!=null&&(b.push(O),w.set(O,V))}}const C=new Fi(b);return new cw(w,C,d.fieldTransforms)}function MD(r,t,n,s=!1){return yl(n,r.Cc(s?4:3,t))}function yl(r,t){if(mw(r=gn(r)))return y_("Unsupported field value:",t,r),pw(r,t);if(r instanceof yo)return(function(s,l){if(!hw(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(l);h&&l.fieldTransforms.push(h)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const h=[];let d=0;for(const y of s){let v=yl(y,l.wc(d));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),d++}return{arrayValue:{values:h}}})(r,t)}return(function(s,l){if((s=gn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return bT(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=De.fromDate(s);return{timestampValue:Xd(l.serializer,h)}}if(s instanceof De){const h=new De(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xd(l.serializer,h)}}if(s instanceof Lr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ui)return{bytesValue:DT(l.serializer,s._byteString)};if(s instanceof qe){const h=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(h))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Qg(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Or)return(function(d,y){return{mapValue:{fields:{[sT]:{stringValue:aT},[Yd]:{arrayValue:{values:d.toArray().map((b=>{if(typeof b!="number")throw y.Sc("VectorValues must only contain numeric values.");return Wg(y.serializer,b)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${ff(s)}`)})(r,t)}function pw(r,t){const n={};return JE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):go(r,((s,l)=>{const h=yl(l,t.mc(s));h!=null&&(n[s]=h)})),{mapValue:{fields:n}}}function mw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof De||r instanceof Lr||r instanceof Ui||r instanceof qe||r instanceof yo||r instanceof Or)}function y_(r,t,n){if(!mw(n)||!XE(n)){const s=ff(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function yg(r,t,n){if((t=gn(t))instanceof uh)return t._internalPath;if(typeof t=="string")return v_(r,t);throw nf("Field path arguments must be of type string or ",r,!1,void 0,n)}const jD=new RegExp("[~\\*/\\[\\]]");function v_(r,t,n){if(t.search(jD)>=0)throw nf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new uh(...t.split("."))._internalPath}catch{throw nf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function nf(r,t,n,s,l){const h=s&&!s.isEmpty(),d=l!==void 0;let y=`Function ${t}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let v="";return(h||d)&&(v+=" (found",h&&(v+=` in field ${s}`),d&&(v+=` in document ${l}`),v+=")"),new Ct(dt.INVALID_ARGUMENT,y+r+v)}function gw(r,t){return r.some((n=>n.isEqual(t)))}class _w{constructor(t,n,s,l,h){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new zD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Nf("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zD extends _w{data(){return super.data()}}function Nf(r,t){return typeof t=="string"?v_(r,t):t instanceof uh?t._internalPath:t._delegate._internalPath}function yw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ct(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class x_{}class b_ extends x_{}function vl(r,t,...n){let s=[];t instanceof x_&&s.push(t),s=s.concat(n),(function(h){const d=h.filter((v=>v instanceof Df)).length,y=h.filter((v=>v instanceof ch)).length;if(d>1||d>0&&y>0)throw new Ct(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class ch extends b_{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new ch(t,n,s)}_apply(t){const n=this._parse(t);return vw(t._query,n),new aa(t.firestore,t.converter,og(t._query,n))}_parse(t){const n=If(t.firestore);return(function(h,d,y,v,b,w,C){let I;if(b.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Ct(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){mb(C,w);const Z=[];for(const G of C)Z.push(pb(v,h,G));I={arrayValue:{values:Z}}}else I=pb(v,h,C)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||mb(C,w),I=MD(y,d,C,w==="in"||w==="not-in");return pn.create(b,w,I)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function ju(r,t,n){const s=t,l=Nf("where",r);return ch._create(l,s,n)}class Df extends x_{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Df(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Mr.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,h){let d=l;const y=h.getFlattenedFilters();for(const v of y)vw(d,v),d=og(d,v)})(t._query,n),new aa(t.firestore,t.converter,og(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lf extends b_{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Lf(t,n)}_apply(t){const n=(function(l,h,d){if(l.startAt!==null)throw new Ct(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ct(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zc(h,d)})(t._query,this._field,this._direction);return new aa(t.firestore,t.converter,(function(l,h){const d=l.explicitOrderBy.concat([h]);return new ku(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,n))}}function E_(r,t="asc"){const n=t,s=Nf("orderBy",r);return Lf._create(s,n)}function pb(r,t,n){if(typeof(n=gn(n))=="string"){if(n==="")throw new Ct(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(t)&&n.indexOf("/")!==-1)throw new Ct(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Ne.fromString(n));if(!Ot.isDocumentKey(s))throw new Ct(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Px(r,new Ot(s))}if(n instanceof qe)return Px(r,n._key);throw new Ct(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(n)}.`)}function mb(r,t){if(!Array.isArray(r)||r.length===0)throw new Ct(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vw(r,t){const n=(function(l,h){for(const d of l)for(const y of d.getFlattenedFilters())if(h.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new Ct(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ct(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class xw{convertValue(t,n="none"){switch(ho(t)){case 0:return null;case 1:return t.booleanValue;case 2:return sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(co(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Vt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return go(t,((l,h)=>{s[l]=this.convertValue(h,n)})),s}convertVectorValue(t){const n=t.fields?.[Yd].arrayValue?.values?.map((s=>sn(s.doubleValue)));return new Or(n)}convertGeoPoint(t){return new Lr(sn(t.latitude),sn(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=gf(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(qc(t));default:return null}}convertTimestamp(t){const n=uo(t);return new De(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Ne.fromString(t);_e(zT(s),9688,{name:t});const l=new xu(s.get(1),s.get(3)),h=new Ot(s.popFirst(5));return l.isEqual(n)||Js(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}function bw(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class fu{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ao extends _w{constructor(t,n,s,l,h,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Nf("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=ao._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",ao._jsonSchema={type:mn("string",ao._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};class zc extends ao{data(t={}){return super.data(t)}}class oo{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new fu(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new zc(this._firestore,this._userDataWriter,s.key,s,new fu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ct(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,h){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((y=>{const v=new zc(l._firestore,l._userDataWriter,y.doc.key,y.doc,new fu(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>h||y.type!==3)).map((y=>{const v=new zc(l._firestore,l._userDataWriter,y.doc.key,y.doc,new fu(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let b=-1,w=-1;return y.type!==0&&(b=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),w=d.indexOf(y.doc.key)),{type:VD(y.type),doc:v,oldIndex:b,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=oo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=df.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((h=>{h._document!==null&&(n.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function VD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt(61501,{type:r})}}function fl(r){r=bi(r,qe);const t=bi(r.firestore,na);return RD(lh(t),r._key).then((n=>ww(t,r,n)))}oo._jsonSchemaVersion="firestore/querySnapshot/1.0",oo._jsonSchema={type:mn("string",oo._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};class T_ extends xw{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ui(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function Ew(r){r=bi(r,aa);const t=bi(r.firestore,na),n=lh(t),s=new T_(t);return yw(r._query),ID(n,r._query).then((l=>new oo(t,s,r,l)))}function Tw(r,t,n){r=bi(r,qe);const s=bi(r.firestore,na),l=bw(r.converter,t,n);return Of(s,[dw(If(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Dr.none())])}function mo(r,t,n,...s){r=bi(r,qe);const l=bi(r.firestore,na),h=If(l);let d;return d=typeof(t=gn(t))=="string"||t instanceof uh?kD(h,"updateDoc",r._key,t,n,s):OD(h,"updateDoc",r._key,t),Of(l,[d.toMutation(r._key,Dr.exists(!0))])}function w_(r,t){const n=bi(r.firestore,na),s=Mn(r),l=bw(r.converter,t);return Of(n,[dw(If(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Dr.exists(!1))]).then((()=>s))}function ps(r,...t){r=gn(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||fb(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(fb(t[s])){const v=t[s];t[s]=v.next?.bind(v),t[s+1]=v.error?.bind(v),t[s+2]=v.complete?.bind(v)}let h,d,y;if(r instanceof qe)d=bi(r.firestore,na),y=_f(r._key.path),h={next:v=>{t[s]&&t[s](ww(d,r,v))},error:t[s+1],complete:t[s+2]};else{const v=bi(r,aa);d=bi(v.firestore,na),y=v._query;const b=new T_(d);h={next:w=>{t[s]&&t[s](new oo(d,b,v,w))},error:t[s+1],complete:t[s+2]},yw(r._query)}return(function(b,w,C,I){const O=new f_(I),Z=new c_(w,O,C);return b.asyncQueue.enqueueAndForget((async()=>o_(await ef(b),Z))),()=>{O.Nu(),b.asyncQueue.enqueueAndForget((async()=>l_(await ef(b),Z)))}})(lh(d),y,l,h)}function Of(r,t){return(function(s,l){const h=new Ws;return s.asyncQueue.enqueueAndForget((async()=>gD(await CD(s),l,h))),h.promise})(lh(r),t)}function ww(r,t,n){const s=n.docs.get(t._key),l=new T_(r);return new ao(r,l,t._key,s,new fu(n.hasPendingWrites,n.fromCache),t.converter)}function rf(){return new p_("serverTimestamp")}function S_(...r){return new m_("arrayUnion",r)}function A_(...r){return new g_("arrayRemove",r)}function vg(r){return new __("increment",r)}(function(t,n=!0){(function(l){Du=l})(Pu),yu(new ol("firestore",((s,{instanceIdentifier:l,options:h})=>{const d=s.getProvider("app").getImmediate(),y=new na(new VI(s.getProvider("auth-internal")),new FI(d,s.getProvider("app-check-internal")),(function(b,w){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new Ct(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(b.options.projectId,w)})(d,l),d);return h={useFetchStreams:n,...h},y._setSettings(h),y}),"PUBLIC").setMultipleInstances(!0)),ro(_x,yx,t),ro(_x,yx,"esm2020")})();const BD=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xw,Bytes:Ui,CollectionReference:Ks,DocumentReference:qe,DocumentSnapshot:ao,FieldPath:uh,FieldValue:yo,Firestore:na,FirestoreError:Ct,GeoPoint:Lr,Query:aa,QueryCompositeFilterConstraint:Df,QueryConstraint:b_,QueryDocumentSnapshot:zc,QueryFieldFilterConstraint:ch,QueryOrderByConstraint:Lf,QuerySnapshot:oo,SnapshotMetadata:fu,Timestamp:De,VectorValue:Or,_AutoId:df,_ByteString:Pn,_DatabaseId:xu,_DocumentKey:Ot,_EmptyAuthCredentialsProvider:KE,_FieldPath:In,_cast:bi,_logWarn:hl,_validateIsNotUsedTogether:QE,addDoc:w_,arrayRemove:A_,arrayUnion:S_,collection:ea,connectFirestoreEmulator:lw,doc:Mn,ensureFirestoreConfigured:lh,executeWrite:Of,getDoc:fl,getDocs:Ew,getFirestore:uw,increment:vg,onSnapshot:ps,orderBy:E_,query:vl,serverTimestamp:rf,setDoc:Tw,updateDoc:mo,where:ju},Symbol.toStringTag,{value:"Module"}));var UD="firebase",FD="12.7.0";ro(UD,FD,"app");const HD={apiKey:"AIzaSyCxp-X3yonTaDpaqSY9PQVubs75tkQIciw",authDomain:"staynest-10efe.firebaseapp.com",projectId:"staynest-10efe",storageBucket:"staynest-10efe.firebasestorage.app",messagingSenderId:"43207116386",appId:"1:43207116386:web:d086629352a4e64814b33b",measurementId:"G-BZHPD26N2R"},Sw=nE(HD),ze=uw(Sw),Ae=MI(Sw),qD=Object.freeze(Object.defineProperty({__proto__:null,auth:Ae,db:ze},Symbol.toStringTag,{value:"Module"})),GD=async(r,t,n,s)=>{try{const h=(await vR(Ae,r,t)).user;return await bR(h),await fetch("http://localhost:5000/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:h.uid,email:h.email,role:n,fullName:s})}),h}catch(l){throw console.error("Firebase Registration Error:",l),l}},ZD=async(r,t)=>{try{const s=(await xR(Ae,r,t)).user,l=await fl(Mn(ze,"users",s.uid)),h=l.exists()?l.data().role:"tenant";return{...s,role:h}}catch(n){throw console.error("Firebase Login Error:",n),n}},WD=async()=>{try{await SR(Ae),localStorage.removeItem("user")}catch(r){console.error("Firebase Logout Error:",r)}},KD=()=>new Promise(r=>{wR(Ae,async t=>{if(t){const n=await fl(Mn(ze,"users",t.uid)),s=n.exists()?n.data().role:"tenant";r({...t,role:s})}else r(null)})}),YD=()=>{const r=an(),[t,n]=M.useState("tenant"),[s,l]=M.useState(""),[h,d]=M.useState(""),[y,v]=M.useState(!1),b=async w=>{w.preventDefault(),v(!0);try{await ZD(s,h),r(t==="tenant"?"/tenant/dashboard":"/broker/dashboard")}catch(C){alert(C.message||"Login Failed")}finally{v(!1)}};return _.jsxs("div",{className:"mesh-gradient",style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",position:"relative",overflow:"hidden"},children:[_.jsx("div",{className:"aura-bg",style:{width:"400px",height:"400px",background:"#1E3A8A",top:"-100px",left:"-100px",opacity:.15}}),_.jsx("div",{className:"aura-bg",style:{width:"300px",height:"300px",background:"#22C55E",bottom:"-50px",right:"-50px",opacity:.1,animationDelay:"2s"}}),_.jsxs("div",{className:"glass-morphism animate-in",style:{width:"100%",maxWidth:"400px",padding:"40px 32px",borderRadius:"32px",textAlign:"center",position:"relative",zIndex:1},children:[_.jsxs("div",{style:{marginBottom:"32px"},children:[_.jsx("div",{style:{display:"inline-flex",background:"linear-gradient(135deg, #1E3A8A, #3B82F6)",padding:"16px",borderRadius:"24px",marginBottom:"20px",boxShadow:"0 8px 24px rgba(30, 58, 138, 0.2)"},children:_.jsx("span",{className:"material-icons-round",style:{color:"white",fontSize:"32px"},children:"home"})}),_.jsx("h1",{style:{fontSize:"32px",fontWeight:"800",margin:"0 0 8px",color:"var(--color-text-pri)",letterSpacing:"-1px"},children:"Welcome Back"}),_.jsx("p",{style:{color:"var(--color-text-sec)",fontSize:"15px",fontWeight:"500"},children:"Login to your premium stay experience"})]}),_.jsxs("div",{style:{display:"flex",background:"#F1F5F9",padding:"4px",borderRadius:"16px",marginBottom:"32px",position:"relative"},children:[["tenant","broker"].map(w=>_.jsx("div",{onClick:()=>n(w),style:{flex:1,padding:"12px",borderRadius:"12px",cursor:"pointer",zIndex:2,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",color:t===w?"var(--color-brand)":"var(--color-text-sec)",fontWeight:"700",fontSize:"14px"},children:w==="tenant"?"Student":"Broker"},w)),_.jsx("div",{style:{position:"absolute",top:"4px",bottom:"4px",left:t==="tenant"?"4px":"50%",width:"calc(50% - 4px)",background:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28)",zIndex:1}})]}),_.jsxs("form",{onSubmit:b,style:{textAlign:"left"},children:[_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",marginLeft:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px",color:"var(--color-brand)"},children:"alternate_email"}),_.jsx("label",{style:{fontSize:"13px",fontWeight:"700",color:"var(--color-text-pri)"},children:"Email Address"})]}),_.jsx("input",{type:"email",placeholder:"name@example.com",className:"input-field input-glow",value:s,onChange:w=>l(w.target.value),required:!0})]}),_.jsxs("div",{style:{marginBottom:"32px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",marginLeft:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px",color:"var(--color-brand)"},children:"lock_open"}),_.jsx("label",{style:{fontSize:"13px",fontWeight:"700",color:"var(--color-text-pri)"},children:"Password"})]}),_.jsx("input",{type:"password",placeholder:"",className:"input-field input-glow",value:h,onChange:w=>d(w.target.value),required:!0})]}),_.jsx("button",{className:"btn-primary",type:"submit",disabled:y,style:{width:"100%",height:"56px",borderRadius:"16px"},children:y?_.jsx("div",{className:"spinner-small",style:{borderTopColor:"white"}}):"Sign In"})]}),_.jsx("div",{style:{marginTop:"32px",display:"flex",flexDirection:"column",gap:"16px"},children:_.jsx(of,{to:"/register",style:{textDecoration:"none"},children:_.jsxs("p",{style:{fontSize:"14px",color:"var(--color-text-sec)",fontWeight:"600",margin:0},children:["New to StayNest? ",_.jsx("span",{style:{color:"var(--color-brand)",fontWeight:"800"},children:"Create an account"})]})})})]})]})},QD=()=>{const r=an(),[t,n]=M.useState(1),[s,l]=M.useState("tenant"),[h,d]=M.useState(""),[y,v]=M.useState(""),[b,w]=M.useState(""),[C,I]=M.useState(!1),O=async Z=>{Z.preventDefault(),I(!0);try{await GD(h,y,s,b),n(2)}catch(G){alert(G.message||"Registration Failed")}finally{I(!1)}};return _.jsxs("div",{className:"mesh-gradient",style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",position:"relative",overflow:"hidden"},children:[_.jsx("div",{className:"aura-bg",style:{width:"400px",height:"400px",background:"#22C55E",top:"-100px",right:"-100px",opacity:.15}}),_.jsx("div",{className:"aura-bg",style:{width:"350px",height:"350px",background:"#1E3A8A",bottom:"-50px",left:"-50px",opacity:.1,animationDelay:"1.5s"}}),_.jsxs("div",{className:"glass-morphism animate-in",style:{width:"100%",maxWidth:"420px",padding:"40px 32px",borderRadius:"32px",textAlign:"center",position:"relative",zIndex:1},children:[t===1?_.jsxs(_.Fragment,{children:[_.jsxs("div",{style:{marginBottom:"32px"},children:[_.jsx("div",{style:{display:"inline-flex",background:"linear-gradient(135deg, #22C55E, #10B981)",padding:"16px",borderRadius:"24px",marginBottom:"20px",boxShadow:"0 8px 24px rgba(34, 197, 94, 0.2)"},children:_.jsx("span",{className:"material-icons-round",style:{color:"white",fontSize:"32px"},children:"home"})}),_.jsx("h1",{style:{fontSize:"32px",fontWeight:"800",margin:"0 0 8px",color:"var(--color-text-pri)",letterSpacing:"-1px"},children:"Join StayNest"}),_.jsx("p",{style:{color:"var(--color-text-sec)",fontSize:"15px",fontWeight:"500"},children:"Your premium stay starts here"})]}),_.jsxs("div",{style:{display:"flex",background:"#F1F5F9",padding:"4px",borderRadius:"16px",marginBottom:"28px",position:"relative"},children:[["tenant","broker"].map(Z=>_.jsx("div",{onClick:()=>l(Z),style:{flex:1,padding:"12px",borderRadius:"12px",cursor:"pointer",zIndex:2,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",color:s===Z?"var(--color-success)":"var(--color-text-sec)",fontWeight:"700",fontSize:"14px"},children:Z==="tenant"?"Student":"Broker"},Z)),_.jsx("div",{style:{position:"absolute",top:"4px",bottom:"4px",left:s==="tenant"?"4px":"50%",width:"calc(50% - 4px)",background:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28)",zIndex:1}})]}),_.jsxs("form",{onSubmit:O,style:{textAlign:"left"},children:[_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",marginLeft:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px",color:"var(--color-success)"},children:"badge"}),_.jsx("label",{style:{fontSize:"13px",fontWeight:"700",color:"var(--color-text-pri)"},children:"Full Name"})]}),_.jsx("input",{type:"text",placeholder:"e.g. Aiswarya KS",className:"input-field input-glow",required:!0,value:b,onChange:Z=>w(Z.target.value)})]}),_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",marginLeft:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px",color:"var(--color-success)"},children:"mail_outline"}),_.jsx("label",{style:{fontSize:"13px",fontWeight:"700",color:"var(--color-text-pri)"},children:"Email Address"})]}),_.jsx("input",{type:"email",placeholder:"name@university.com",className:"input-field input-glow",required:!0,value:h,onChange:Z=>d(Z.target.value)})]}),_.jsxs("div",{style:{marginBottom:"32px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",marginLeft:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px",color:"var(--color-success)"},children:"lock_open"}),_.jsx("label",{style:{fontSize:"13px",fontWeight:"700",color:"var(--color-text-pri)"},children:"Create Password"})]}),_.jsx("input",{type:"password",placeholder:"",className:"input-field input-glow",required:!0,value:y,onChange:Z=>v(Z.target.value)})]}),_.jsx("button",{className:"btn-primary",type:"submit",disabled:C,style:{width:"100%",height:"56px",borderRadius:"16px",background:"var(--color-success)"},children:C?_.jsx("div",{className:"spinner-small",style:{borderTopColor:"white"}}):"Create Account"})]})]}):_.jsxs("div",{style:{py:"20px"},children:[_.jsx("div",{style:{display:"inline-flex",background:"#F0FDF4",padding:"24px",borderRadius:"32px",marginBottom:"24px",color:"var(--color-success)"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"64px"},children:"mark_email_read"})}),_.jsx("h2",{style:{fontSize:"28px",fontWeight:"800",marginBottom:"12px",color:"var(--color-text-pri)"},children:"Check your mail"}),_.jsxs("p",{style:{color:"var(--color-text-sec)",fontSize:"15px",lineHeight:"1.6",marginBottom:"32px"},children:["We've sent a verification link to",_.jsx("br",{}),_.jsx("strong",{style:{color:"var(--color-text-pri)"},children:h})]}),_.jsx("div",{style:{background:"#F8FAFC",padding:"20px",borderRadius:"20px",marginBottom:"32px",border:"1px dashed #E2E8F0",textAlign:"left"},children:_.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[_.jsx("span",{className:"material-icons-round",style:{color:"var(--color-brand)",fontSize:"20px"},children:"info"}),_.jsx("p",{style:{margin:0,fontSize:"13px",color:"var(--color-text-sec)",fontWeight:"500"},children:"If you don't see it in a few minutes, please check your spam folder."})]})}),_.jsx("button",{className:"btn-primary",onClick:()=>r("/login"),style:{width:"100%",height:"56px",borderRadius:"16px"},children:"Back to Login"})]}),_.jsx("div",{style:{marginTop:"32px"},children:_.jsxs("p",{style:{fontSize:"14px",color:"var(--color-text-sec)",fontWeight:"600",margin:0},children:["Already a member? ",_.jsx(of,{to:"/login",style:{color:"var(--color-success)",fontWeight:"800",textDecoration:"none"},children:"Log In"})]})})]})]})},XD="modulepreload",$D=function(r,t){return new URL(r,t).href},gb={},_b=function(t,n,s){let l=Promise.resolve();if(n&&n.length>0){let b=function(w){return Promise.all(w.map(C=>Promise.resolve(C).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};const d=document.getElementsByTagName("link"),y=document.querySelector("meta[property=csp-nonce]"),v=y?.nonce||y?.getAttribute("nonce");l=b(n.map(w=>{if(w=$D(w,s),w in gb)return;gb[w]=!0;const C=w.endsWith(".css"),I=C?'[rel="stylesheet"]':"";if(s)for(let Z=d.length-1;Z>=0;Z--){const G=d[Z];if(G.href===w&&(!C||G.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${I}`))return;const O=document.createElement("link");if(O.rel=C?"stylesheet":XD,C||(O.as="script"),O.crossOrigin="",O.href=w,v&&O.setAttribute("nonce",v),document.head.appendChild(O),C)return new Promise((Z,G)=>{O.addEventListener("load",Z),O.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${w}`)))})}))}function h(d){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=d,window.dispatchEvent(y),!y.defaultPrevented)throw d}return l.then(d=>{for(const y of d||[])y.status==="rejected"&&h(y.reason);return t().catch(h)})},kf=()=>{const r=an(),t=Ei(),[n,s]=M.useState(0),l=Ae.currentUser;M.useEffect(()=>{if(!l)return;const y=vl(ea(ze,"chats"),ju("participants","array-contains",l.uid)),v=ps(y,b=>{let w=0;b.docs.forEach(C=>{const I=C.data();w+=I[`unreadCount_${l.uid}`]||0}),s(w)});return()=>v()},[l]);const h=[{label:"Explore",icon:"search",path:"/tenant/dashboard"},{label:"Wishlist",icon:"favorite_border",path:"/tenant/favorites"},{label:"Messages",icon:"chat_bubble_outline",path:"/messages",badge:n},{label:"Profile",icon:"person_outline",path:"/profile"}],d=y=>t.pathname===y;return _.jsx("div",{style:{position:"fixed",bottom:0,left:0,width:"100%",height:"65px",background:"white",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",zIndex:1e3,paddingBottom:"env(safe-area-inset-bottom)"},children:h.map(y=>_.jsxs("div",{onClick:()=>r(y.path),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",cursor:"pointer",color:d(y.path)?"var(--color-brand)":"#94a3b8",transition:"all 0.2s"},children:[_.jsxs("span",{className:"material-icons-round",style:{fontSize:"24px",fontWeight:d(y.path)?"bold":"normal",position:"relative"},children:[y.icon,y.badge>0&&_.jsx("div",{style:{position:"absolute",top:"-6px",right:"-8px",background:"#EF4444",color:"white",borderRadius:"50%",minWidth:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",fontWeight:"900",border:"1.5px solid white"},children:y.badge})]}),_.jsx("span",{style:{fontSize:"10px",fontWeight:d(y.path)?"600":"500"},children:y.label})]},y.label))})},yb=()=>{const r=an(),n=Ei().pathname.startsWith("/broker"),[s,l]=M.useState(null),[h,d]=M.useState(!0),[y,v]=M.useState(!1);M.useEffect(()=>{(async()=>{const I=await KD();l(I),d(!1)})()},[]);const b=async()=>{window.confirm("Are you sure you want to log out?")&&(await WD(),r("/login"))},w=async C=>{if(!(!C.target.files||!C.target.files[0])){v(!0);try{const I=C.target.files[0],O="daszhocrj",Z="staynest_preset",G=new FormData;G.append("file",I),G.append("upload_preset",Z);const V=await fetch(`https://api.cloudinary.com/v1_1/${O}/image/upload`,{method:"POST",body:G});if(!V.ok)throw new Error("Upload failed");const q=(await V.json()).secure_url,{auth:nt,db:lt}=await _b(async()=>{const{auth:D,db:j}=await Promise.resolve().then(()=>qD);return{auth:D,db:j}},[],import.meta.url),{doc:bt,updateDoc:Tt}=await _b(async()=>{const{doc:D,updateDoc:j}=await Promise.resolve().then(()=>BD);return{doc:D,updateDoc:j}},void 0,import.meta.url),k=bt(lt,"users",nt.currentUser.uid);await Tt(k,{photoURL:q}),l(D=>({...D,photoURL:q})),alert("Profile picture updated!")}catch(I){console.error("Profile pic error:",I),alert("Failed to update profile picture.")}finally{v(!1)}}};return h?_.jsx("div",{style:{padding:"100px",textAlign:"center"},children:_.jsx("div",{className:"spinner-small",style:{margin:"0 auto"}})}):_.jsxs("div",{style:{padding:n?"0":"16px",paddingBottom:"100px",maxWidth:n?"100%":"600px",margin:n?"0":"0 auto"},children:[_.jsx("h1",{style:{fontSize:n?"28px":"24px",fontWeight:"800",color:"var(--color-brand)",marginBottom:"32px",letterSpacing:"-0.5px"},children:"Profile"}),_.jsxs("div",{style:{background:"white",padding:"32px",borderRadius:"24px",border:"1px solid #E2E8F0",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.03)",marginBottom:"32px"},children:[_.jsxs("div",{onClick:()=>document.getElementById("profile-pic-input").click(),style:{width:"100px",height:"100px",background:"var(--color-brand)",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 8px 16px rgba(30,58,138,0.15)",cursor:"pointer",overflow:"hidden",position:"relative"},children:[s?.photoURL?_.jsx("img",{src:s.photoURL,alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}}):_.jsx("span",{className:"material-icons-round",style:{fontSize:"48px"},children:"person"}),y&&_.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx("div",{className:"spinner-small",style:{borderTopColor:"white",width:"20px",height:"20px"}})}),_.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",background:"rgba(0,0,0,0.3)",padding:"2px 0",fontSize:"10px",fontWeight:"700"},children:"EDIT"})]}),_.jsx("input",{type:"file",id:"profile-pic-input",hidden:!0,onChange:w,accept:"image/*"}),_.jsx("h2",{style:{margin:"0 0 6px",fontSize:"22px",fontWeight:"800",color:"var(--color-text-pri)"},children:s?.fullName||"User Name"}),_.jsx("p",{style:{color:"#64748B",margin:0,fontSize:"15px",fontWeight:"500"},children:s?.email}),_.jsx("div",{style:{display:"inline-block",background:"var(--color-brand-light)",padding:"6px 16px",borderRadius:"30px",fontSize:"13px",marginTop:"16px",fontWeight:"800",color:"var(--color-brand)",textTransform:"uppercase",letterSpacing:"0.5px"},children:s?.role||"Tenant"})]}),_.jsxs("div",{style:{marginTop:"8px"},children:[_.jsx("h3",{style:{fontSize:"18px",fontWeight:"800",color:"var(--color-text-pri)",marginBottom:"16px",paddingLeft:n?"0":"4px"},children:"Account Settings"}),n?_.jsxs(_.Fragment,{children:[_.jsxs("div",{onClick:()=>r("/broker/dashboard"),style:Ka,children:[_.jsx("div",{style:Ya,children:_.jsx("span",{className:"material-icons-round",children:"dashboard"})}),_.jsxs("div",{style:{flex:1},children:[_.jsx("span",{style:{display:"block",fontWeight:"700",fontSize:"15px"},children:"My Dashboard"}),_.jsx("span",{style:{display:"block",fontSize:"12px",color:"#64748B"},children:"Manage your property listings"})]}),_.jsx("span",{className:"material-icons-round",style:{color:"#CBD5E1"},children:"chevron_right"})]}),_.jsxs("div",{onClick:()=>r("/broker/verification"),style:Ka,children:[_.jsx("div",{style:Ya,children:_.jsx("span",{className:"material-icons-round",children:"verified_user"})}),_.jsxs("div",{style:{flex:1},children:[_.jsx("span",{style:{display:"block",fontWeight:"700",fontSize:"15px"},children:"Verification Status"}),_.jsx("span",{style:{display:"block",fontSize:"12px",color:"#64748B"},children:"Upload and check your documents"})]}),_.jsx("span",{className:"material-icons-round",style:{color:"#CBD5E1"},children:"chevron_right"})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{onClick:()=>r("/tenant/dashboard"),style:Ka,children:[_.jsx("div",{style:Ya,children:_.jsx("span",{className:"material-icons-round",children:"explore"})}),_.jsx("span",{style:{flex:1,fontWeight:"700"},children:"Explore Homes"}),_.jsx("span",{className:"material-icons-round",style:{color:"#CBD5E1"},children:"chevron_right"})]}),_.jsxs("div",{onClick:()=>r("/tenant/favorites"),style:Ka,children:[_.jsx("div",{style:Ya,children:_.jsx("span",{className:"material-icons-round",children:"favorite_border"})}),_.jsx("span",{style:{flex:1,fontWeight:"700"},children:"Wishlist"}),_.jsx("span",{className:"material-icons-round",style:{color:"#CBD5E1"},children:"chevron_right"})]})]}),s?.role==="admin"&&_.jsxs("div",{onClick:()=>r("/admin"),style:{...Ka,border:"1.5px solid var(--color-brand-light)",background:"#F0F9FF",marginBottom:"16px"},children:[_.jsx("div",{style:{...Ya,background:"var(--color-brand)",color:"white"},children:_.jsx("span",{className:"material-icons-round",children:"admin_panel_settings"})}),_.jsx("span",{style:{flex:1,fontWeight:"800",color:"var(--color-brand)"},children:"Admin Control Panel"}),_.jsx("span",{className:"material-icons-round",style:{color:"var(--color-brand)"},children:"chevron_right"})]}),_.jsxs("div",{onClick:()=>{},style:Ka,children:[_.jsx("div",{style:Ya,children:_.jsx("span",{className:"material-icons-round",children:"notifications_none"})}),_.jsx("span",{style:{flex:1,fontWeight:"700"},children:"Notifications"}),_.jsx("span",{className:"material-icons-round",style:{color:"#CBD5E1"},children:"chevron_right"})]}),_.jsxs("div",{onClick:()=>{},style:Ka,children:[_.jsx("div",{style:Ya,children:_.jsx("span",{className:"material-icons-round",children:"security"})}),_.jsx("span",{style:{flex:1,fontWeight:"700"},children:"Privacy & Security"}),_.jsx("span",{className:"material-icons-round",style:{color:"#CBD5E1"},children:"chevron_right"})]}),_.jsxs("div",{onClick:b,style:{...Ka,marginTop:"24px",border:"1.5px solid #FEE2E2",background:"#FEF2F2"},children:[_.jsx("div",{style:{...Ya,background:"#FEE2E2",color:"#EF4444"},children:_.jsx("span",{className:"material-icons-round",children:"logout"})}),_.jsx("span",{style:{flex:1,fontWeight:"800",color:"#EF4444"},children:"Log Out"})]})]}),!n&&_.jsx(kf,{})]})},Ka={background:"white",padding:"16px 20px",borderRadius:"18px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"16px",cursor:"pointer",border:"1px solid #E2E8F0",fontSize:"15px",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.01)"},Ya={width:"40px",height:"40px",borderRadius:"12px",background:"#F8FAFC",display:"flex",alignItems:"center",justifyContent:"center",color:"#64748B"},JD=({onFilterChange:r,initialFilters:t})=>{const[n,s]=M.useState(t||{maxPrice:3e3,selectedCollege:"",searchPlace:"",billsIncluded:!1});M.useEffect(()=>{t&&s(t)},[t]);const[l,h]=M.useState(!1),d=["Trinity College","UCD","DCU","UCC","TU Dublin","University of Galway","DBS (Dublin Business School)","Griffith College","NCI (National College of Ireland)","RCSI","IADT"],[y,v]=M.useState([]),[b,w]=M.useState(!1),[C,I]=M.useState(!1),O=(V,$)=>{const q={...n,[V]:$};s(q),V!=="searchPlace"&&r(q)};M.useEffect(()=>{if(!n.searchPlace||n.searchPlace.length<3){v([]);return}const $=setTimeout(async()=>{I(!0);try{const q=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.searchPlace+(n.searchPlace.toLowerCase().includes("dublin")?"":" Dublin"))}&addressdetails=1&limit=6`,lt=await(await fetch(q,{headers:{"User-Agent":"StayNest-App"}})).json();v(lt),w(!0)}catch(q){console.error("Autocomplete error:",q)}finally{I(!1)}},400);return()=>clearTimeout($)},[n.searchPlace]);const Z=V=>{const $=V.display_name.split(",")[0],q=V.address&&(V.address.suburb||V.address.city_district||V.address.city)||"Dublin",nt=`${$}, ${q}`,lt={...n,searchPlace:nt};s(lt),v([]),w(!1),r(lt)};M.useEffect(()=>{const V=setTimeout(()=>{r(n)},300);return()=>clearTimeout(V)},[n.searchPlace]);const G=()=>{r(n),w(!1)};return _.jsxs("div",{className:"animate-in",style:{animationDelay:"0.1s"},children:[_.jsxs("div",{className:"glass-panel",style:{display:"flex",alignItems:"center",padding:"10px 10px 10px 20px",borderRadius:"50px",gap:"12px",position:"relative",boxShadow:"0 10px 30px -10px rgba(0,0,0,0.1)",background:"white",border:"1px solid #F1F5F9"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1,position:"relative"},children:[_.jsx("span",{className:"material-icons-round",style:{color:"var(--color-brand)",fontSize:"22px"},children:"search"}),_.jsx("input",{type:"text",placeholder:"Where are you looking?",value:n.searchPlace,onChange:V=>O("searchPlace",V.target.value),onFocus:()=>{y.length>0&&w(!0)},style:{border:"none",background:"transparent",padding:"12px 0",fontSize:"15px",fontWeight:"600",outline:"none",width:"100%",color:"var(--color-text-pri)"}}),C&&_.jsx("div",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)"},children:_.jsx("div",{className:"searching-spinner",style:{width:"16px",height:"16px",border:"2px solid #EFF6FF",borderTopColor:"var(--color-brand)",borderRadius:"50%",animation:"spin 1s linear infinite"}})}),b&&n.searchPlace.length>=3&&_.jsx("div",{className:"glass-panel",style:{position:"absolute",top:"calc(100% + 20px)",left:"0",right:"-10px",minWidth:"300px",borderRadius:"24px",zIndex:1e4,padding:"12px",maxHeight:"400px",overflowY:"auto",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",background:"rgba(255, 255, 255, 0.98)",border:"1px solid #E2E8F0"},children:y.length>0?y.map((V,$)=>_.jsxs("div",{onClick:()=>Z(V),style:{padding:"14px",borderRadius:"16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"14px",transition:"var(--transition-smooth)"},onMouseEnter:q=>q.currentTarget.style.backgroundColor="#F8FAFC",onMouseLeave:q=>q.currentTarget.style.backgroundColor="transparent",children:[_.jsx("div",{style:{background:"var(--color-brand-light)",borderRadius:"12px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx("span",{className:"material-icons-round",style:{color:"var(--color-brand)",fontSize:"20px"},children:"location_on"})}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[_.jsx("span",{style:{fontSize:"15px",fontWeight:"700",color:"var(--color-text-pri)"},children:V.display_name.split(",")[0]}),_.jsx("span",{style:{fontSize:"12px",color:"var(--color-text-sec)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:V.display_name.split(",").slice(1,4).join(",")})]})]},$)):!C&&_.jsxs("div",{style:{padding:"24px",textAlign:"center",color:"var(--color-text-sec)",fontSize:"14px"},children:[_.jsx("span",{className:"material-icons-round",style:{display:"block",marginBottom:"8px",opacity:.5},children:"map"}),'No locations found. Try "Dublin"']})})]}),_.jsx("button",{onClick:G,className:"btn-primary",style:{width:"auto",height:"48px",padding:"0 24px",borderRadius:"30px",fontSize:"14px",boxShadow:"none"},children:"Search"})]}),_.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px",flexWrap:"wrap",justifyContent:"flex-start"},children:[_.jsxs("div",{style:{position:"relative",flex:"1 1 140px"},children:[_.jsxs("select",{value:n.selectedCollege,onChange:V=>O("selectedCollege",V.target.value),style:{background:"white",border:"1px solid #F1F5F9",borderRadius:"16px",padding:"10px 14px 10px 36px",fontSize:"13px",fontWeight:"700",color:"var(--color-text-sec)",outline:"none",appearance:"none",boxShadow:"0 2px 6px rgba(0,0,0,0.02)",width:"100%"},children:[_.jsx("option",{value:"",children:"All Colleges"}),d.map(V=>_.jsx("option",{value:V,children:V},V))]}),_.jsx("span",{className:"material-icons-round",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",fontSize:"18px",color:"var(--color-brand)",pointerEvents:"none"},children:"school"})]}),_.jsxs("div",{onClick:()=>O("billsIncluded",!n.billsIncluded),style:{background:n.billsIncluded?"var(--color-success)":"white",color:n.billsIncluded?"white":"var(--color-text-sec)",border:"1px solid",borderColor:n.billsIncluded?"var(--color-success)":"#F1F5F9",padding:"10px 16px",borderRadius:"16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",fontWeight:"700",flex:"1 1 140px",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.02)"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px"},children:n.billsIncluded?"check_circle":"receipt_long"}),_.jsx("span",{children:"Bills Included"})]}),_.jsxs("div",{style:{background:"white",border:"1px solid #F1F5F9",borderRadius:"16px",padding:"10px 16px",display:"flex",alignItems:"center",gap:"12px",flex:"1 1 100%",boxShadow:"0 2px 6px rgba(0,0,0,0.02)",overflow:"visible"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px",color:"var(--color-brand)"},children:"payments"}),_.jsxs("div",{style:{flex:1},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[_.jsxs("span",{style:{fontSize:"11px",fontWeight:"800",color:"var(--color-text-sec)",textTransform:"uppercase",letterSpacing:"0.5px",whiteSpace:"nowrap"},children:["Max Monthly (Fig: ",n.maxPrice,")"]}),_.jsxs("span",{style:{fontSize:"14px",fontWeight:"900",color:"var(--color-brand)",background:"var(--color-brand-light)",padding:"4px 10px",borderRadius:"10px",display:"inline-block",textAlign:"center",boxShadow:"inset 0 0 0 1px rgba(37,99,235,0.1)"},children:["",n.maxPrice]})]}),_.jsx("input",{type:"range",min:"500",max:"4000",step:"50",value:n.maxPrice,onChange:V=>O("maxPrice",parseInt(V.target.value)),style:{width:"100%",height:"5px",accentColor:"var(--color-brand)",cursor:"pointer",display:"block"}})]})]})]})]})},C_=({listing:r,isBrokerView:t=!1})=>{const[n,s]=M.useState(!1),l=an(),h=Ae.currentUser;M.useEffect(()=>{if(!h||t)return;const y=ps(Mn(ze,"users",h.uid),v=>{if(v.exists()){const b=v.data().favorites||[];s(b.includes(r.id))}});return()=>y()},[h,r.id,t]);const d=async y=>{if(y.stopPropagation(),!h){alert("Please login to save favorites."),l("/login");return}const v=Mn(ze,"users",h.uid);try{n?await mo(v,{favorites:A_(r.id)}):await mo(v,{favorites:S_(r.id)})}catch(b){console.error("Error updating favorites:",b)}};return _.jsxs("div",{className:"premium-card",style:{marginBottom:"24px",position:"relative"},children:[_.jsxs("div",{style:{height:"240px",position:"relative",overflow:"hidden",borderRadius:"var(--radius-lg) var(--radius-lg) 0 0"},children:[_.jsx("img",{src:r.images&&r.images.length>0?r.images[0]:r.image||"https://via.placeholder.com/400x300?text=No+Image",alt:r.title,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.5s ease"},onMouseEnter:y=>y.target.style.transform="scale(1.05)",onMouseLeave:y=>y.target.style.transform="scale(1)"}),_.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"50%",background:"linear-gradient(to top, rgba(0,0,0,0.4), transparent)",pointerEvents:"none"}}),_.jsxs("div",{style:{position:"absolute",top:"16px",left:"16px",display:"flex",gap:"8px"},children:[_.jsx("div",{style:{background:"white",padding:"6px 12px",borderRadius:"30px",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",color:"var(--color-brand)"},children:r.subType||r.type||"Entire Home"}),r.billsIncluded&&_.jsxs("div",{style:{background:"var(--color-success)",padding:"6px 12px",borderRadius:"30px",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",color:"white",display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"14px"},children:"check_circle"}),"Bills"]})]}),!t&&_.jsx("button",{className:`heart-button ${n?"active":""}`,onClick:d,style:{position:"absolute",top:"16px",right:"16px"},children:_.jsx("span",{className:"material-icons-round",children:n?"favorite":"favorite_border"})}),t&&_.jsxs("div",{style:{position:"absolute",top:"16px",right:"16px",background:"rgba(0,0,0,0.6)",color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",display:"flex",alignItems:"center",gap:"6px",backdropFilter:"blur(4px)"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"16px"},children:"visibility"}),r.views||0," views"]})]}),_.jsxs("div",{style:{padding:"20px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[_.jsx("span",{style:{fontSize:"12px",fontWeight:"700",color:"var(--color-text-hint)",letterSpacing:"0.5px"},children:r.location.toUpperCase()}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"16px",color:"#F59E0B"},children:"star"}),_.jsx("span",{style:{fontSize:"14px",fontWeight:"800"},children:r.rating||"New"})]})]}),_.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"18px",fontWeight:"800",lineHeight:1.3,color:"var(--color-text-pri)"},children:r.title}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginTop:"16px"},children:[_.jsxs("div",{children:[_.jsxs("span",{style:{fontSize:"20px",fontWeight:"900",color:"var(--color-brand)"},children:["",r.price]}),_.jsx("span",{style:{fontSize:"13px",color:"var(--color-text-sec)",marginLeft:"4px"},children:"/ month"})]}),t?_.jsx("button",{onClick:y=>{y.stopPropagation(),l(`/broker/edit-listing/${r.id}`)},className:"btn-primary",style:{width:"auto",padding:"8px 20px",borderRadius:"12px",fontSize:"14px",background:"white",color:"var(--color-brand)",border:"1.5px solid var(--color-brand)"},children:"Edit Details"}):r.distanceToCollege!==void 0&&r.distanceToCollege!==null&&_.jsxs("div",{style:{background:"var(--color-brand-light)",color:"var(--color-brand)",padding:"6px 14px",borderRadius:"12px",fontSize:"12px",fontWeight:"700",display:"flex",alignItems:"center",gap:"6px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"16px"},children:"near_me"}),r.distanceToCollege<1?`${Math.round(r.distanceToCollege*1e3)}m`:`${r.distanceToCollege.toFixed(1)}km`]})]})]})]})};function Aw(r,t){const n=M.useRef(t);M.useEffect(function(){t!==n.current&&r.attributionControl!=null&&(n.current!=null&&r.attributionControl.removeAttribution(n.current),t!=null&&r.attributionControl.addAttribution(t)),n.current=t},[r,t])}const tL=1;function eL(r){return Object.freeze({__version:tL,map:r})}function nL(r,t){return Object.freeze({...r,...t})}const R_=M.createContext(null);function Mf(){const r=M.use(R_);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function iL(r){function t(n,s){const{instance:l,context:h}=r(n).current;M.useImperativeHandle(s,()=>l);const{children:d}=n;return d==null?null:jd.createElement(R_,{value:h},d)}return M.forwardRef(t)}function rL(r){function t(n,s){const[l,h]=M.useState(!1),{instance:d}=r(n,h).current;M.useImperativeHandle(s,()=>d),M.useEffect(function(){l&&d.update()},[d,l,n.children]);const y=d._contentNode;return y?MA.createPortal(n.children,y):null}return M.forwardRef(t)}function Cw(r){function t(n,s){const{instance:l}=r(n).current;return M.useImperativeHandle(s,()=>l),null}return M.forwardRef(t)}function sL(r){return function(n){const s=Mf(),l=r(n,s),{instance:h}=l.current,d=M.useRef(n.position),{position:y}=n;return M.useEffect(function(){return h.addTo(s.map),function(){h.remove()}},[s.map,h]),M.useEffect(function(){y!=null&&y!==d.current&&(h.setPosition(y),d.current=y)},[h,y]),l}}function Rw(r,t){const n=M.useRef(void 0);M.useEffect(function(){return t!=null&&r.instance.on(t),n.current=t,function(){n.current!=null&&r.instance.off(n.current),n.current=null}},[r,t])}function I_(r,t){const n=r.pane??t.pane;return n?{...r,pane:n}:r}function aL(r,t){return function(s,l){const h=Mf(),d=r(I_(s,h),h);return Aw(h.map,s.attribution),Rw(d.current,s.eventHandlers),t(d.current,h,s,l),d}}var Nc={exports:{}};var oL=Nc.exports,vb;function lL(){return vb||(vb=1,(function(r,t){(function(n,s){s(t)})(oL,(function(n){var s="1.9.4";function l(a){var u,p,x,T;for(p=1,x=arguments.length;p<x;p++){T=arguments[p];for(u in T)a[u]=T[u]}return a}var h=Object.create||(function(){function a(){}return function(u){return a.prototype=u,new a}})();function d(a,u){var p=Array.prototype.slice;if(a.bind)return a.bind.apply(a,p.call(arguments,1));var x=p.call(arguments,2);return function(){return a.apply(u,x.length?x.concat(p.call(arguments)):arguments)}}var y=0;function v(a){return"_leaflet_id"in a||(a._leaflet_id=++y),a._leaflet_id}function b(a,u,p){var x,T,R,z;return z=function(){x=!1,T&&(R.apply(p,T),T=!1)},R=function(){x?T=arguments:(a.apply(p,arguments),setTimeout(z,u),x=!0)},R}function w(a,u,p){var x=u[1],T=u[0],R=x-T;return a===x&&p?a:((a-T)%R+R)%R+T}function C(){return!1}function I(a,u){if(u===!1)return a;var p=Math.pow(10,u===void 0?6:u);return Math.round(a*p)/p}function O(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Z(a){return O(a).split(/\s+/)}function G(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?h(a.options):{});for(var p in u)a.options[p]=u[p];return a.options}function V(a,u,p){var x=[];for(var T in a)x.push(encodeURIComponent(p?T.toUpperCase():T)+"="+encodeURIComponent(a[T]));return(!u||u.indexOf("?")===-1?"?":"&")+x.join("&")}var $=/\{ *([\w_ -]+) *\}/g;function q(a,u){return a.replace($,function(p,x){var T=u[x];if(T===void 0)throw new Error("No value provided for variable "+p);return typeof T=="function"&&(T=T(u)),T})}var nt=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function lt(a,u){for(var p=0;p<a.length;p++)if(a[p]===u)return p;return-1}var bt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Tt(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var k=0;function D(a){var u=+new Date,p=Math.max(0,16-(u-k));return k=u+p,window.setTimeout(a,p)}var j=window.requestAnimationFrame||Tt("RequestAnimationFrame")||D,K=window.cancelAnimationFrame||Tt("CancelAnimationFrame")||Tt("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function F(a,u,p){if(p&&j===D)a.call(u);else return j.call(window,d(a,u))}function Y(a){a&&K.call(window,a)}var B={__proto__:null,extend:l,create:h,bind:d,get lastId(){return y},stamp:v,throttle:b,wrapNum:w,falseFn:C,formatNum:I,trim:O,splitWords:Z,setOptions:G,getParamString:V,template:q,isArray:nt,indexOf:lt,emptyImageUrl:bt,requestFn:j,cancelFn:K,requestAnimFrame:F,cancelAnimFrame:Y};function oe(){}oe.extend=function(a){var u=function(){G(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,x=h(p);x.constructor=u,u.prototype=x;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(u[T]=this[T]);return a.statics&&l(u,a.statics),a.includes&&(Je(a.includes),l.apply(null,[x].concat(a.includes))),l(x,a),delete x.statics,delete x.includes,x.options&&(x.options=p.options?h(p.options):{},l(x.options,a.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,z=x._initHooks.length;R<z;R++)x._initHooks[R].call(this)}},u},oe.include=function(a){var u=this.prototype.options;return l(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},oe.mergeOptions=function(a){return l(this.prototype.options,a),this},oe.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),p=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function Je(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=nt(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ot={on:function(a,u,p){if(typeof a=="object")for(var x in a)this._on(x,a[x],u);else{a=Z(a);for(var T=0,R=a.length;T<R;T++)this._on(a[T],u,p)}return this},off:function(a,u,p){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var x in a)this._off(x,a[x],u);else{a=Z(a);for(var T=arguments.length===1,R=0,z=a.length;R<z;R++)T?this._off(a[R]):this._off(a[R],u,p)}return this},_on:function(a,u,p,x){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,p)===!1){p===this&&(p=void 0);var T={fn:u,ctx:p};x&&(T.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(T)}},_off:function(a,u,p){var x,T,R;if(this._events&&(x=this._events[a],!!x)){if(arguments.length===1){if(this._firingCount)for(T=0,R=x.length;T<R;T++)x[T].fn=C;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var z=this._listens(a,u,p);if(z!==!1){var X=x[z];this._firingCount&&(X.fn=C,this._events[a]=x=x.slice()),x.splice(z,1)}}},fire:function(a,u,p){if(!this.listens(a,p))return this;var x=l({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var T=this._events[a];if(T){this._firingCount=this._firingCount+1||1;for(var R=0,z=T.length;R<z;R++){var X=T[R],it=X.fn;X.once&&this.off(a,it,X.ctx),it.call(X.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(a,u,p,x){typeof a!="string"&&console.warn('"string" type argument expected');var T=u;typeof u!="function"&&(x=!!u,T=void 0,p=void 0);var R=this._events&&this._events[a];if(R&&R.length&&this._listens(a,T,p)!==!1)return!0;if(x){for(var z in this._eventParents)if(this._eventParents[z].listens(a,u,p,x))return!0}return!1},_listens:function(a,u,p){if(!this._events)return!1;var x=this._events[a]||[];if(!u)return!!x.length;p===this&&(p=void 0);for(var T=0,R=x.length;T<R;T++)if(x[T].fn===u&&x[T].ctx===p)return T;return!1},once:function(a,u,p){if(typeof a=="object")for(var x in a)this._on(x,a[x],u,!0);else{a=Z(a);for(var T=0,R=a.length;T<R;T++)this._on(a[T],u,p,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[v(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[v(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,l({layer:a.target,propagatedFrom:a.target},a),!0)}};ot.addEventListener=ot.on,ot.removeEventListener=ot.clearAllEventListeners=ot.off,ot.addOneTimeEventListener=ot.once,ot.fireEvent=ot.fire,ot.hasEventListeners=ot.listens;var xt=oe.extend(ot);function gt(a,u,p){this.x=p?Math.round(a):a,this.y=p?Math.round(u):u}var te=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};gt.prototype={clone:function(){return new gt(this.x,this.y)},add:function(a){return this.clone()._add(At(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(At(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new gt(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new gt(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(a){a=At(a);var u=a.x-this.x,p=a.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(a){return a=At(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=At(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+I(this.x)+", "+I(this.y)+")"}};function At(a,u,p){return a instanceof gt?a:nt(a)?new gt(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new gt(a.x,a.y):new gt(a,u,p)}function H(a,u){if(a)for(var p=u?[a,u]:a,x=0,T=p.length;x<T;x++)this.extend(p[x])}H.prototype={extend:function(a){var u,p;if(!a)return this;if(a instanceof gt||typeof a[0]=="number"||"x"in a)u=p=At(a);else if(a=ut(a),u=a.min,p=a.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(a){return At((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return At(this.min.x,this.max.y)},getTopRight:function(){return At(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,p;return typeof a[0]=="number"||a instanceof gt?a=At(a):a=ut(a),a instanceof H?(u=a.min,p=a.max):u=p=a,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(a){a=ut(a);var u=this.min,p=this.max,x=a.min,T=a.max,R=T.x>=u.x&&x.x<=p.x,z=T.y>=u.y&&x.y<=p.y;return R&&z},overlaps:function(a){a=ut(a);var u=this.min,p=this.max,x=a.min,T=a.max,R=T.x>u.x&&x.x<p.x,z=T.y>u.y&&x.y<p.y;return R&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,p=this.max,x=Math.abs(u.x-p.x)*a,T=Math.abs(u.y-p.y)*a;return ut(At(u.x-x,u.y-T),At(p.x+x,p.y+T))},equals:function(a){return a?(a=ut(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function ut(a,u){return!a||a instanceof H?a:new H(a,u)}function _t(a,u){if(a)for(var p=u?[a,u]:a,x=0,T=p.length;x<T;x++)this.extend(p[x])}_t.prototype={extend:function(a){var u=this._southWest,p=this._northEast,x,T;if(a instanceof St)x=a,T=a;else if(a instanceof _t){if(x=a._southWest,T=a._northEast,!x||!T)return this}else return a?this.extend(wt(a)||yt(a)):this;return!u&&!p?(this._southWest=new St(x.lat,x.lng),this._northEast=new St(T.lat,T.lng)):(u.lat=Math.min(x.lat,u.lat),u.lng=Math.min(x.lng,u.lng),p.lat=Math.max(T.lat,p.lat),p.lng=Math.max(T.lng,p.lng)),this},pad:function(a){var u=this._southWest,p=this._northEast,x=Math.abs(u.lat-p.lat)*a,T=Math.abs(u.lng-p.lng)*a;return new _t(new St(u.lat-x,u.lng-T),new St(p.lat+x,p.lng+T))},getCenter:function(){return new St((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new St(this.getNorth(),this.getWest())},getSouthEast:function(){return new St(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof St||"lat"in a?a=wt(a):a=yt(a);var u=this._southWest,p=this._northEast,x,T;return a instanceof _t?(x=a.getSouthWest(),T=a.getNorthEast()):x=T=a,x.lat>=u.lat&&T.lat<=p.lat&&x.lng>=u.lng&&T.lng<=p.lng},intersects:function(a){a=yt(a);var u=this._southWest,p=this._northEast,x=a.getSouthWest(),T=a.getNorthEast(),R=T.lat>=u.lat&&x.lat<=p.lat,z=T.lng>=u.lng&&x.lng<=p.lng;return R&&z},overlaps:function(a){a=yt(a);var u=this._southWest,p=this._northEast,x=a.getSouthWest(),T=a.getNorthEast(),R=T.lat>u.lat&&x.lat<p.lat,z=T.lng>u.lng&&x.lng<p.lng;return R&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=yt(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function yt(a,u){return a instanceof _t?a:new _t(a,u)}function St(a,u,p){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,p!==void 0&&(this.alt=+p)}St.prototype={equals:function(a,u){if(!a)return!1;a=wt(a);var p=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return p<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+I(this.lat,a)+", "+I(this.lng,a)+")"},distanceTo:function(a){return Ee.distance(this,wt(a))},wrap:function(){return Ee.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,p=u/Math.cos(Math.PI/180*this.lat);return yt([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new St(this.lat,this.lng,this.alt)}};function wt(a,u,p){return a instanceof St?a:nt(a)&&typeof a[0]!="object"?a.length===3?new St(a[0],a[1],a[2]):a.length===2?new St(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new St(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new St(a,u,p)}var Ft={latLngToPoint:function(a,u){var p=this.projection.project(a),x=this.scale(u);return this.transformation._transform(p,x)},pointToLatLng:function(a,u){var p=this.scale(u),x=this.transformation.untransform(a,p);return this.projection.unproject(x)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(a),x=this.transformation.transform(u.min,p),T=this.transformation.transform(u.max,p);return new H(x,T)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?w(a.lng,this.wrapLng,!0):a.lng,p=this.wrapLat?w(a.lat,this.wrapLat,!0):a.lat,x=a.alt;return new St(p,u,x)},wrapLatLngBounds:function(a){var u=a.getCenter(),p=this.wrapLatLng(u),x=u.lat-p.lat,T=u.lng-p.lng;if(x===0&&T===0)return a;var R=a.getSouthWest(),z=a.getNorthEast(),X=new St(R.lat-x,R.lng-T),it=new St(z.lat-x,z.lng-T);return new _t(X,it)}},Ee=l({},Ft,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var p=Math.PI/180,x=a.lat*p,T=u.lat*p,R=Math.sin((u.lat-a.lat)*p/2),z=Math.sin((u.lng-a.lng)*p/2),X=R*R+Math.cos(x)*Math.cos(T)*z*z,it=2*Math.atan2(Math.sqrt(X),Math.sqrt(1-X));return this.R*it}}),Ce=6378137,pr={R:Ce,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,a.lat),-p),T=Math.sin(x*u);return new gt(this.R*a.lng*u,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(a){var u=180/Math.PI;return new St((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:(function(){var a=Ce*Math.PI;return new H([-a,-a],[a,a])})()};function zr(a,u,p,x){if(nt(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=p,this._d=x}zr.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new gt((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function Gi(a,u,p,x){return new zr(a,u,p,x)}var Vr=l({},Ee,{code:"EPSG:3857",projection:pr,transformation:(function(){var a=.5/(Math.PI*pr.R);return Gi(a,.5,-a,.5)})()}),Zi=l({},Vr,{code:"EPSG:900913"});function oa(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Br(a,u){var p="",x,T,R,z,X,it;for(x=0,R=a.length;x<R;x++){for(X=a[x],T=0,z=X.length;T<z;T++)it=X[T],p+=(T?"L":"M")+it.x+" "+it.y;p+=u?Pt.svg?"z":"x":""}return p||"M0 0"}var ms=document.documentElement.style,Ur="ActiveXObject"in window,Ze=Ur&&!document.addEventListener,We="msLaunchUri"in navigator&&!("documentMode"in document),Wi=xn("webkit"),bl=xn("android"),vo=xn("android 2")||xn("android 3"),Nn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),gs=bl&&xn("Google")&&Nn<537&&!("AudioNode"in window),_s=!!window.opera,la=!We&&xn("chrome"),mr=xn("gecko")&&!Wi&&!_s&&!Ur,zu=!la&&xn("safari"),xo=xn("phantom"),bo="OTransition"in ms,El=navigator.platform.indexOf("Win")===0,ei=Ur&&"transition"in ms,tn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!vo,Kn="MozPerspective"in ms,Be=!window.L_DISABLE_3D&&(ei||tn||Kn)&&!bo&&!xo,Fr=typeof orientation<"u"||xn("mobile"),ua=Fr&&Wi,Tl=Fr&&tn,Ti=!window.PointerEvent&&window.MSPointerEvent,Hr=!!(window.PointerEvent||Ti),Ue="ontouchstart"in window||!!window.TouchEvent,Ki=!window.L_NO_TOUCH&&(Ue||Hr),Yi=Fr&&_s,wi=Fr&&mr,Vu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,wl=(function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",C,u),window.removeEventListener("testPassiveEventSupport",C,u)}catch{}return a})(),Qi=(function(){return!!document.createElement("canvas").getContext})(),gr=!!(document.createElementNS&&oa("svg").createSVGRect),Bu=!!gr&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ys=!gr&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),Eo=navigator.platform.indexOf("Mac")===0,To=navigator.platform.indexOf("Linux")===0;function xn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Pt={ie:Ur,ielt9:Ze,edge:We,webkit:Wi,android:bl,android23:vo,androidStock:gs,opera:_s,chrome:la,gecko:mr,safari:zu,phantom:xo,opera12:bo,win:El,ie3d:ei,webkit3d:tn,gecko3d:Kn,any3d:Be,mobile:Fr,mobileWebkit:ua,mobileWebkit3d:Tl,msPointer:Ti,pointer:Hr,touch:Ki,touchNative:Ue,mobileOpera:Yi,mobileGecko:wi,retina:Vu,passiveEvents:wl,canvas:Qi,svg:gr,vml:ys,inlineSvg:Bu,mac:Eo,linux:To},wo=Pt.msPointer?"MSPointerDown":"pointerdown",ni=Pt.msPointer?"MSPointerMove":"pointermove",ii=Pt.msPointer?"MSPointerUp":"pointerup",Fe=Pt.msPointer?"MSPointerCancel":"pointercancel",Ke={touchstart:wo,touchmove:ni,touchend:ii,touchcancel:Fe},Si={touchstart:$i,touchmove:bn,touchend:bn,touchcancel:bn},Ai={},Sl=!1;function Al(a,u,p){return u==="touchstart"&&ri(),Si[u]?(p=Si[u].bind(this,p),a.addEventListener(Ke[u],p,!1),p):(console.warn("wrong event specified:",u),C)}function Cl(a,u,p){if(!Ke[u]){console.warn("wrong event specified:",u);return}a.removeEventListener(Ke[u],p,!1)}function Xi(a){Ai[a.pointerId]=a}function ca(a){Ai[a.pointerId]&&(Ai[a.pointerId]=a)}function Ci(a){delete Ai[a.pointerId]}function ri(){Sl||(document.addEventListener(wo,Xi,!0),document.addEventListener(ni,ca,!0),document.addEventListener(ii,Ci,!0),document.addEventListener(Fe,Ci,!0),Sl=!0)}function bn(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in Ai)u.touches.push(Ai[p]);u.changedTouches=[u],a(u)}}function $i(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&ke(u),bn(a,u)}function Ye(a){var u={},p,x;for(x in a)p=a[x],u[x]=p&&p.bind?p.bind(a):p;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var So=200;function Ao(a,u){a.addEventListener("dblclick",u);var p=0,x;function T(R){if(R.detail!==1){x=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var z=Kr(R);if(!(z.some(function(it){return it instanceof HTMLLabelElement&&it.attributes.for})&&!z.some(function(it){return it instanceof HTMLInputElement||it instanceof HTMLSelectElement}))){var X=Date.now();X-p<=So?(x++,x===2&&u(Ye(R))):x=1,p=X}}}return a.addEventListener("click",T),{dblclick:u,simDblclick:T}}function Ji(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var si=xs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),_r=xs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ha=_r==="webkitTransition"||_r==="OTransition"?_r+"End":"transitionend";function da(a){return typeof a=="string"?document.getElementById(a):a}function qr(a,u){var p=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(a,null);p=x?x[u]:null}return p==="auto"?null:p}function Yt(a,u,p){var x=document.createElement(a);return x.className=u||"",p&&p.appendChild(x),x}function Qt(a){var u=a.parentNode;u&&u.removeChild(a)}function Le(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Oe(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function Yn(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function vs(a,u){if(a.classList!==void 0)return a.classList.contains(u);var p=tr(a);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function Rt(a,u){if(a.classList!==void 0)for(var p=Z(u),x=0,T=p.length;x<T;x++)a.classList.add(p[x]);else if(!vs(a,u)){var R=tr(a);ai(a,(R?R+" ":"")+u)}}function ye(a,u){a.classList!==void 0?a.classList.remove(u):ai(a,O((" "+tr(a)+" ").replace(" "+u+" "," ")))}function ai(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function tr(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Re(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&fa(a,u)}function fa(a,u){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=a.filters.item(x)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):a.style.filter+=" progid:"+x+"(opacity="+u+")"}function xs(a){for(var u=document.documentElement.style,p=0;p<a.length;p++)if(a[p]in u)return a[p];return!1}function Ri(a,u,p){var x=u||new gt(0,0);a.style[si]=(Pt.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function ve(a,u){a._leaflet_pos=u,Pt.any3d?Ri(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function er(a){return a._leaflet_pos||new gt(0,0)}var oi,on,pa;if("onselectstart"in document)oi=function(){Mt(window,"selectstart",ke)},on=function(){he(window,"selectstart",ke)};else{var yr=xs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);oi=function(){if(yr){var a=document.documentElement.style;pa=a[yr],a[yr]="none"}},on=function(){yr&&(document.documentElement.style[yr]=pa,pa=void 0)}}function bs(){Mt(window,"dragstart",ke)}function Gr(){he(window,"dragstart",ke)}var Es,nr;function Zr(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(jn(),Es=a,nr=a.style.outlineStyle,a.style.outlineStyle="none",Mt(window,"keydown",jn))}function jn(){Es&&(Es.style.outlineStyle=nr,Es=void 0,nr=void 0,he(window,"keydown",jn))}function ma(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function zn(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var Wr={__proto__:null,TRANSFORM:si,TRANSITION:_r,TRANSITION_END:ha,get:da,getStyle:qr,create:Yt,remove:Qt,empty:Le,toFront:Oe,toBack:Yn,hasClass:vs,addClass:Rt,removeClass:ye,setClass:ai,getClass:tr,setOpacity:Re,testProp:xs,setTransform:Ri,setPosition:ve,getPosition:er,get disableTextSelection(){return oi},get enableTextSelection(){return on},disableImageDrag:bs,enableImageDrag:Gr,preventOutline:Zr,restoreOutline:jn,getSizedParentNode:ma,getScale:zn};function Mt(a,u,p,x){if(u&&typeof u=="object")for(var T in u)Vn(a,T,u[T],p);else{u=Z(u);for(var R=0,z=u.length;R<z;R++)Vn(a,u[R],p,x)}return this}var En="_leaflet_events";function he(a,u,p,x){if(arguments.length===1)vr(a),delete a[En];else if(u&&typeof u=="object")for(var T in u)xr(a,T,u[T],p);else if(u=Z(u),arguments.length===2)vr(a,function(X){return lt(u,X)!==-1});else for(var R=0,z=u.length;R<z;R++)xr(a,u[R],p,x);return this}function vr(a,u){for(var p in a[En]){var x=p.split(/\d/)[0];(!u||u(x))&&xr(a,x,null,null,p)}}var Qn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Vn(a,u,p,x){var T=u+v(p)+(x?"_"+v(x):"");if(a[En]&&a[En][T])return this;var R=function(X){return p.call(x||a,X||window.event)},z=R;!Pt.touchNative&&Pt.pointer&&u.indexOf("touch")===0?R=Al(a,u,R):Pt.touch&&u==="dblclick"?R=Ao(a,R):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(Qn[u]||u,R,Pt.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(R=function(X){X=X||window.event,Ni(a,X)&&z(X)},a.addEventListener(Qn[u],R,!1)):a.addEventListener(u,z,!1):a.attachEvent("on"+u,R),a[En]=a[En]||{},a[En][T]=R}function xr(a,u,p,x,T){T=T||u+v(p)+(x?"_"+v(x):"");var R=a[En]&&a[En][T];if(!R)return this;!Pt.touchNative&&Pt.pointer&&u.indexOf("touch")===0?Cl(a,u,R):Pt.touch&&u==="dblclick"?Ji(a,R):"removeEventListener"in a?a.removeEventListener(Qn[u]||u,R,!1):a.detachEvent("on"+u,R),a[En][T]=null}function ee(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function li(a){return Vn(a,"wheel",ee),this}function br(a){return Mt(a,"mousedown touchstart dblclick contextmenu",ee),a._leaflet_disable_click=!0,this}function ke(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Ii(a){return ke(a),ee(a),this}function Kr(a){if(a.composedPath)return a.composedPath();for(var u=[],p=a.target;p;)u.push(p),p=p.parentNode;return u}function ir(a,u){if(!u)return new gt(a.clientX,a.clientY);var p=zn(u),x=p.boundingClientRect;return new gt((a.clientX-x.left)/p.x-u.clientLeft,(a.clientY-x.top)/p.y-u.clientTop)}var Pi=Pt.linux&&Pt.chrome?window.devicePixelRatio:Pt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ln(a){return Pt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Pi:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ni(a,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==a;)p=p.parentNode}catch{return!1}return p!==a}var rr={__proto__:null,on:Mt,off:he,stopPropagation:ee,disableScrollPropagation:li,disableClickPropagation:br,preventDefault:ke,stop:Ii,getPropagationPath:Kr,getMousePosition:ir,getWheelDelta:ln,isExternalTarget:Ni,addListener:Mt,removeListener:he},Er=xt.extend({run:function(a,u,p,x){this.stop(),this._el=a,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=er(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var p=this._startPos.add(this._offset.multiplyBy(a));u&&p._round(),ve(this._el,p),this.fire("step")},_complete:function(){Y(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Kt=xt.extend({options:{crs:Vr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=G(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(wt(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=_r&&Pt.any3d&&!Pt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mt(this._proxy,ha,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(wt(a),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=l({animate:p.animate},p.zoom),p.pan=l({animate:p.animate,duration:p.duration},p.pan));var x=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,p.zoom):this._tryAnimatedPan(a,p.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(Pt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(Pt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,p){var x=this.getZoomScale(u),T=this.getSize().divideBy(2),R=a instanceof gt?a:this.latLngToContainerPoint(a),z=R.subtract(T).multiplyBy(1-1/x),X=this.containerPointToLatLng(T.add(z));return this.setView(X,u,{zoom:p})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():yt(a);var p=At(u.paddingTopLeft||u.padding||[0,0]),x=At(u.paddingBottomRight||u.padding||[0,0]),T=this.getBoundsZoom(a,!1,p.add(x));if(T=typeof u.maxZoom=="number"?Math.min(u.maxZoom,T):T,T===1/0)return{center:a.getCenter(),zoom:T};var R=x.subtract(p).divideBy(2),z=this.project(a.getSouthWest(),T),X=this.project(a.getNorthEast(),T),it=this.unproject(z.add(X).divideBy(2).add(R),T);return{center:it,zoom:T}},fitBounds:function(a,u){if(a=yt(a),!a.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(a,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=At(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Er,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Rt(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,p){if(p=p||{},p.animate===!1||!Pt.any3d)return this.setView(a,u,p);this._stop();var x=this.project(this.getCenter()),T=this.project(a),R=this.getSize(),z=this._zoom;a=wt(a),u=u===void 0?z:u;var X=Math.max(R.x,R.y),it=X*this.getZoomScale(z,u),ft=T.distanceTo(x)||1,Et=1.42,Lt=Et*Et;function Zt(He){var Cr=He?-1:1,Is=He?it:X,Zu=it*it-X*X+Cr*Lt*Lt*ft*ft,Zo=2*Is*Lt*ft,Wo=Zu/Zo,rs=Math.sqrt(Wo*Wo+1)-Wo,Rr=rs<1e-9?-18:Math.log(rs);return Rr}function _n(He){return(Math.exp(He)-Math.exp(-He))/2}function Qe(He){return(Math.exp(He)+Math.exp(-He))/2}function Jn(He){return _n(He)/Qe(He)}var de=Zt(0);function fe(He){return X*(Qe(de)/Qe(de+Et*He))}function Xt(He){return X*(Qe(de)*Jn(de+Et*He)-_n(de))/Lt}function ns(He){return 1-Math.pow(1-He,1.5)}var fi=Date.now(),Bl=(Zt(1)-de)/Et,is=p.duration?1e3*p.duration:1e3*Bl*.8;function Gu(){var He=(Date.now()-fi)/is,Cr=ns(He)*Bl;He<=1?(this._flyToFrame=F(Gu,this),this._move(this.unproject(x.add(T.subtract(x).multiplyBy(Xt(Cr)/ft)),z),this.getScaleZoom(X/fe(Cr),z),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Gu.call(this),this},flyToBounds:function(a,u){var p=this._getBoundsCenterZoom(a,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(a){return a=yt(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,yt(a));return p.equals(x)||this.panTo(x,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var p=At(u.paddingTopLeft||u.padding||[0,0]),x=At(u.paddingBottomRight||u.padding||[0,0]),T=this.project(this.getCenter()),R=this.project(a),z=this.getPixelBounds(),X=ut([z.min.add(p),z.max.subtract(x)]),it=X.getSize();if(!X.contains(R)){this._enforcingBounds=!0;var ft=R.subtract(X.getCenter()),Et=X.extend(R).getSize().subtract(it);T.x+=ft.x<0?-Et.x:Et.x,T.y+=ft.y<0?-Et.y:Et.y,this.panTo(this.unproject(T),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=l({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=u.divideBy(2).round(),T=p.divideBy(2).round(),R=x.subtract(T);return!R.x&&!R.y?this:(a.animate&&a.pan?this.panBy(R):(a.pan&&this._rawPanBy(R),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=l({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=d(this._handleGeolocationResponse,this),p=d(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,a):navigator.geolocation.getCurrentPosition(u,p,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,p=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,p=a.coords.longitude,x=new St(u,p),T=x.toBounds(a.coords.accuracy*2),R=this._locateOptions;if(R.setView){var z=this.getBoundsZoom(T);this.setView(x,R.maxZoom?Math.min(z,R.maxZoom):z)}var X={latlng:x,bounds:T,timestamp:a.timestamp};for(var it in a.coords)typeof a.coords[it]=="number"&&(X[it]=a.coords[it]);this.fire("locationfound",X)}},addHandler:function(a,u){if(!u)return this;var p=this[a]=new u(this);return this._handlers.push(p),this.options[a]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Y(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Qt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var p="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),x=Yt("div",p,u||this._mapPane);return a&&(this._panes[a]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),p=this.unproject(a.getTopRight());return new _t(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,p){a=yt(a),p=At(p||[0,0]);var x=this.getZoom()||0,T=this.getMinZoom(),R=this.getMaxZoom(),z=a.getNorthWest(),X=a.getSouthEast(),it=this.getSize().subtract(p),ft=ut(this.project(X,x),this.project(z,x)).getSize(),Et=Pt.any3d?this.options.zoomSnap:1,Lt=it.x/ft.x,Zt=it.y/ft.y,_n=u?Math.max(Lt,Zt):Math.min(Lt,Zt);return x=this.getScaleZoom(_n,x),Et&&(x=Math.round(x/(Et/100))*(Et/100),x=u?Math.ceil(x/Et)*Et:Math.floor(x/Et)*Et),Math.max(T,Math.min(R,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new gt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var p=this._getTopLeftPoint(a,u);return new H(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(a)/p.scale(u)},getScaleZoom:function(a,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var x=p.zoom(a*p.scale(u));return isNaN(x)?1/0:x},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(wt(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(At(a),u)},layerPointToLatLng:function(a){var u=At(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(wt(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(wt(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(yt(a))},distance:function(a,u){return this.options.crs.distance(wt(a),wt(u))},containerPointToLayerPoint:function(a){return At(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return At(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(At(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(wt(a)))},mouseEventToContainerPoint:function(a){return ir(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=da(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mt(u,"scroll",this._onScroll,this),this._containerId=v(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pt.any3d,Rt(a,"leaflet-container"+(Pt.touch?" leaflet-touch":"")+(Pt.retina?" leaflet-retina":"")+(Pt.ielt9?" leaflet-oldie":"")+(Pt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=qr(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ve(this._mapPane,new gt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Rt(a.markerPane,"leaflet-zoom-hide"),Rt(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,p){ve(this._mapPane,new gt(0,0));var x=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var T=this._zoom!==u;this._moveStart(T,p)._move(a,u)._moveEnd(T),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,p,x){u===void 0&&(u=this._zoom);var T=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),x?p&&p.pinch&&this.fire("zoom",p):((T||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Y(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){ve(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[v(this._container)]=this;var u=a?he:Mt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Pt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Y(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var p=[],x,T=u==="mouseout"||u==="mouseover",R=a.target||a.srcElement,z=!1;R;){if(x=this._targets[v(R)],x&&(u==="click"||u==="preclick")&&this._draggableMoved(x)){z=!0;break}if(x&&x.listens(u,!0)&&(T&&!Ni(R,a)||(p.push(x),T))||R===this._container)break;R=R.parentNode}return!p.length&&!z&&!T&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var p=a.type;p==="mousedown"&&Zr(u),this._fireDOMEvent(a,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,p){if(a.type==="click"){var x=l({},a);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var T=this._findEventTargets(a,u);if(p){for(var R=[],z=0;z<p.length;z++)p[z].listens(u,!0)&&R.push(p[z]);T=R.concat(T)}if(T.length){u==="contextmenu"&&ke(a);var X=T[0],it={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ft=X.getLatLng&&(!X._radius||X._radius<=10);it.containerPoint=ft?this.latLngToContainerPoint(X.getLatLng()):this.mouseEventToContainerPoint(a),it.layerPoint=this.containerPointToLayerPoint(it.containerPoint),it.latlng=ft?X.getLatLng():this.layerPointToLatLng(it.layerPoint)}for(z=0;z<T.length;z++)if(T[z].fire(u,it,!0),it.originalEvent._stopped||T[z].options.bubblingMouseEvents===!1&&lt(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return er(this._mapPane)||new gt(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var p=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var p=this.getSize()._divideBy(2);return this.project(a,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,p){var x=this._getNewPixelOrigin(p,u);return this.project(a,u)._subtract(x)},_latLngBoundsToNewLayerBounds:function(a,u,p){var x=this._getNewPixelOrigin(p,u);return ut([this.project(a.getSouthWest(),u)._subtract(x),this.project(a.getNorthWest(),u)._subtract(x),this.project(a.getSouthEast(),u)._subtract(x),this.project(a.getNorthEast(),u)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,p){if(!p)return a;var x=this.project(a,u),T=this.getSize().divideBy(2),R=new H(x.subtract(T),x.add(T)),z=this._getBoundsOffset(R,p,u);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?a:this.unproject(x.add(z),u)},_limitOffset:function(a,u){if(!u)return a;var p=this.getPixelBounds(),x=new H(p.min.add(a),p.max.add(a));return a.add(this._getBoundsOffset(x,u))},_getBoundsOffset:function(a,u,p){var x=ut(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),T=x.min.subtract(a.min),R=x.max.subtract(a.max),z=this._rebound(T.x,-R.x),X=this._rebound(T.y,-R.y);return new gt(z,X)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),p=this.getMaxZoom(),x=Pt.any3d?this.options.zoomSnap:1;return x&&(a=Math.round(a/x)*x),Math.max(u,Math.min(p,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ye(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var p=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var a=this._proxy=Yt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var p=si,x=this._proxy.style[p];Ri(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();Ri(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(u),T=this._getCenterOffset(a)._divideBy(1-1/x);return p.animate!==!0&&!this.getSize().contains(T)?!1:(F(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,Rt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ye(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Yr(a,u){return new Kt(a,u)}var Tn=oe.extend({options:{position:"topright"},initialize:function(a){G(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),p=this.getPosition(),x=a._controlCorners[p];return Rt(u,"leaflet-control"),p.indexOf("bottom")!==-1?x.insertBefore(u,x.firstChild):x.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Bn=function(a){return new Tn(a)};Kt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",p=this._controlContainer=Yt("div",u+"control-container",this._container);function x(T,R){var z=u+T+" "+u+R;a[T+R]=Yt("div",z,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Qt(this._controlCorners[a]);Qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ts=Tn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,p,x){return p<x?-1:x<p?1:0}},initialize:function(a,u,p){G(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in a)this._addLayer(a[x],x);for(x in u)this._addLayer(u[x],x,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Tn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(v(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Rt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Rt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):ye(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ye(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=Yt("div",a),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),br(u),li(u);var x=this._section=Yt("section",a+"-list");p&&(this._map.on("click",this.collapse,this),Mt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Yt("a",a+"-toggle",u);T.href="#",T.title="Layers",T.setAttribute("role","button"),Mt(T,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){ke(R),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Yt("div",a+"-base",x),this._separator=Yt("div",a+"-separator",x),this._overlaysList=Yt("div",a+"-overlays",x),u.appendChild(x)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&v(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,p){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(d(function(x,T){return this.options.sortFunction(x.layer,T.layer,x.name,T.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Le(this._baseLayersList),Le(this._overlaysList),this._layerControlInputs=[];var a,u,p,x,T=0;for(p=0;p<this._layers.length;p++)x=this._layers[p],this._addItem(x),u=u||x.overlay,a=a||!x.overlay,T+=x.overlay?0:1;return this.options.hideSingleBase&&(a=a&&T>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(v(a.target)),p=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(a,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(a){var u=document.createElement("label"),p=this._map.hasLayer(a.layer),x;a.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+v(this),p),this._layerControlInputs.push(x),x.layerId=v(a.layer),Mt(x,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+a.name;var R=document.createElement("span");u.appendChild(R),R.appendChild(x),R.appendChild(T);var z=a.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,p,x=[],T=[];this._handlingClick=!0;for(var R=a.length-1;R>=0;R--)u=a[R],p=this._getLayer(u.layerId).layer,u.checked?x.push(p):u.checked||T.push(p);for(R=0;R<T.length;R++)this._map.hasLayer(T[R])&&this._map.removeLayer(T[R]);for(R=0;R<x.length;R++)this._map.hasLayer(x[R])||this._map.addLayer(x[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,p,x=this._map.getZoom(),T=a.length-1;T>=0;T--)u=a[T],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&x<p.options.minZoom||p.options.maxZoom!==void 0&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Mt(a,"click",ke),this.expand();var u=this;setTimeout(function(){he(a,"click",ke),u._preventClick=!1})}}),Co=function(a,u,p){return new Ts(a,u,p)},Tr=Tn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",p=Yt("div",u+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,p,x,T){var R=Yt("a",p,x);return R.innerHTML=a,R.href="#",R.title=u,R.setAttribute("role","button"),R.setAttribute("aria-label",u),br(R),Mt(R,"click",Ii),Mt(R,"click",T,this),Mt(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";ye(this._zoomInButton,u),ye(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Rt(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Rt(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Kt.mergeOptions({zoomControl:!0}),Kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Tr,this.addControl(this.zoomControl))});var Rl=function(a){return new Tr(a)},Ro=Tn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",p=Yt("div",u),x=this.options;return this._addScales(x,u+"-line",p),a.on(x.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),p},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,p){a.metric&&(this._mScale=Yt("div",u,p)),a.imperial&&(this._iScale=Yt("div",u,p))},_update:function(){var a=this._map,u=a.getSize().y/2,p=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/a)},_updateImperial:function(a){var u=a*3.2808399,p,x,T;u>5280?(p=u/5280,x=this._getRoundNum(p),this._updateScale(this._iScale,x+" mi",x/p)):(T=this._getRoundNum(u),this._updateScale(this._iScale,T+" ft",T/u))},_updateScale:function(a,u,p){a.style.width=Math.round(this.options.maxWidth*p)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),p=a/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),ws=function(a){return new Ro(a)},Io='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ga=Tn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pt.inlineSvg?Io+" ":"")+"Leaflet</a>"},initialize:function(a){G(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=Yt("div","leaflet-control-attribution"),br(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),a.length&&p.push(a.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});Kt.mergeOptions({attributionControl:!0}),Kt.addInitHook(function(){this.options.attributionControl&&new ga().addTo(this)});var _a=function(a){return new ga(a)};Tn.Layers=Ts,Tn.Zoom=Tr,Tn.Scale=Ro,Tn.Attribution=ga,Bn.layers=Co,Bn.zoom=Rl,Bn.scale=ws,Bn.attribution=_a;var Xn=oe.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xn.addTo=function(a,u){return a.addHandler(u,this),this};var Il={Events:ot},Di=Pt.touch?"touchstart mousedown":"mousedown",Li=xt.extend({options:{clickTolerance:3},initialize:function(a,u,p,x){G(this,x),this._element=a,this._dragStartTarget=u||a,this._preventOutline=p},enable:function(){this._enabled||(Mt(this._dragStartTarget,Di,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Li._dragging===this&&this.finishDrag(!0),he(this._dragStartTarget,Di,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!vs(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Li._dragging===this&&this.finishDrag();return}if(!(Li._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Li._dragging=this,this._preventOutline&&Zr(this._element),bs(),oi(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,p=ma(this._element);this._startPoint=new gt(u.clientX,u.clientY),this._startPos=er(this._element),this._parentScale=zn(p);var x=a.type==="mousedown";Mt(document,x?"mousemove":"touchmove",this._onMove,this),Mt(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,p=new gt(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,ke(a),this._moved||(this.fire("dragstart"),this._moved=!0,Rt(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Rt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),ve(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){ye(document.body,"leaflet-dragging"),this._lastTarget&&(ye(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),he(document,"mousemove touchmove",this._onMove,this),he(document,"mouseup touchend touchcancel",this._onUp,this),Gr(),on();var u=this._moved&&this._moving;this._moving=!1,Li._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Po(a,u,p){var x,T=[1,4,2,8],R,z,X,it,ft,Et,Lt,Zt;for(R=0,Et=a.length;R<Et;R++)a[R]._code=st(a[R],u);for(X=0;X<4;X++){for(Lt=T[X],x=[],R=0,Et=a.length,z=Et-1;R<Et;z=R++)it=a[R],ft=a[z],it._code&Lt?ft._code&Lt||(Zt=J(ft,it,Lt,u,p),Zt._code=st(Zt,u),x.push(Zt)):(ft._code&Lt&&(Zt=J(ft,it,Lt,u,p),Zt._code=st(Zt,u),x.push(Zt)),x.push(it));a=x}return a}function No(a,u){var p,x,T,R,z,X,it,ft,Et;if(!a||a.length===0)throw new Error("latlngs not passed");le(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Lt=wt([0,0]),Zt=yt(a),_n=Zt.getNorthWest().distanceTo(Zt.getSouthWest())*Zt.getNorthEast().distanceTo(Zt.getNorthWest());_n<1700&&(Lt=ya(a));var Qe=a.length,Jn=[];for(p=0;p<Qe;p++){var de=wt(a[p]);Jn.push(u.project(wt([de.lat-Lt.lat,de.lng-Lt.lng])))}for(X=it=ft=0,p=0,x=Qe-1;p<Qe;x=p++)T=Jn[p],R=Jn[x],z=T.y*R.x-R.y*T.x,it+=(T.x+R.x)*z,ft+=(T.y+R.y)*z,X+=z*3;X===0?Et=Jn[0]:Et=[it/X,ft/X];var fe=u.unproject(At(Et));return wt([fe.lat+Lt.lat,fe.lng+Lt.lng])}function ya(a){for(var u=0,p=0,x=0,T=0;T<a.length;T++){var R=wt(a[T]);u+=R.lat,p+=R.lng,x++}return wt([u/x,p/x])}var Qr={__proto__:null,clipPolygon:Po,polygonCenter:No,centroid:ya};function wn(a,u){if(!u||!a.length)return a.slice();var p=u*u;return a=E(a,p),a=wr(a,p),a}function Do(a,u,p){return Math.sqrt(Bt(a,u,p,!0))}function Pl(a,u,p){return Bt(a,u,p)}function wr(a,u){var p=a.length,x=typeof Uint8Array<"u"?Uint8Array:Array,T=new x(p);T[0]=T[p-1]=1,f(a,T,u,0,p-1);var R,z=[];for(R=0;R<p;R++)T[R]&&z.push(a[R]);return z}function f(a,u,p,x,T){var R=0,z,X,it;for(X=x+1;X<=T-1;X++)it=Bt(a[X],a[x],a[T],!0),it>R&&(z=X,R=it);R>p&&(u[z]=1,f(a,u,p,x,z),f(a,u,p,z,T))}function E(a,u){for(var p=[a[0]],x=1,T=0,R=a.length;x<R;x++)vt(a[x],a[T])>u&&(p.push(a[x]),T=x);return T<R-1&&p.push(a[R-1]),p}var A;function N(a,u,p,x,T){var R=x?A:st(a,p),z=st(u,p),X,it,ft;for(A=z;;){if(!(R|z))return[a,u];if(R&z)return!1;X=R||z,it=J(a,u,X,p,T),ft=st(it,p),X===R?(a=it,R=ft):(u=it,z=ft)}}function J(a,u,p,x,T){var R=u.x-a.x,z=u.y-a.y,X=x.min,it=x.max,ft,Et;return p&8?(ft=a.x+R*(it.y-a.y)/z,Et=it.y):p&4?(ft=a.x+R*(X.y-a.y)/z,Et=X.y):p&2?(ft=it.x,Et=a.y+z*(it.x-a.x)/R):p&1&&(ft=X.x,Et=a.y+z*(X.x-a.x)/R),new gt(ft,Et,T)}function st(a,u){var p=0;return a.x<u.min.x?p|=1:a.x>u.max.x&&(p|=2),a.y<u.min.y?p|=4:a.y>u.max.y&&(p|=8),p}function vt(a,u){var p=u.x-a.x,x=u.y-a.y;return p*p+x*x}function Bt(a,u,p,x){var T=u.x,R=u.y,z=p.x-T,X=p.y-R,it=z*z+X*X,ft;return it>0&&(ft=((a.x-T)*z+(a.y-R)*X)/it,ft>1?(T=p.x,R=p.y):ft>0&&(T+=z*ft,R+=X*ft)),z=a.x-T,X=a.y-R,x?z*z+X*X:new gt(T,R)}function le(a){return!nt(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function ue(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),le(a)}function Ie(a,u){var p,x,T,R,z,X,it,ft;if(!a||a.length===0)throw new Error("latlngs not passed");le(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Et=wt([0,0]),Lt=yt(a),Zt=Lt.getNorthWest().distanceTo(Lt.getSouthWest())*Lt.getNorthEast().distanceTo(Lt.getNorthWest());Zt<1700&&(Et=ya(a));var _n=a.length,Qe=[];for(p=0;p<_n;p++){var Jn=wt(a[p]);Qe.push(u.project(wt([Jn.lat-Et.lat,Jn.lng-Et.lng])))}for(p=0,x=0;p<_n-1;p++)x+=Qe[p].distanceTo(Qe[p+1])/2;if(x===0)ft=Qe[0];else for(p=0,R=0;p<_n-1;p++)if(z=Qe[p],X=Qe[p+1],T=z.distanceTo(X),R+=T,R>x){it=(R-x)/T,ft=[X.x-it*(X.x-z.x),X.y-it*(X.y-z.y)];break}var de=u.unproject(At(ft));return wt([de.lat+Et.lat,de.lng+Et.lng])}var ui={__proto__:null,simplify:wn,pointToSegmentDistance:Do,closestPointOnSegment:Pl,clipSegment:N,_getEdgeIntersection:J,_getBitCode:st,_sqClosestPointOnSegment:Bt,isFlat:le,_flat:ue,polylineCenter:Ie},ci={project:function(a){return new gt(a.lng,a.lat)},unproject:function(a){return new St(a.y,a.x)},bounds:new H([-180,-90],[180,90])},$n={R:6378137,R_MINOR:6356752314245179e-9,bounds:new H([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,p=this.R,x=a.lat*u,T=this.R_MINOR/p,R=Math.sqrt(1-T*T),z=R*Math.sin(x),X=Math.tan(Math.PI/4-x/2)/Math.pow((1-z)/(1+z),R/2);return x=-p*Math.log(Math.max(X,1e-10)),new gt(a.lng*u*p,x)},unproject:function(a){for(var u=180/Math.PI,p=this.R,x=this.R_MINOR/p,T=Math.sqrt(1-x*x),R=Math.exp(-a.y/p),z=Math.PI/2-2*Math.atan(R),X=0,it=.1,ft;X<15&&Math.abs(it)>1e-7;X++)ft=T*Math.sin(z),ft=Math.pow((1-ft)/(1+ft),T/2),it=Math.PI/2-2*Math.atan(R*ft)-z,z+=it;return new St(z*u,a.x*u/p)}},Oi={__proto__:null,LonLat:ci,Mercator:$n,SphericalMercator:pr},Ss=l({},Ee,{code:"EPSG:3395",projection:$n,transformation:(function(){var a=.5/(Math.PI*$n.R);return Gi(a,.5,-a,.5)})()}),As=l({},Ee,{code:"EPSG:4326",projection:ci,transformation:Gi(1/180,1,-1/180,.5)}),va=l({},Ft,{projection:ci,transformation:Gi(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var p=u.lng-a.lng,x=u.lat-a.lat;return Math.sqrt(p*p+x*x)},infinite:!0});Ft.Earth=Ee,Ft.EPSG3395=Ss,Ft.EPSG3857=Vr,Ft.EPSG900913=Zi,Ft.EPSG4326=As,Ft.Simple=va;var ki=xt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[v(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[v(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Kt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=v(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=v(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return v(a)in this._layers},eachLayer:function(a,u){for(var p in this._layers)a.call(u,this._layers[p]);return this},_addLayers:function(a){a=a?nt(a)?a:[a]:[];for(var u=0,p=a.length;u<p;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[v(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=v(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var T=this._zoomBoundLayers[x].options;a=T.minZoom===void 0?a:Math.min(a,T.minZoom),u=T.maxZoom===void 0?u:Math.max(u,T.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xa=ki.extend({initialize:function(a,u){G(this,u),this._layers={};var p,x;if(a)for(p=0,x=a.length;p<x;p++)this.addLayer(a[p])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),p,x;for(p in this._layers)x=this._layers[p],x[a]&&x[a].apply(x,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var p in this._layers)a.call(u,this._layers[p]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return v(a)}}),zf=function(a,u){return new xa(a,u)},sr=xa.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),xa.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),xa.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new _t;for(var u in this._layers){var p=this._layers[u];a.extend(p.getBounds?p.getBounds():p.getLatLng())}return a}}),dh=function(a,u){return new sr(a,u)},ar=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){G(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var p=this._getIconUrl(a);if(!p){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(x,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(a,u){var p=this.options,x=p[u+"Size"];typeof x=="number"&&(x=[x,x]);var T=At(x),R=At(u==="shadow"&&p.shadowAnchor||p.iconAnchor||T&&T.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(p.className||""),R&&(a.style.marginLeft=-R.x+"px",a.style.marginTop=-R.y+"px"),T&&(a.style.width=T.x+"px",a.style.height=T.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return Pt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Lo(a){return new ar(a)}var Oo=ar.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Oo.imagePath!="string"&&(Oo.imagePath=this._detectIconPath()),(this.options.imagePath||Oo.imagePath)+ar.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(p,x,T){var R=x.exec(p);return R&&R[T]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=Yt("div","leaflet-default-icon-path",document.body),u=qr(a,"background-image")||qr(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),ko=Xn.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Li(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Rt(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ye(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,p=u._map,x=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,R=er(u._icon),z=p.getPixelBounds(),X=p.getPixelOrigin(),it=ut(z.min._subtract(X).add(T),z.max._subtract(X).subtract(T));if(!it.contains(R)){var ft=At((Math.max(it.max.x,R.x)-it.max.x)/(z.max.x-it.max.x)-(Math.min(it.min.x,R.x)-it.min.x)/(z.min.x-it.min.x),(Math.max(it.max.y,R.y)-it.max.y)/(z.max.y-it.max.y)-(Math.min(it.min.y,R.y)-it.min.y)/(z.min.y-it.min.y)).multiplyBy(x);p.panBy(ft,{animate:!1}),this._draggable._newPos._add(ft),this._draggable._startPos._add(ft),ve(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=F(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Y(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,p=u._shadow,x=er(u._icon),T=u._map.layerPointToLatLng(x);p&&ve(p,x),u._latlng=T,a.latlng=T,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Y(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Mo=ki.extend({options:{icon:new Oo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){G(this,u),this._latlng=wt(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=wt(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=a.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,a.title&&(p.title=a.title),p.tagName==="IMG"&&(p.alt=a.alt||"")),Rt(p,u),a.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(p,"focus",this._panOnFocus,this);var T=a.icon.createShadow(this._shadow),R=!1;T!==this._shadow&&(this._removeShadow(),R=!0),T&&(Rt(T,u),T.alt=""),this._shadow=T,a.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&R&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(this._icon,"focus",this._panOnFocus,this),Qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&ve(this._icon,a),this._shadow&&ve(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Rt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ko)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ko(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Re(this._icon,a),this._shadow&&Re(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,p=u.iconSize?At(u.iconSize):At(0,0),x=u.iconAnchor?At(u.iconAnchor):At(0,0);a.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fh(a,u){return new Mo(a,u)}var or=ki.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return G(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ba=or.extend({options:{fill:!0,radius:10},initialize:function(a,u){G(this,u),this._latlng=wt(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=wt(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return or.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,p=this._clickTolerance(),x=[a+p,u+p];this._pxBounds=new H(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ph(a,u){return new ba(a,u)}var Nl=ba.extend({initialize:function(a,u,p){if(typeof u=="number"&&(u=l({},p,{radius:u})),G(this,u),this._latlng=wt(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new _t(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:or.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===Ee.distance){var T=Math.PI/180,R=this._mRadius/Ee.R/T,z=p.project([u+R,a]),X=p.project([u-R,a]),it=z.add(X).divideBy(2),ft=p.unproject(it).lat,Et=Math.acos((Math.cos(R*T)-Math.sin(u*T)*Math.sin(ft*T))/(Math.cos(u*T)*Math.cos(ft*T)))/T;(isNaN(Et)||Et===0)&&(Et=R/Math.cos(Math.PI/180*u)),this._point=it.subtract(p.getPixelOrigin()),this._radius=isNaN(Et)?0:it.x-p.project([ft,a-Et]).x,this._radiusY=it.y-z.y}else{var Lt=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Lt).x}this._updateBounds()}});function mh(a,u,p){return new Nl(a,u,p)}var Sr=or.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){G(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,p=null,x=Bt,T,R,z=0,X=this._parts.length;z<X;z++)for(var it=this._parts[z],ft=1,Et=it.length;ft<Et;ft++){T=it[ft-1],R=it[ft];var Lt=x(a,T,R,!0);Lt<u&&(u=Lt,p=x(a,T,R))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ie(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=wt(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new _t,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return le(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],p=le(a),x=0,T=a.length;x<T;x++)p?(u[x]=wt(a[x]),this._bounds.extend(u[x])):u[x]=this._convertLatLngs(a[x]);return u},_project:function(){var a=new H;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new gt(a,a);this._rawPxBounds&&(this._pxBounds=new H([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,p){var x=a[0]instanceof St,T=a.length,R,z;if(x){for(z=[],R=0;R<T;R++)z[R]=this._map.latLngToLayerPoint(a[R]),p.extend(z[R]);u.push(z)}else for(R=0;R<T;R++)this._projectLatlngs(a[R],u,p)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,x,T,R,z,X,it;for(p=0,T=0,R=this._rings.length;p<R;p++)for(it=this._rings[p],x=0,z=it.length;x<z-1;x++)X=N(it[x],it[x+1],a,x,!0),X&&(u[T]=u[T]||[],u[T].push(X[0]),(X[1]!==it[x+1]||x===z-2)&&(u[T].push(X[1]),T++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,p=0,x=a.length;p<x;p++)a[p]=wn(a[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var p,x,T,R,z,X,it=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(p=0,R=this._parts.length;p<R;p++)for(X=this._parts[p],x=0,z=X.length,T=z-1;x<z;T=x++)if(!(!u&&x===0)&&Do(a,X[T],X[x])<=it)return!0;return!1}});function Vf(a,u){return new Sr(a,u)}Sr._flat=ue;var Ea=Sr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return No(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=Sr.prototype._convertLatLngs.call(this,a),p=u.length;return p>=2&&u[0]instanceof St&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(a){Sr.prototype._setLatLngs.call(this,a),le(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return le(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,p=new gt(u,u);if(a=new H(a.min.subtract(p),a.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,T=this._rings.length,R;x<T;x++)R=Po(this._rings[x],a,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,p,x,T,R,z,X,it,ft;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(R=0,it=this._parts.length;R<it;R++)for(p=this._parts[R],z=0,ft=p.length,X=ft-1;z<ft;X=z++)x=p[z],T=p[X],x.y>a.y!=T.y>a.y&&a.x<(T.x-x.x)*(a.y-x.y)/(T.y-x.y)+x.x&&(u=!u);return u||Sr.prototype._containsPoint.call(this,a,!0)}});function Bf(a,u){return new Ea(a,u)}var Ar=sr.extend({initialize:function(a,u){G(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=nt(a)?a:a.features,p,x,T;if(u){for(p=0,x=u.length;p<x;p++)T=u[p],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var R=this.options;if(R.filter&&!R.filter(a))return this;var z=Sn(a,R);return z?(z.feature=Ol(a),z.defaultOptions=z.options,this.resetStyle(z),R.onEachFeature&&R.onEachFeature(a,z),this.addLayer(z)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=l({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function Sn(a,u){var p=a.type==="Feature"?a.geometry:a,x=p?p.coordinates:null,T=[],R=u&&u.pointToLayer,z=u&&u.coordsToLatLng||Dl,X,it,ft,Et;if(!x&&!p)return null;switch(p.type){case"Point":return X=z(x),Ta(R,a,X,u);case"MultiPoint":for(ft=0,Et=x.length;ft<Et;ft++)X=z(x[ft]),T.push(Ta(R,a,X,u));return new sr(T);case"LineString":case"MultiLineString":return it=jo(x,p.type==="LineString"?0:1,z),new Sr(it,u);case"Polygon":case"MultiPolygon":return it=jo(x,p.type==="Polygon"?1:2,z),new Ea(it,u);case"GeometryCollection":for(ft=0,Et=p.geometries.length;ft<Et;ft++){var Lt=Sn({geometry:p.geometries[ft],type:"Feature",properties:a.properties},u);Lt&&T.push(Lt)}return new sr(T);case"FeatureCollection":for(ft=0,Et=p.features.length;ft<Et;ft++){var Zt=Sn(p.features[ft],u);Zt&&T.push(Zt)}return new sr(T);default:throw new Error("Invalid GeoJSON object.")}}function Ta(a,u,p,x){return a?a(u,p):new Mo(p,x&&x.markersInheritOptions&&x)}function Dl(a){return new St(a[1],a[0],a[2])}function jo(a,u,p){for(var x=[],T=0,R=a.length,z;T<R;T++)z=u?jo(a[T],u-1,p):(p||Dl)(a[T]),x.push(z);return x}function Ll(a,u){return a=wt(a),a.alt!==void 0?[I(a.lng,u),I(a.lat,u),I(a.alt,u)]:[I(a.lng,u),I(a.lat,u)]}function zo(a,u,p,x){for(var T=[],R=0,z=a.length;R<z;R++)T.push(u?zo(a[R],le(a[R])?0:u-1,p,x):Ll(a[R],x));return!u&&p&&T.length>0&&T.push(T[0].slice()),T}function Xr(a,u){return a.feature?l({},a.feature,{geometry:u}):Ol(u)}function Ol(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var $r={toGeoJSON:function(a){return Xr(this,{type:"Point",coordinates:Ll(this.getLatLng(),a)})}};Mo.include($r),Nl.include($r),ba.include($r),Sr.include({toGeoJSON:function(a){var u=!le(this._latlngs),p=zo(this._latlngs,u?1:0,!1,a);return Xr(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),Ea.include({toGeoJSON:function(a){var u=!le(this._latlngs),p=u&&!le(this._latlngs[0]),x=zo(this._latlngs,p?2:u?1:0,!0,a);return u||(x=[x]),Xr(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),xa.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(a).geometry.coordinates)}),Xr(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var p=u==="GeometryCollection",x=[];return this.eachLayer(function(T){if(T.toGeoJSON){var R=T.toGeoJSON(a);if(p)x.push(R.geometry);else{var z=Ol(R);z.type==="FeatureCollection"?x.push.apply(x,z.features):x.push(z)}}}),p?Xr(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function kl(a,u){return new Ar(a,u)}var Vo=kl,wa=ki.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,p){this._url=a,this._bounds=yt(u),G(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Rt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Oe(this._image),this},bringToBack:function(){return this._map&&Yn(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=yt(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:Yt("img");if(Rt(u,"leaflet-image-layer"),this._zoomAnimated&&Rt(u,"leaflet-zoom-animated"),this.options.className&&Rt(u,this.options.className),u.onselectstart=C,u.onmousemove=C,u.onload=d(this.fire,this,"load"),u.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Ri(this._image,p,u)},_reset:function(){var a=this._image,u=new H(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();ve(a,u.min),a.style.width=p.x+"px",a.style.height=p.y+"px"},_updateOpacity:function(){Re(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),gh=function(a,u,p){return new wa(a,u,p)},Jr=wa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:Yt("video");if(Rt(u,"leaflet-image-layer"),this._zoomAnimated&&Rt(u,"leaflet-zoom-animated"),this.options.className&&Rt(u,this.options.className),u.onselectstart=C,u.onmousemove=C,u.onloadeddata=d(this.fire,this,"load"),a){for(var p=u.getElementsByTagName("source"),x=[],T=0;T<p.length;T++)x.push(p[T].src);this._url=p.length>0?x:[u.src];return}nt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var z=Yt("source");z.src=this._url[R],u.appendChild(z)}}});function Sa(a,u,p){return new Jr(a,u,p)}var Ml=wa.extend({_initImage:function(){var a=this._image=this._url;Rt(a,"leaflet-image-layer"),this._zoomAnimated&&Rt(a,"leaflet-zoom-animated"),this.options.className&&Rt(a,this.options.className),a.onselectstart=C,a.onmousemove=C}});function _h(a,u,p){return new Ml(a,u,p)}var An=ki.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof St||nt(a))?(this._latlng=wt(a),G(this,u)):(G(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Re(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Re(this._container,1),this.bringToFront(),this.options.interactive&&(Rt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Re(this._container,0),this._removeTimeout=setTimeout(d(Qt,void 0,this._container),200)):Qt(this._container),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=wt(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Oe(this._container),this},bringToBack:function(){return this._map&&Yn(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof sr){u=null;var p=this._source._layers;for(var x in p)if(p[x]._map){u=p[x];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=At(this.options.offset),p=this._getAnchor();this._zoomAnimated?ve(this._container,a.add(p)):u=u.add(a).add(p);var x=this._containerBottom=-u.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=x+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Kt.include({_initOverlay:function(a,u,p,x){var T=u;return T instanceof a||(T=new a(x).setContent(u)),p&&T.setLatLng(p),T}}),ki.include({_initOverlay:function(a,u,p,x){var T=p;return T instanceof a?(G(T,x),T._source=this):(T=u&&!x?u:new a(x,this),T.setContent(p)),T}});var Bo=An.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,An.prototype.openOn.call(this,a)},onAdd:function(a){An.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof or||this._source.on("preclick",ee))},onRemove:function(a){An.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof or||this._source.off("preclick",ee))},getEvents:function(){var a=An.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=Yt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Yt("div",a+"-content-wrapper",u);if(this._contentNode=Yt("div",a+"-content",p),br(u),li(this._contentNode),Mt(u,"contextmenu",ee),this._tipContainer=Yt("div",a+"-tip-container",u),this._tip=Yt("div",a+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=Yt("a",a+"-close-button",u);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',Mt(x,"click",function(T){ke(T),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var p=a.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var x=a.offsetHeight,T=this.options.maxHeight,R="leaflet-popup-scrolled";T&&x>T?(u.height=T+"px",Rt(a,R)):ye(a,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),p=this._getAnchor();ve(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(qr(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,x=this._containerWidth,T=new gt(this._containerLeft,-p-this._containerBottom);T._add(er(this._container));var R=a.layerPointToContainerPoint(T),z=At(this.options.autoPanPadding),X=At(this.options.autoPanPaddingTopLeft||z),it=At(this.options.autoPanPaddingBottomRight||z),ft=a.getSize(),Et=0,Lt=0;R.x+x+it.x>ft.x&&(Et=R.x+x-ft.x+it.x),R.x-Et-X.x<0&&(Et=R.x-X.x),R.y+p+it.y>ft.y&&(Lt=R.y+p-ft.y+it.y),R.y-Lt-X.y<0&&(Lt=R.y-X.y),(Et||Lt)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Et,Lt]))}},_getAnchor:function(){return At(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),yh=function(a,u){return new Bo(a,u)};Kt.mergeOptions({closePopupOnClick:!0}),Kt.include({openPopup:function(a,u,p){return this._initOverlay(Bo,a,u,p).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),ki.include({bindPopup:function(a,u){return this._popup=this._initOverlay(Bo,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof sr||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Ii(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof or)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Uo=An.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){An.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){An.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=An.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Yt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,p,x=this._map,T=this._container,R=x.latLngToContainerPoint(x.getCenter()),z=x.layerPointToContainerPoint(a),X=this.options.direction,it=T.offsetWidth,ft=T.offsetHeight,Et=At(this.options.offset),Lt=this._getAnchor();X==="top"?(u=it/2,p=ft):X==="bottom"?(u=it/2,p=0):X==="center"?(u=it/2,p=ft/2):X==="right"?(u=0,p=ft/2):X==="left"?(u=it,p=ft/2):z.x<R.x?(X="right",u=0,p=ft/2):(X="left",u=it+(Et.x+Lt.x)*2,p=ft/2),a=a.subtract(At(u,p,!0)).add(Et).add(Lt),ye(T,"leaflet-tooltip-right"),ye(T,"leaflet-tooltip-left"),ye(T,"leaflet-tooltip-top"),ye(T,"leaflet-tooltip-bottom"),Rt(T,"leaflet-tooltip-"+X),ve(T,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Re(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return At(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Uf=function(a,u){return new Uo(a,u)};Kt.include({openTooltip:function(a,u,p){return this._initOverlay(Uo,a,u,p).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),ki.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Uo,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof sr||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(Mt(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Mt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,p,x;this._tooltip.options.sticky&&a.originalEvent&&(p=this._map.mouseEventToContainerPoint(a.originalEvent),x=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(u)}});var vh=ar.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Le(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var x=At(p.bgPos);u.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function Ff(a){return new vh(a)}ar.Default=Oo;var Aa=ki.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){G(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Qt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Oe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof gt?a:new gt(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,p=-a(-1/0,1/0),x=0,T=u.length,R;x<T;x++)R=u[x].style.zIndex,u[x]!==this._container&&R&&(p=a(p,+R));isFinite(p)&&(this.options.zIndex=p+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Pt.ielt9){Re(this._container,this.options.opacity);var a=+new Date,u=!1,p=!1;for(var x in this._tiles){var T=this._tiles[x];if(!(!T.current||!T.loaded)){var R=Math.min(1,(a-T.loaded)/200);Re(T.el,R),R<1?u=!0:(T.active?p=!0:this._onOpaqueTile(T),T.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(Y(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=Yt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===a?(this._levels[p].el.style.zIndex=u-Math.abs(a-p),this._onUpdateLevel(p)):(Qt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[a],T=this._map;return x||(x=this._levels[a]={},x.el=Yt("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=u,x.origin=T.project(T.unproject(T.getPixelOrigin()),a).round(),x.zoom=a,this._setZoomTransform(x,T.getCenter(),T.getZoom()),C(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var a,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var x=u.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Qt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,p,x){var T=Math.floor(a/2),R=Math.floor(u/2),z=p-1,X=new gt(+T,+R);X.z=+z;var it=this._tileCoordsToKey(X),ft=this._tiles[it];return ft&&ft.active?(ft.retain=!0,!0):(ft&&ft.loaded&&(ft.retain=!0),z>x?this._retainParent(T,R,z,x):!1)},_retainChildren:function(a,u,p,x){for(var T=2*a;T<2*a+2;T++)for(var R=2*u;R<2*u+2;R++){var z=new gt(T,R);z.z=p+1;var X=this._tileCoordsToKey(z),it=this._tiles[X];if(it&&it.active){it.retain=!0;continue}else it&&it.loaded&&(it.retain=!0);p+1<x&&this._retainChildren(T,R,p+1,x)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,p,x){var T=Math.round(u);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var R=this.options.updateWhenZooming&&T!==this._tileZoom;(!x||R)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(a),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],a,u)},_setZoomTransform:function(a,u,p){var x=this._map.getZoomScale(p,a.zoom),T=a.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(u,p)).round();Pt.any3d?Ri(a.el,T,x):ve(a.el,T)},_resetGrid:function(){var a=this._map,u=a.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],x).x/p.x),Math.ceil(a.project([0,u.wrapLng[1]],x).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],x).y/p.x),Math.ceil(a.project([u.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),x=u.getZoomScale(p,this._tileZoom),T=u.project(a,this._tileZoom).floor(),R=u.getSize().divideBy(x*2);return new H(T.subtract(R),T.add(R))},_update:function(a){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(a),T=this._pxBoundsToTileRange(x),R=T.getCenter(),z=[],X=this.options.keepBuffer,it=new H(T.getBottomLeft().subtract([X,-X]),T.getTopRight().add([X,-X]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ft in this._tiles){var Et=this._tiles[ft].coords;(Et.z!==this._tileZoom||!it.contains(new gt(Et.x,Et.y)))&&(this._tiles[ft].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(a,p);return}for(var Lt=T.min.y;Lt<=T.max.y;Lt++)for(var Zt=T.min.x;Zt<=T.max.x;Zt++){var _n=new gt(Zt,Lt);if(_n.z=this._tileZoom,!!this._isValidTile(_n)){var Qe=this._tiles[this._tileCoordsToKey(_n)];Qe?Qe.current=!0:z.push(_n)}}if(z.sort(function(de,fe){return de.distanceTo(R)-fe.distanceTo(R)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Jn=document.createDocumentFragment();for(Zt=0;Zt<z.length;Zt++)this._addTile(z[Zt],Jn);this._level.el.appendChild(Jn)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(a.x<p.min.x||a.x>p.max.x)||!u.wrapLat&&(a.y<p.min.y||a.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(a);return yt(this.options.bounds).overlaps(x)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,p=this.getTileSize(),x=a.scaleBy(p),T=x.add(p),R=u.unproject(x,a.z),z=u.unproject(T,a.z);return[R,z]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),p=new _t(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),p=new gt(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(a){var u=this._tiles[a];u&&(Qt(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Rt(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=C,a.onmousemove=C,Pt.ielt9&&this.options.opacity<1&&Re(a,this.options.opacity)},_addTile:function(a,u){var p=this._getTilePos(a),x=this._tileCoordsToKey(a),T=this.createTile(this._wrapCoords(a),d(this._tileReady,this,a));this._initTile(T),this.createTile.length<2&&F(d(this._tileReady,this,a,null,T)),ve(T,p),this._tiles[x]={el:T,coords:a,current:!0},u.appendChild(T),this.fire("tileloadstart",{tile:T,coords:a})},_tileReady:function(a,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:a});var x=this._tileCoordsToKey(a);p=this._tiles[x],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Re(p.el,0),Y(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(Rt(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pt.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new gt(this._wrapX?w(a.x,this._wrapX):a.x,this._wrapY?w(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new H(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function xh(a){return new Aa(a)}var ts=Aa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=G(this,u),u.detectRetina&&Pt.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var p=document.createElement("img");return Mt(p,"load",d(this._tileOnLoad,this,u,p)),Mt(p,"error",d(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(a),p},getTileUrl:function(a){var u={r:Pt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=p),u["-y"]=p}return q(this._url,l(u,this.options))},_tileOnLoad:function(a,u){Pt.ielt9?setTimeout(d(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,p){var x=this.options.errorTileUrl;x&&u.getAttribute("src")!==x&&(u.src=x),a(p,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,x=this.options.zoomOffset;return p&&(a=u-a),a+x},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=C,u.onerror=C,!u.complete)){u.src=bt;var p=this._tiles[a].coords;Qt(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",bt),Aa.prototype._removeTile.call(this,a)},_tileReady:function(a,u,p){if(!(!this._map||p&&p.getAttribute("src")===bt))return Aa.prototype._tileReady.call(this,a,u,p)}});function hi(a,u){return new ts(a,u)}var Fo=ts.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var p=l({},this.defaultWmsParams);for(var x in u)x in this.options||(p[x]=u[x]);u=G(this,u);var T=u.detectRetina&&Pt.retina?2:1,R=this.getTileSize();p.width=R.x*T,p.height=R.y*T,this.wmsParams=p},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,ts.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),p=this._crs,x=ut(p.project(u[0]),p.project(u[1])),T=x.min,R=x.max,z=(this._wmsVersion>=1.3&&this._crs===As?[T.y,T.x,R.y,R.x]:[T.x,T.y,R.x,R.y]).join(","),X=ts.prototype.getTileUrl.call(this,a);return X+V(this.wmsParams,X,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(a,u){return l(this.wmsParams,a),u||this.redraw(),this}});function di(a,u){return new Fo(a,u)}ts.WMS=Fo,hi.wms=di;var Un=ki.extend({options:{padding:.1},initialize:function(a){G(this,a),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Rt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var p=this._map.getZoomScale(u,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,u),R=x.multiplyBy(-p).add(T).subtract(this._map._getNewPixelOrigin(a,u));Pt.any3d?Ri(this._container,R,p):ve(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new H(p,p.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),jl=Un.extend({options:{tolerance:0},getEvents:function(){var a=Un.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Un.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Mt(a,"mousemove",this._onMouseMove,this),Mt(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mt(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Y(this._redrawRequest),delete this._ctx,Qt(this._container),he(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Un.prototype._update.call(this);var a=this._bounds,u=this._container,p=a.getSize(),x=Pt.retina?2:1;ve(u,a.min),u.width=x*p.x,u.height=x*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",Pt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Un.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[v(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,p=u.next,x=u.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete a._order,delete this._layers[v(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),p=[],x,T;for(T=0;T<u.length;T++){if(x=Number(u[T]),isNaN(x))return;p.push(x)}a.options._dashArray=p}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new H,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)a=x.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var p,x,T,R,z=a._parts,X=z.length,it=this._ctx;if(X){for(it.beginPath(),p=0;p<X;p++){for(x=0,T=z[p].length;x<T;x++)R=z[p][x],it[x?"lineTo":"moveTo"](R.x,R.y);u&&it.closePath()}this._fillStroke(it,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,p=this._ctx,x=Math.max(Math.round(a._radius),1),T=(Math.max(Math.round(a._radiusY),1)||x)/x;T!==1&&(p.save(),p.scale(1,T)),p.beginPath(),p.arc(u.x,u.y/T,x,0,Math.PI*2,!1),T!==1&&p.restore(),this._fillStroke(p,a)}},_fillStroke:function(a,u){var p=u.options;p.fill&&(a.globalAlpha=p.fillOpacity,a.fillStyle=p.fillColor||p.color,a.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=p.opacity,a.lineWidth=p.weight,a.strokeStyle=p.color,a.lineCap=p.lineCap,a.lineJoin=p.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),p,x,T=this._drawFirst;T;T=T.next)p=T.layer,p.options.interactive&&p._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(x?[x]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(ye(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var p,x,T=this._drawFirst;T;T=T.next)p=T.layer,p.options.interactive&&p._containsPoint(u)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(a),x&&(Rt(this._container,"leaflet-interactive"),this._fireEvent([x],a,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,p){this._map._fireDOMEvent(u,p||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var p=u.next,x=u.prev;if(p)p.prev=x;else return;x?x.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var p=u.next,x=u.prev;if(x)x.next=p;else return;p?p.prev=x:x&&(this._drawLast=x),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function Ho(a){return Pt.canvas?new jl(a):null}var es=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Uu={_initContainer:function(){this._container=Yt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Un.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=es("shape");Rt(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=es("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[v(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;Qt(u),a.removeInteractiveTarget(u),delete this._layers[v(a)]},_updateStyle:function(a){var u=a._stroke,p=a._fill,x=a.options,T=a._container;T.stroked=!!x.stroke,T.filled=!!x.fill,x.stroke?(u||(u=a._stroke=es("stroke")),T.appendChild(u),u.weight=x.weight+"px",u.color=x.color,u.opacity=x.opacity,x.dashArray?u.dashStyle=nt(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=x.lineCap.replace("butt","flat"),u.joinstyle=x.lineJoin):u&&(T.removeChild(u),a._stroke=null),x.fill?(p||(p=a._fill=es("fill")),T.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(T.removeChild(p),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),p=Math.round(a._radius),x=Math.round(a._radiusY||p);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+x+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){Oe(a._container)},_bringToBack:function(a){Yn(a._container)}},lr=Pt.vml?es:oa,Ca=Un.extend({_initContainer:function(){this._container=lr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=lr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qt(this._container),he(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Un.prototype._update.call(this);var a=this._bounds,u=a.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),ve(p,a.min),p.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=lr("path");a.options.className&&Rt(u,a.options.className),a.options.interactive&&Rt(u,"leaflet-interactive"),this._updateStyle(a),this._layers[v(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Qt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[v(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,p=a.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,Br(a._parts,u))},_updateCircle:function(a){var u=a._point,p=Math.max(Math.round(a._radius),1),x=Math.max(Math.round(a._radiusY),1)||p,T="a"+p+","+x+" 0 1,0 ",R=a._empty()?"M0 0":"M"+(u.x-p)+","+u.y+T+p*2+",0 "+T+-p*2+",0 ";this._setPath(a,R)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){Oe(a._path)},_bringToBack:function(a){Yn(a._path)}});Pt.vml&&Ca.include(Uu);function qo(a){return Pt.svg||Pt.vml?new Ca(a):null}Kt.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&Ho(a)||qo(a)}});var Cs=Ea.extend({initialize:function(a,u){Ea.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=yt(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Hf(a,u){return new Cs(a,u)}Ca.create=lr,Ca.pointsToPath=Br,Ar.geometryToLayer=Sn,Ar.coordsToLatLng=Dl,Ar.coordsToLatLngs=jo,Ar.latLngToCoords=Ll,Ar.latLngsToCoords=zo,Ar.getFeature=Xr,Ar.asFeature=Ol,Kt.mergeOptions({boxZoom:!0});var Fn=Xn.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),oi(),bs(),this._startPoint=this._map.mouseEventToContainerPoint(a),Mt(document,{contextmenu:Ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Yt("div","leaflet-zoom-box",this._container),Rt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new H(this._point,this._startPoint),p=u.getSize();ve(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Qt(this._box),ye(this._container,"leaflet-crosshair")),on(),Gr(),he(document,{contextmenu:Ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var u=new _t(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Kt.addInitHook("addHandler","boxZoom",Fn),Kt.mergeOptions({doubleClickZoom:!0});var zl=Xn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,p=u.getZoom(),x=u.options.zoomDelta,T=a.originalEvent.shiftKey?p-x:p+x;u.options.doubleClickZoom==="center"?u.setZoom(T):u.setZoomAround(a.containerPoint,T)}});Kt.addInitHook("addHandler","doubleClickZoom",zl),Kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ur=Xn.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Li(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Rt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ye(this._map._container,"leaflet-grab"),ye(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=yt(this._map.options.maxBounds);this._offsetLimit=ut(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,T=(x-u+p)%a+u-p,R=(x+u+p)%a-u-p,z=Math.abs(T+p)<Math.abs(R+p)?T:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(a){var u=this._map,p=u.options,x=!p.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),x)u.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,z=p.easeLinearity,X=T.multiplyBy(z/R),it=X.distanceTo([0,0]),ft=Math.min(p.inertiaMaxSpeed,it),Et=X.multiplyBy(ft/it),Lt=ft/(p.inertiaDeceleration*z),Zt=Et.multiplyBy(-Lt/2).round();!Zt.x&&!Zt.y?u.fire("moveend"):(Zt=u._limitOffset(Zt,u.options.maxBounds),F(function(){u.panBy(Zt,{duration:Lt,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});Kt.addInitHook("addHandler","dragging",ur),Kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Fu=Xn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Mt(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),he(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,p=a.scrollTop||u.scrollTop,x=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},p=this.keyCodes,x,T;for(x=0,T=p.left.length;x<T;x++)u[p.left[x]]=[-1*a,0];for(x=0,T=p.right.length;x<T;x++)u[p.right[x]]=[a,0];for(x=0,T=p.down.length;x<T;x++)u[p.down[x]]=[0,a];for(x=0,T=p.up.length;x<T;x++)u[p.up[x]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},p=this.keyCodes,x,T;for(x=0,T=p.zoomIn.length;x<T;x++)u[p.zoomIn[x]]=a;for(x=0,T=p.zoomOut.length;x<T;x++)u[p.zoomOut[x]]=-a},_addHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){he(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,p=this._map,x;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[u],a.shiftKey&&(x=At(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(At(x),p.options.maxBounds)),p.options.worldCopyJump){var T=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(T)}else p.panBy(x)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Ii(a)}}});Kt.addInitHook("addHandler","keyboard",Fu),Kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Go=Xn.extend({addHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=ln(a),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),x),Ii(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),p=this._map.options.zoomSnap||0;a._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,R=p?Math.ceil(T/p)*p:T,z=a._limitZoom(u+(this._delta>0?R:-R))-u;this._delta=0,this._startTime=null,z&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+z):a.setZoomAround(this._lastMousePos,u+z))}});Kt.addInitHook("addHandler","scrollWheelZoom",Go);var Rs=600;Kt.mergeOptions({tapHold:Pt.touchNative&&Pt.safari&&Pt.mobile,tapTolerance:15});var Vl=Xn.extend({addHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new gt(u.clientX,u.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(Mt(document,"touchend",ke),Mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Rs),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){he(document,"touchend",ke),he(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new gt(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var p=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});Kt.addInitHook("addHandler","tapHold",Vl),Kt.mergeOptions({touchZoom:Pt.touch,bounceAtZoomLimits:!0});var Hu=Xn.extend({addHooks:function(){Rt(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(a.touches[0]),x=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),ke(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(a.touches[0]),x=u.mouseEventToContainerPoint(a.touches[1]),T=p.distanceTo(x)/this._startDist;if(this._zoom=u.getScaleZoom(T,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&T<1||this._zoom>u.getMaxZoom()&&T>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var R=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(T===1&&R.x===0&&R.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),Y(this._animRequest);var z=d(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(z,this,!0),ke(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Y(this._animRequest),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Kt.addInitHook("addHandler","touchZoom",Hu),Kt.BoxZoom=Fn,Kt.DoubleClickZoom=zl,Kt.Drag=ur,Kt.Keyboard=Fu,Kt.ScrollWheelZoom=Go,Kt.TapHold=Vl,Kt.TouchZoom=Hu,n.Bounds=H,n.Browser=Pt,n.CRS=Ft,n.Canvas=jl,n.Circle=Nl,n.CircleMarker=ba,n.Class=oe,n.Control=Tn,n.DivIcon=vh,n.DivOverlay=An,n.DomEvent=rr,n.DomUtil=Wr,n.Draggable=Li,n.Evented=xt,n.FeatureGroup=sr,n.GeoJSON=Ar,n.GridLayer=Aa,n.Handler=Xn,n.Icon=ar,n.ImageOverlay=wa,n.LatLng=St,n.LatLngBounds=_t,n.Layer=ki,n.LayerGroup=xa,n.LineUtil=ui,n.Map=Kt,n.Marker=Mo,n.Mixin=Il,n.Path=or,n.Point=gt,n.PolyUtil=Qr,n.Polygon=Ea,n.Polyline=Sr,n.Popup=Bo,n.PosAnimation=Er,n.Projection=Oi,n.Rectangle=Cs,n.Renderer=Un,n.SVG=Ca,n.SVGOverlay=Ml,n.TileLayer=ts,n.Tooltip=Uo,n.Transformation=zr,n.Util=B,n.VideoOverlay=Jr,n.bind=d,n.bounds=ut,n.canvas=Ho,n.circle=mh,n.circleMarker=ph,n.control=Bn,n.divIcon=Ff,n.extend=l,n.featureGroup=dh,n.geoJSON=kl,n.geoJson=Vo,n.gridLayer=xh,n.icon=Lo,n.imageOverlay=gh,n.latLng=wt,n.latLngBounds=yt,n.layerGroup=zf,n.map=Yr,n.marker=fh,n.point=At,n.polygon=Bf,n.polyline=Vf,n.popup=yh,n.rectangle=Hf,n.setOptions=G,n.stamp=v,n.svg=qo,n.svgOverlay=_h,n.tileLayer=hi,n.tooltip=Uf,n.transformation=Gi,n.version=s,n.videoOverlay=Sa;var qu=window.L;n.noConflict=function(){return window.L=qu,this},window.L=n}))})(Nc,Nc.exports)),Nc.exports}var xl=lL();const Iw=xg(xl);function hh(r,t,n){return Object.freeze({instance:r,context:t,container:n})}function jf(r,t){return t==null?function(s,l){const h=M.useRef(void 0);return h.current||(h.current=r(s,l)),h}:function(s,l){const h=M.useRef(void 0);h.current||(h.current=r(s,l));const d=M.useRef(s),{instance:y}=h.current;return M.useEffect(function(){d.current!==s&&(t(y,s,d.current),d.current=s)},[y,s,t]),h}}function uL(r,t){M.useEffect(function(){return(t.layerContainer??t.map).addLayer(r.instance),function(){t.layerContainer?.removeLayer(r.instance),t.map.removeLayer(r.instance)}},[t,r])}function Pw(r){return function(n){const s=Mf(),l=r(I_(n,s),s);return Aw(s.map,n.attribution),Rw(l.current,n.eventHandlers),uL(l.current,s),l}}function cL(r){function t(l,h){return hh(r(l),h)}const n=jf(t),s=sL(n);return Cw(s)}function hL(r,t){const n=jf(r,t),s=Pw(n);return iL(s)}function Nw(r,t){const n=jf(r),s=aL(n,t);return rL(s)}function dL(r,t){const n=jf(r,t),s=Pw(n);return Cw(s)}function fL(r,t,n){const{opacity:s,zIndex:l}=t;s!=null&&s!==n.opacity&&r.setOpacity(s),l!=null&&l!==n.zIndex&&r.setZIndex(l)}function pL(){return Mf().map}function mL({bounds:r,boundsOptions:t,center:n,children:s,className:l,id:h,placeholder:d,style:y,whenReady:v,zoom:b,...w},C){const[I]=M.useState({className:l,id:h,style:y}),[O,Z]=M.useState(null),G=M.useRef(void 0);M.useImperativeHandle(C,()=>O?.map??null,[O]);const V=M.useCallback(q=>{if(q!==null&&!G.current){const nt=new xl.Map(q,w);G.current=nt,n!=null&&b!=null?nt.setView(n,b):r!=null&&nt.fitBounds(r,t),v!=null&&nt.whenReady(v),Z(eL(nt))}},[]);M.useEffect(()=>()=>{O?.map.remove()},[O]);const $=O?jd.createElement(R_,{value:O},s):d??null;return jd.createElement("div",{...I,ref:V},$)}const gL=M.forwardRef(mL),xb=hL(function({position:t,...n},s){const l=new xl.Marker(t,n);return hh(l,nL(s,{overlayContainer:l}))},function(t,n,s){n.position!==s.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==s.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==s.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==s.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),_L=Nw(function(t,n){const s=new xl.Popup(t,n.overlayContainer);return hh(s,n)},function(t,n,{position:s},l){M.useEffect(function(){const{instance:d}=t;function y(b){b.popup===d&&(d.update(),l(!0))}function v(b){b.popup===d&&l(!1)}return n.map.on({popupopen:y,popupclose:v}),n.overlayContainer==null?(s!=null&&d.setLatLng(s),d.openOn(n.map)):n.overlayContainer.bindPopup(d),function(){n.map.off({popupopen:y,popupclose:v}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(d)}},[t,n,l,s])}),yL=dL(function({url:t,...n},s){const l=new xl.TileLayer(t,I_(n,s));return hh(l,s)},function(t,n,s){fL(t,n,s);const{url:l}=n;l!=null&&l!==s.url&&t.setUrl(l)}),vL=Nw(function(t,n){const s=new xl.Tooltip(t,n.overlayContainer);return hh(s,n)},function(t,n,{position:s},l){M.useEffect(function(){const d=n.overlayContainer;if(d==null)return;const{instance:y}=t,v=w=>{w.tooltip===y&&(s!=null&&y.setLatLng(s),y.update(),l(!0))},b=w=>{w.tooltip===y&&l(!1)};return d.on({tooltipopen:v,tooltipclose:b}),d.bindTooltip(y),function(){d.off({tooltipopen:v,tooltipclose:b}),d._map!=null&&d.unbindTooltip()}},[t,n,l,s])}),xL=cL(function(t){return new xl.Control.Zoom(t)});function bL({center:r}){const t=pL();return M.useEffect(()=>{r&&t.flyTo([r.lat,r.lng],14,{duration:1.5})},[r,t]),null}const EL=new Iw.DivIcon({className:"custom-div-icon",html:`<div style="
        background: var(--color-brand);
        width: 36px;
        height: 36px;
        border-radius: 50% 50% 50% 0;
        transform: rotate(-45deg);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        border: 2px solid white;
    ">
        <span class="material-icons-round" style="color: white; transform: rotate(45deg); font-size: 18px;">home</span>
    </div>`,iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]}),TL=new Iw.DivIcon({className:"custom-div-icon",html:`<div style="
        background: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 6px 16px rgba(0,0,0,0.15);
        border: 2px solid var(--color-brand);
    ">
        <span class="material-icons-round" style="color: var(--color-brand); font-size: 22px;">school</span>
    </div>`,iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20]}),wL={"Trinity College":{lat:53.3438,lng:-6.2546},UCD:{lat:53.3076,lng:-6.2225},DCU:{lat:53.3855,lng:-6.2568},UCC:{lat:51.8921,lng:-8.4929},"TU Dublin":{lat:53.3547,lng:-6.2795},"University of Galway":{lat:53.2796,lng:-9.0627},DBS:{lat:53.3392,lng:-6.2647},"Griffith College":{lat:53.3308,lng:-6.2797},NCI:{lat:53.349,lng:-6.2427},RCSI:{lat:53.3394,lng:-6.2618},IADT:{lat:53.2861,lng:-6.1539}},SL=({listings:r,center:t})=>{const n=an(),s=[53.3498,-6.2603],[l,h]=M.useState(null),d=()=>{l&&navigator.geolocation.getCurrentPosition(y=>{const{latitude:v,longitude:b}=y.coords;l.flyTo([v,b],15)})};return _.jsxs("div",{style:{position:"relative",height:"calc(100vh - 180px)",width:"100%",borderRadius:"24px",overflow:"hidden",marginTop:"16px",boxShadow:"0 12px 40px rgba(0,0,0,0.1)"},children:[_.jsx("div",{style:{position:"absolute",top:"20px",left:"20px",zIndex:1e3,display:"flex",flexDirection:"column",gap:"10px"},children:_.jsx("button",{onClick:d,style:{width:"44px",height:"44px",borderRadius:"12px",background:"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-brand)",cursor:"pointer",transition:"all 0.2s"},onMouseOver:y=>y.currentTarget.style.transform="scale(1.1)",onMouseOut:y=>y.currentTarget.style.transform="scale(1)",children:_.jsx("span",{className:"material-icons-round",children:"my_location"})})}),_.jsx("div",{style:{position:"absolute",top:"20px",right:"20px",zIndex:1e3,background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(8px)",padding:"10px 16px",borderRadius:"14px",boxShadow:"0 4px 15px rgba(0,0,0,0.08)",border:"1px solid rgba(255,255,255,0.4)",pointerEvents:"none"},children:_.jsxs("div",{style:{fontSize:"12px",fontWeight:"700",color:"#64748B",display:"flex",alignItems:"center",gap:"6px"},children:[_.jsx("span",{style:{width:"8px",height:"8px",background:"var(--color-brand)",borderRadius:"50%"}}),r.length," Results Found"]})}),_.jsxs(gL,{center:t?[t.lat,t.lng]:s,zoom:13,style:{height:"100%",width:"100%"},zoomControl:!1,ref:h,children:[_.jsx(yL,{attribution:' <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),_.jsx(xL,{position:"bottomright"}),t&&_.jsx(bL,{center:t}),Object.entries(wL).map(([y,v])=>_.jsx(xb,{position:[v.lat,v.lng],icon:TL,children:_.jsx(vL,{permanent:!0,direction:"top",offset:[0,-20],opacity:1,children:_.jsx("div",{style:{fontWeight:"800",color:"var(--color-brand)",fontSize:"10px",background:"white",padding:"2px 8px",borderRadius:"20px",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",border:"1px solid var(--color-brand-light)"},children:y})})},y)),r.map(y=>_.jsx(xb,{position:[y.lat,y.lng],icon:EL,children:_.jsx(_L,{className:"glass-popup",children:_.jsxs("div",{style:{minWidth:"220px",cursor:"pointer",borderRadius:"16px",overflow:"hidden",padding:"0"},onClick:()=>n(`/property/${y.id}`),children:[_.jsxs("div",{style:{position:"relative",height:"120px"},children:[_.jsx("img",{src:y.image,alt:y.title,style:{width:"100%",height:"100%",objectFit:"cover"}}),_.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"8px",background:"var(--color-brand)",color:"white",padding:"4px 10px",borderRadius:"8px",fontSize:"14px",fontWeight:"800",boxShadow:"0 4px 10px rgba(0,0,0,0.2)"},children:["",y.price]})]}),_.jsxs("div",{style:{padding:"12px"},children:[_.jsx("h4",{style:{margin:"0 0 6px",fontSize:"15px",fontWeight:"800",color:"#1E293B"},children:y.title}),_.jsxs("div",{style:{display:"flex",gap:"8px",color:"#64748B",fontSize:"12px",fontWeight:"600"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"14px"},children:"bed"}),y.bedrooms]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"14px"},children:"people"}),y.guests]})]})]})]})})},y.id))]}),_.jsx("style",{children:`
                .leaflet-popup-content-wrapper {
                    border-radius: 20px !important;
                    padding: 0 !important;
                    overflow: hidden !important;
                    background: rgba(255, 255, 255, 0.9) !important;
                    backdrop-filter: blur(12px) !important;
                    border: 1px solid rgba(255,255,255,0.4) !important;
                    box-shadow: 0 15px 35px rgba(0,0,0,0.1) !important;
                }
                .leaflet-popup-content {
                    margin: 0 !important;
                    width: auto !important;
                }
                .leaflet-popup-tip {
                    background: rgba(255, 255, 255, 0.9) !important;
                    backdrop-filter: blur(12px) !important;
                }
                .leaflet-marker-icon {
                    transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                }
                .leaflet-marker-icon:hover {
                    transform: scale(1.2) translateY(-5px) rotate(-45deg) !important;
                    z-index: 1000 !important;
                }
                .custom-div-icon:hover {
                    transform: scale(1.1) !important;
                }
            `})]})},AL="http://localhost:5000/api",Dw=async()=>{try{const r=await fetch(`${AL}/listings`);if(!r.ok)throw new Error("Network response was not ok");return await r.json()}catch(r){return console.error("API Fetch Error:",r),[]}},CL=()=>{const r=an(),[t,n]=M.useState([]),[s,l]=M.useState([]),[h,d]=M.useState("list"),[y,v]=M.useState("All"),[b,w]=M.useState({maxPrice:3e3,selectedCollege:"",searchPlace:"",billsIncluded:!1}),[C,I]=M.useState(null),O={"Trinity College":{lat:53.3438,lng:-6.2546},UCD:{lat:53.3076,lng:-6.2225},DCU:{lat:53.3855,lng:-6.2568},UCC:{lat:51.8921,lng:-8.4929},"TU Dublin":{lat:53.3547,lng:-6.2795},"University of Galway":{lat:53.2796,lng:-9.0627},"DBS (Dublin Business School)":{lat:53.3392,lng:-6.2647},"Griffith College":{lat:53.3308,lng:-6.2797},"NCI (National College of Ireland)":{lat:53.349,lng:-6.2427},RCSI:{lat:53.3394,lng:-6.2618},IADT:{lat:53.2861,lng:-6.1539}},Z=(G,V,$,q)=>{const lt=($-G)*Math.PI/180,bt=(q-V)*Math.PI/180,Tt=Math.sin(lt/2)*Math.sin(lt/2)+Math.cos(G*Math.PI/180)*Math.cos($*Math.PI/180)*Math.sin(bt/2)*Math.sin(bt/2);return 6371*(2*Math.atan2(Math.sqrt(Tt),Math.sqrt(1-Tt)))};return M.useEffect(()=>{(async()=>{const $=(await Dw()).map(q=>({...q,lat:parseFloat(q.lat||q.coordinates?.lat||53.3498),lng:parseFloat(q.lng||q.coordinates?.lng||-6.2603)}));n($),l($)})()},[]),M.useEffect(()=>{if(!b.searchPlace){I(null);return}const V=setTimeout(async()=>{try{const q=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(b.searchPlace+", Dublin")}`,{headers:{"User-Agent":"StayNest-App"}})).json();q&&q.length>0&&I({lat:parseFloat(q[0].lat),lng:parseFloat(q[0].lon)})}catch($){console.error("Geocoding error:",$)}},400);return()=>clearTimeout(V)},[b.searchPlace]),M.useEffect(()=>{let G=[...t];if(G=G.filter(V=>V.price<=b.maxPrice),b.billsIncluded&&(G=G.filter(V=>V.tags&&V.tags.includes("bills"))),C)G=G.filter($=>Z(C.lat,C.lng,$.lat,$.lng)<=3),G=G.map($=>({...$,distanceToSearch:Z(C.lat,C.lng,$.lat,$.lng)})).sort(($,q)=>$.distanceToSearch-q.distanceToSearch);else if(b.searchPlace){const V=b.searchPlace.toLowerCase().trim();G=G.filter($=>{const q=($.title||"").toLowerCase(),nt=($.location||"").toLowerCase(),lt=($.address||"").toLowerCase();return q.includes(V)||nt.includes(V)||lt.includes(V)})}if(y!=="All"&&(G=G.filter(V=>{const $=(V.type||"Entire Home").toLowerCase(),q=(V.title||"").toLowerCase();return y==="Sharing"?$.includes("sharing")||$.includes("room")||q.includes("room"):y==="Entire Home"?$.includes("entire home")||$.includes("flat")||$.includes("apartment")||q.includes("flat")||q.includes("apartment"):!0})),b.selectedCollege){const V=O[b.selectedCollege];V&&(G=G.map($=>{const q=Z(V.lat,V.lng,$.lat,$.lng);return{...$,distanceToCollege:q}}),C||G.sort(($,q)=>$.distanceToCollege-q.distanceToCollege))}else G=G.map(V=>({...V,distanceToCollege:null}));l(G)},[b,t,C,y]),_.jsxs("div",{style:{padding:"16px",paddingBottom:"90px",maxWidth:"600px",margin:"0 auto"},children:[_.jsxs("div",{style:{marginBottom:"32px",paddingTop:"10px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{background:"var(--color-brand)",color:"white",padding:"8px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(30, 58, 138, 0.2)"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"24px"},children:"home"})}),_.jsxs("div",{children:[_.jsx("h1",{style:{fontSize:"24px",margin:0,color:"var(--color-brand)",fontWeight:"800",letterSpacing:"-0.5px"},children:"StayNest"}),_.jsx("p",{style:{margin:"0",color:"var(--color-text-sec)",fontSize:"13px",fontWeight:"500"},children:"Find your perfect Dublin home"})]})]}),_.jsx("button",{className:"glass-panel",style:{...RL,border:"none"},onClick:()=>d(h==="list"?"map":"list"),children:_.jsx("span",{className:"material-icons-round",style:{color:"var(--color-brand)"},children:h==="list"?"map":"list"})})]}),_.jsx(JD,{initialFilters:b,onFilterChange:G=>w(V=>({...V,...G}))})]}),_.jsx("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:"28px",paddingBottom:"8px",borderBottom:"1px solid #F1F5F9"},children:["All","Sharing","Entire Home"].map(G=>_.jsxs("div",{onClick:()=>v(G),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",cursor:"pointer",opacity:y===G?1:.5,transition:"var(--transition-smooth)",position:"relative",paddingBottom:"8px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"24px",color:y===G?"var(--color-brand)":"var(--color-text-sec)"},children:G==="All"?"grid_view":G==="Sharing"?"groups":"home"}),_.jsx("span",{style:{fontSize:"11px",fontWeight:"800",letterSpacing:"0.5px"},children:G.toUpperCase()}),y===G&&_.jsx("div",{style:{position:"absolute",bottom:-1,width:"100%",height:"2px",background:"var(--color-brand)",borderRadius:"2px"}})]},G))}),h==="list"?_.jsxs("div",{style:{marginTop:"8px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"20px"},children:[_.jsx("h3",{style:{fontSize:"20px",margin:0,fontWeight:"800",color:"var(--color-text-pri)"},children:s.length>0?"Available Properties":"No properties found"}),s.length>0&&_.jsxs("span",{style:{fontSize:"13px",color:"var(--color-text-sec)",fontWeight:"600"},children:[s.length," results"]})]}),s.map((G,V)=>_.jsx("div",{className:"animate-in",style:{animationDelay:`${V*.1}s`,cursor:"pointer"},onClick:()=>r(`/property/${G.id}`),children:_.jsx(C_,{listing:G})},G.id))]}):_.jsx(SL,{listings:t,center:C||(b.selectedCollege?O[b.selectedCollege]:null)}),_.jsx(kf,{})]})},RL={background:"white",border:"1px solid #eee",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#222",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},IL=({propertyId:r,canWrite:t})=>{const[n,s]=M.useState([]),[l,h]=M.useState(!1),[d,y]=M.useState(5),[v,b]=M.useState(""),[w,C]=M.useState(!1),[I,O]=M.useState(null);M.useEffect(()=>{if(!r)return;const G=vl(ea(ze,"reviews"),ju("propertyId","==",r)),V=ps(G,$=>{const nt=$.docs.map(lt=>({id:lt.id,...lt.data()})).sort((lt,bt)=>{const Tt=lt.createdAt?.toDate?.()||new Date(0);return(bt.createdAt?.toDate?.()||new Date(0))-Tt});s(nt)});return()=>V()},[r]),M.useEffect(()=>{(async()=>{if(Ae.currentUser){const V=await fl(Mn(ze,"users",Ae.currentUser.uid));V.exists()&&O(V.data())}})()},[]);const Z=async G=>{G.preventDefault();const V=Ae.currentUser;if(!(!V||!r)){C(!0);try{await w_(ea(ze,"reviews"),{propertyId:r,userId:V.uid,userName:I?.fullName||V.displayName||"Tenant",rating:Number(d),comment:v,createdAt:rf()});const $=[...n,{rating:Number(d)}],nt=($.reduce((Tt,k)=>Tt+k.rating,0)/$.length).toFixed(1),lt=Mn(ze,"listings",r);(await fl(lt)).exists()&&await mo(lt,{rating:Number(nt),reviewCount:$.length}),b(""),h(!1),alert("Rating submitted! Thank you.")}catch($){console.error("Error submitting review:",$),alert("Failed to submit review.")}finally{C(!1)}}};return _.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #eee"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[_.jsxs("h3",{style:{fontSize:"18px",fontWeight:"800",margin:0},children:["Reviews (",n.length,")"]}),t&&!l&&_.jsx("button",{onClick:()=>h(!0),style:{background:"none",border:"none",color:"var(--color-brand)",fontWeight:"bold",cursor:"pointer",fontSize:"14px"},children:"Write a Review"})]}),l&&_.jsxs("form",{onSubmit:Z,style:{background:"#f9f9f9",padding:"16px",borderRadius:"12px",marginBottom:"20px"},children:[_.jsxs("div",{style:{marginBottom:"12px"},children:[_.jsx("label",{style:{display:"block",fontSize:"13px",color:"#666",marginBottom:"4px"},children:"Rating"}),_.jsx("div",{style:{display:"flex",gap:"8px"},children:[1,2,3,4,5].map(G=>_.jsx("span",{onClick:()=>y(G),className:"material-icons-round",style:{cursor:"pointer",color:G<=d?"#FFB23F":"#ddd",fontSize:"28px"},children:"star"},G))})]}),_.jsx("textarea",{required:!0,placeholder:"Share your experience...",value:v,onChange:G=>b(G.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px",marginBottom:"12px",minHeight:"80px",outline:"none"}}),_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("button",{type:"submit",disabled:w,style:{flex:1,padding:"10px",background:"var(--color-cta)",color:"white",border:"none",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 10px rgba(34,197,94,0.2)"},children:w?"Submitting...":"Submit"}),_.jsx("button",{type:"button",onClick:()=>h(!1),style:{flex:1,padding:"10px",background:"#eee",color:"#222",border:"none",borderRadius:"8px",fontWeight:"bold",cursor:"pointer"},children:"Cancel"})]})]}),n.length===0?_.jsxs("div",{style:{padding:"24px",textAlign:"center",background:"#F7F7F7",borderRadius:"12px",marginBottom:"24px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"24px",color:"#ccc",marginBottom:"4px",display:"block"},children:"rate_review"}),_.jsx("p",{style:{margin:0,color:"#717171",fontSize:"13px"},children:"No reviews yet. Message the broker to unlock yours!"})]}):_.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",paddingBottom:"12px",marginBottom:"12px"},children:n.map(G=>_.jsxs("div",{style:{minWidth:"220px",background:"white",padding:"12px",borderRadius:"12px",border:"1px solid #eee"},children:[_.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",marginBottom:"8px"},children:[_.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#F7F7F7",display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"14px",color:"#717171"},children:"person"})}),_.jsx("div",{style:{fontWeight:"bold",fontSize:"12px"},children:G.userName})]}),_.jsx("div",{style:{color:"#222",display:"flex",gap:"1px",marginBottom:"4px"},children:[...Array(5)].map((V,$)=>_.jsx("span",{className:"material-icons-round",style:{fontSize:"12px",color:$<G.rating?"#FF5A5F":"#ddd"},children:"star"},$))}),_.jsx("p",{style:{margin:0,fontSize:"13px",color:"#484848",lineHeight:1.4,height:"4em",overflow:"hidden"},children:G.comment})]},G.id))}),!t&&_.jsxs("div",{style:{padding:"12px",background:"#fcfcfc",border:"1px solid #eee",borderRadius:"8px",color:"#717171",fontSize:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"16px"},children:"lock"}),"Message the broker to unlock reviews"]})]})},PL=()=>{const{id:r}=Sg(),t=an(),[n,s]=M.useState(!1),[l,h]=M.useState(null),[d,y]=M.useState(!0),[v,b]=M.useState(0),[w,C]=M.useState(!1),[I,O]=M.useState(!1),Z=Ae.currentUser;M.useEffect(()=>{if(!Z||!r)return;const lt=ps(Mn(ze,"users",Z.uid),bt=>{if(bt.exists()){const Tt=bt.data().favorites||[];O(Tt.includes(r))}});return()=>lt()},[Z,r]);const G=async lt=>{if(lt.stopPropagation(),!Z){alert("Please login to save favorites."),t("/login");return}const bt=Mn(ze,"users",Z.uid);try{I?await mo(bt,{favorites:A_(r)}):await mo(bt,{favorites:S_(r)})}catch(Tt){console.error("Error updating favorites:",Tt)}},V=async()=>{const lt={title:l?.title||"StayNest Property",text:`Check out this property on StayNest: ${l?.title}`,url:window.location.href};try{navigator.share?await navigator.share(lt):(await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))}catch(bt){console.error("Error sharing:",bt)}};M.useEffect(()=>{(async()=>{try{const bt=await fetch("http://localhost:5000/api/listings");if(bt.ok){const k=(await bt.json()).find(D=>D.id===r);if(k){h(k);const D=k.ownerUid||k.brokerId;D||console.warn("Property listing is missing both ownerUid and brokerId:",k),$(D)}}}catch(bt){console.error("Error fetching property:",bt)}finally{y(!1)}})(),fetch(`http://localhost:5000/api/listings/${r}/view`,{method:"PUT"}).catch(bt=>console.error("Error incrementing view count:",bt))},[r]);const $=async lt=>{const bt=Ae.currentUser;if(!(!bt||!lt))try{const Tt=vl(ea(ze,"chats"),ju("participants","array-contains",bt.uid)),D=(await Ew(Tt)).docs.some(j=>j.data().participants.includes(lt));C(D)}catch(Tt){console.error("Error checking message history:",Tt)}};if(d)return _.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[_.jsx("div",{className:"spinner-small",style:{margin:"0 auto"}}),_.jsx("p",{children:"Loading your next home..."})]});if(!l)return _.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[_.jsx("h2",{style:{color:"#222"},children:"Aww, we couldn't find that property."}),_.jsx("button",{className:"btn-primary",onClick:()=>t("/tenant/dashboard"),children:"Back to Search"})]});const q=l.images&&l.images.length>0?l.images:[l.image||"https://via.placeholder.com/800x600?text=No+Photo"],nt=lt=>({Wifi:"wifi",Heating:"wb_sunny",Bins:"delete_outline",Parking:"local_parking",Ensuite:"bathtub",Kitchen:"restaurant",Laundry:"local_laundry_service",Gym:"fitness_center","Desk Space":"desktop_mac",Elevator:"elevator",Security:"security",Fridge:"kitchen",Microwave:"microwave",TV:"tv",Diswasher:"flatware"})[lt]||"check_circle_outline";return _.jsxs("div",{style:{paddingBottom:"120px",background:"white",minHeight:"100vh",position:"relative"},children:[_.jsxs("div",{style:{position:"absolute",top:"16px",left:"16px",right:"16px",zIndex:100,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsx("button",{onClick:()=>t(-1),className:"heart-button",style:{background:"white"},children:_.jsx("span",{className:"material-icons-round",children:"arrow_back"})}),_.jsxs("div",{style:{display:"flex",gap:"10px"},children:[_.jsx("button",{onClick:V,className:"heart-button",style:{background:"white"},children:_.jsx("span",{className:"material-icons-round",children:"share"})}),_.jsx("button",{onClick:G,className:`heart-button ${I?"active":""}`,style:{background:"white"},children:_.jsx("span",{className:"material-icons-round",children:I?"favorite":"favorite_border"})})]})]}),_.jsxs("div",{style:{position:"relative",height:"400px",background:"#f5f5f5",overflow:"hidden"},children:[_.jsx("img",{src:q[v],alt:l.title,className:"animate-fade",style:{width:"100%",height:"100%",objectFit:"cover"}}),_.jsx("div",{style:{position:"absolute",bottom:"24px",right:"24px",display:"flex",gap:"8px"},children:_.jsxs("div",{className:"glass-panel",style:{color:"white",padding:"8px 16px",borderRadius:"30px",fontSize:"13px",fontWeight:"700",background:"rgba(0,0,0,0.5)",border:"none"},children:[v+1," / ",q.length]})}),q.length>1&&_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>b(lt=>lt>0?lt-1:q.length-1),style:{...bb,left:"24px",width:"40px",height:"40px",background:"rgba(255,255,255,0.9)"},children:_.jsx("span",{className:"material-icons-round",children:"chevron_left"})}),_.jsx("button",{onClick:()=>b(lt=>lt<q.length-1?lt+1:0),style:{...bb,right:"24px",width:"40px",height:"40px",background:"rgba(255,255,255,0.9)"},children:_.jsx("span",{className:"material-icons-round",children:"chevron_right"})})]})]}),_.jsxs("div",{style:{padding:"32px 24px",maxWidth:"800px",margin:"0 auto"},children:[_.jsx("div",{style:{color:"var(--color-brand)",fontWeight:"800",fontSize:"12px",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Verified Premium Property"}),_.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"16px"},children:_.jsx("h1",{style:{fontSize:"32px",margin:0,fontWeight:"800",color:"var(--color-text-pri)",letterSpacing:"-0.5px"},children:l.title})}),_.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginBottom:"32px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px",color:"#F59E0B"},children:"star"}),_.jsx("span",{style:{fontWeight:"800",fontSize:"15px"},children:l.rating||"New"}),_.jsxs("span",{style:{color:"var(--color-text-sec)",fontSize:"14px",textDecoration:"underline"},children:["(",l.reviewCount||0," reviews)"]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--color-text-sec)",fontSize:"15px",fontWeight:"500"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px"},children:"location_on"}),l.location]})]}),_.jsxs("div",{style:{borderTop:"1px solid #F1F5F9",borderBottom:"1px solid #F1F5F9",padding:"24px 0",marginBottom:"32px",display:"flex",justifyContent:"space-around"},children:[_.jsxs("div",{style:{textAlign:"center"},children:[_.jsx("span",{className:"material-icons-round",style:{color:"var(--color-text-hint)",display:"block",marginBottom:"6px"},children:"home"}),_.jsx("span",{style:{fontSize:"13px",fontWeight:"700"},children:l.subType||l.type||"Entire Flat"})]}),_.jsxs("div",{style:{textAlign:"center"},children:[_.jsx("span",{className:"material-icons-round",style:{color:"var(--color-text-hint)",display:"block",marginBottom:"6px"},children:"bed"}),_.jsxs("span",{style:{fontSize:"13px",fontWeight:"700"},children:[l.bedrooms||0," ",l.bedrooms==="1"||l.bedrooms===1?"Bedroom":"Bedrooms"]})]}),_.jsxs("div",{style:{textAlign:"center"},children:[_.jsx("span",{className:"material-icons-round",style:{color:"var(--color-text-hint)",display:"block",marginBottom:"6px"},children:"groups"}),_.jsxs("span",{style:{fontSize:"13px",fontWeight:"700"},children:["Up to ",l.guests||1," ",l.guests==="1"||l.guests===1?"GUEST":"GUESTS"]})]})]}),_.jsx("h3",{style:{fontSize:"22px",fontWeight:"800",marginBottom:"16px"},children:"Description"}),_.jsx("p",{style:{color:"var(--color-text-sec)",lineHeight:"1.8",fontSize:"16px",marginBottom:"40px",fontWeight:"400"},children:l.description}),_.jsx("h3",{style:{fontSize:"22px",fontWeight:"800",marginBottom:"20px"},children:"What this place offers"}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"16px",marginBottom:"48px"},children:l.amenities&&l.amenities.map(lt=>_.jsxs("div",{style:{padding:"16px",border:"1px solid #F1F5F9",borderRadius:"16px",display:"flex",alignItems:"center",gap:"12px",background:"white"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"20px",color:"var(--color-brand)"},children:nt(lt)}),_.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--color-text-pri)"},children:lt})]},lt))}),_.jsxs("div",{className:"premium-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px",marginBottom:"48px",background:"#F8FAFC",border:"none"},children:[_.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"32px",color:"var(--color-brand)"},children:"verified_user"})}),_.jsxs("div",{style:{flex:1},children:[_.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"18px",fontWeight:"800"},children:"Verified Host"}),_.jsx("p",{style:{margin:0,color:"var(--color-text-sec)",fontSize:"14px"},children:"Typically responds within an hour"})]}),_.jsx("button",{onClick:()=>t(`/messages/${l.ownerUid||"admin"}`),style:{background:"white",border:"1px solid #E2E8F0",padding:"10px 18px",borderRadius:"12px",fontWeight:"700",fontSize:"14px",cursor:"pointer"},children:"Contact"})]}),_.jsx(IL,{propertyId:r,canWrite:w})]}),_.jsxs("div",{className:"glass-panel",style:{position:"fixed",bottom:"24px",left:"24px",right:"24px",padding:"16px 24px",borderRadius:"24px",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:1e3,animation:"slideInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1)"},children:[_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"4px"},children:[_.jsxs("span",{style:{fontSize:"24px",fontWeight:"900",color:"var(--color-brand)"},children:["",l.price]}),_.jsx("span",{style:{fontSize:"14px",color:"var(--color-text-sec)",fontWeight:"600"},children:"/ month"})]}),_.jsx("div",{style:{fontSize:"11px",fontWeight:"800",color:l.billsIncluded?"var(--color-success)":"var(--color-text-hint)",textTransform:"uppercase",marginTop:"2px"},children:l.billsIncluded?"All bills included":"Utilities not included"})]}),_.jsx("button",{className:"btn-primary",style:{padding:"14px 32px",borderRadius:"16px",width:"auto"},onClick:()=>t(`/messages/${l.ownerUid||"admin"}`,{state:{propertyId:r,propertyTitle:l.title}}),children:"Message Broker"})]})]})},bb={position:"absolute",top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.8)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},NL=()=>{const[r,t]=M.useState([]),[n,s]=M.useState(!0),l=an(),h=Ae.currentUser;return M.useEffect(()=>{if(!h){s(!1);return}const d=ps(Mn(ze,"users",h.uid),async y=>{if(y.exists()){const v=y.data().favorites||[];if(v.length===0){t([]),s(!1);return}try{const b=await fetch("http://localhost:5000/api/listings");if(b.ok){const C=(await b.json()).filter(I=>v.includes(I.id));t(C)}}catch(b){console.error("Error fetching favorited listings:",b)}finally{s(!1)}}else s(!1)});return()=>d()},[h]),h?n?_.jsxs("div",{style:{padding:"100px 24px",textAlign:"center"},children:[_.jsx("div",{className:"spinner-small",style:{margin:"0 auto"}}),_.jsx("p",{style:{marginTop:"16px",color:"var(--color-text-sec)"},children:"Finding your saved homes..."})]}):_.jsxs("div",{style:{padding:"24px",paddingBottom:"100px",minHeight:"100vh",background:"var(--color-bg)"},children:[_.jsxs("div",{style:{marginBottom:"32px"},children:[_.jsx("h1",{style:{fontSize:"32px",fontWeight:"800",margin:"0 0 8px 0",letterSpacing:"-0.5px"},children:"Wishlist"}),_.jsxs("p",{style:{margin:0,color:"var(--color-text-sec)",fontSize:"15px",fontWeight:"500"},children:[r.length," ",r.length===1?"home":"homes"," saved"]})]}),r.length===0?_.jsxs("div",{style:{padding:"80px 24px",textAlign:"center",background:"white",borderRadius:"24px",boxShadow:"var(--shadow-premium)"},children:[_.jsx("div",{style:{marginBottom:"20px"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"64px",color:"#CBD5E1"},children:"explore"})}),_.jsx("h2",{style:{fontSize:"20px",fontWeight:"800",marginBottom:"8px"},children:"No saved homes yet"}),_.jsx("p",{style:{color:"var(--color-text-sec)",marginBottom:"32px",fontSize:"14px"},children:"When you see a place you like, tap the heart icon to save it here."}),_.jsx("button",{className:"btn-primary",onClick:()=>l("/tenant/dashboard"),style:{width:"auto",padding:"12px 24px"},children:"Start Searching"})]}):_.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"24px"},children:r.map(d=>_.jsx(C_,{listing:d},d.id))}),_.jsx(kf,{})]}):_.jsxs("div",{style:{padding:"60px 24px",textAlign:"center"},children:[_.jsx("div",{style:{marginBottom:"24px"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"80px",color:"#E2E8F0"},children:"favorite_border"})}),_.jsx("h2",{style:{fontSize:"24px",fontWeight:"800",marginBottom:"12px"},children:"Save your favorites"}),_.jsx("p",{style:{color:"var(--color-text-sec)",marginBottom:"32px"},children:"Log in to see your saved homes and sync them across devices."}),_.jsx("button",{className:"btn-primary",onClick:()=>l("/login"),style:{width:"100%",maxWidth:"200px",margin:"0 auto"},children:"Log In"})]})},DL=()=>{const r=an(),[t,n]=M.useState([]),[s,l]=M.useState(!0);return M.useEffect(()=>{(async()=>{try{const d=Ae.currentUser;if(!d)return;const y=await d.getIdToken(),b=await(await fetch("http://localhost:5000/api/listings/broker",{headers:{Authorization:`Bearer ${y}`}})).json();n(b)}catch(d){console.error(d)}finally{l(!1)}})()},[]),_.jsxs(_.Fragment,{children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[_.jsxs("div",{children:[_.jsx("h1",{style:{margin:0,fontSize:"28px",color:"var(--color-brand)",fontWeight:"800",letterSpacing:"-0.5px"},children:"My Listings"}),_.jsxs("p",{style:{margin:"4px 0 0",color:"#64748B",fontSize:"15px"},children:["You have ",t.length," properties listed"]})]}),_.jsxs("button",{className:"btn-primary",style:{width:"auto",padding:"12px 24px",borderRadius:"14px",fontSize:"15px",display:"flex",alignItems:"center",gap:"8px"},onClick:()=>r("/broker/new-listing"),children:[_.jsx("span",{className:"material-icons-round",children:"add"}),"Create New"]})]}),s?_.jsx("div",{style:{textAlign:"center",padding:"100px"},children:_.jsx("div",{className:"spinner-small",style:{margin:"0 auto"}})}):t.length===0?_.jsxs("div",{style:{textAlign:"center",padding:"80px 40px",background:"white",borderRadius:"24px",border:"1px dashed #CBD5E1"},children:[_.jsx("div",{style:{width:"80px",height:"80px",background:"var(--color-brand-light)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",color:"var(--color-brand)"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"40px"},children:"holiday_village"})}),_.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"20px",color:"#1E293B",fontWeight:"800"},children:"No listings yet"}),_.jsx("p",{style:{color:"#64748B",fontSize:"15px",marginBottom:"32px",maxWidth:"300px",margin:"0 auto 32px"},children:"Start earning by listing your first property on StayNest today."}),_.jsx("button",{className:"btn-primary",style:{width:"auto",padding:"14px 32px",borderRadius:"16px"},onClick:()=>r("/broker/new-listing"),children:"List your property"})]}):_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"24px"},children:t.map(h=>_.jsx(C_,{listing:h,isBrokerView:!0},h.id))})]})},LL=()=>{const r=an(),[t,n]=M.useState(!1),[s,l]=M.useState([]),[h,d]=M.useState({title:"",price:"",location:"",description:"",amenities:[],type:"Entire Home",subType:"Apartment",bedrooms:"1",guests:"1",billsIncluded:!0,eircode:""}),y=I=>{if(I.target.files){const O=Array.from(I.target.files);l(Z=>[...Z,...O])}},v=I=>{l(s.filter((O,Z)=>Z!==I))},b=async()=>{const I="daszhocrj",O="staynest_preset",Z=s.map(async G=>{const V=new FormData;V.append("file",G),V.append("upload_preset",O);const $=await fetch(`https://api.cloudinary.com/v1_1/${I}/image/upload`,{method:"POST",body:V});if(!$.ok)throw new Error("Cloudinary upload failed");return(await $.json()).secure_url});return Promise.all(Z)},w=async I=>{if(I.preventDefault(),s.length===0)return alert("Please upload at least one photo");n(!0);try{const O=Ae.currentUser;if(!O){alert("You must be logged in to publish."),n(!1);return}const Z=await O.getIdToken(),G=await b();let V=53.3498,$=-6.2603;try{let nt=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h.eircode+", Ireland")}`,{headers:{"User-Agent":"StayNest-App"}}),lt=await nt.json();(!lt||lt.length===0)&&(nt=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h.eircode+", "+h.location+", Ireland")}`,{headers:{"User-Agent":"StayNest-App"}}),lt=await nt.json()),(!lt||lt.length===0)&&(nt=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h.location+", Ireland")}`,{headers:{"User-Agent":"StayNest-App"}}),lt=await nt.json()),lt&&lt.length>0&&(V=parseFloat(lt[0].lat),$=parseFloat(lt[0].lon))}catch(nt){console.error("Geocoding failed:",nt)}const q=await fetch("http://localhost:5000/api/listings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z}`},body:JSON.stringify({...h,images:G,ownerUid:O.uid,lat:V,lng:$})});if(q.ok)alert("Listing submitted! It will be live once an administrator approves it."),r("/broker/dashboard");else{const nt=await q.json();alert(`Failed to publish: ${nt.message||"Unknown error"}`)}}catch(O){console.error("Upload Error:",O),alert("Error during upload. Please check your internet connection.")}finally{n(!1)}},C=I=>{d(O=>({...O,amenities:O.amenities.includes(I)?O.amenities.filter(Z=>Z!==I):[...O.amenities,I]}))};return _.jsxs(_.Fragment,{children:[_.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"32px"},children:_.jsxs("div",{children:[_.jsx("h1",{style:{margin:0,fontSize:"28px",fontWeight:"800",color:"var(--color-brand)",letterSpacing:"-0.5px"},children:"Post New Listing"}),_.jsx("p",{style:{margin:"4px 0 0",color:"#64748B",fontSize:"15px"},children:"Fill in the details to reach potential tenants"})]})}),_.jsxs("form",{onSubmit:w,style:{background:"white",padding:"32px",borderRadius:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #E2E8F0"},children:[_.jsx("h3",{style:{marginBottom:"12px",fontSize:"18px",fontWeight:"700"},children:"Add Photos"}),_.jsxs("div",{style:{border:"1.5px dashed var(--color-brand)",padding:"24px",borderRadius:"20px",textAlign:"center",marginBottom:"16px",background:"var(--color-brand-light)"},children:[_.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:y,style:{display:"none"},id:"photo-upload"}),_.jsxs("label",{htmlFor:"photo-upload",style:{cursor:"pointer",color:"var(--color-primary)",fontWeight:"700"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"40px",display:"block",marginBottom:"4px"},children:"add_a_photo"}),"Select photos"]})]}),s.length>0&&_.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"12px",marginBottom:"24px"},children:s.map((I,O)=>_.jsxs("div",{style:{position:"relative",minWidth:"80px",height:"80px",borderRadius:"12px",overflow:"hidden",border:"1px solid #f0f0f0"},children:[_.jsx("img",{src:URL.createObjectURL(I),alt:"preview",style:{width:"100%",height:"100%",objectFit:"cover"}}),_.jsx("button",{type:"button",onClick:()=>v(O),style:{position:"absolute",top:4,right:4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"12px"},children:"close"})})]},O))}),_.jsx("h3",{style:{marginBottom:"12px",fontSize:"18px",fontWeight:"700"},children:"Property Information"}),_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsx("label",{style:os,children:"Accommodation Category"}),_.jsx("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:["Sharing","Entire Home"].map(I=>_.jsxs("div",{onClick:()=>d({...h,type:I}),style:{flex:1,padding:"14px",textAlign:"center",borderRadius:"16px",border:`2.5px solid ${h.type===I?"var(--color-brand)":"#F1F5F9"}`,background:h.type===I?"var(--color-brand-light)":"white",color:h.type===I?"var(--color-brand)":"#64748B",cursor:"pointer",fontWeight:"800",fontSize:"14px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",boxShadow:h.type===I?"0 8px 20px rgba(30,58,138,0.1)":"none"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"24px"},children:I==="Sharing"?"groups":"home"}),I]},I))})]}),_.jsx("div",{style:{display:"flex",gap:"16px",marginBottom:"24px"},children:_.jsxs("div",{style:{flex:1},children:[_.jsx("label",{style:os,children:"Sub-type"}),_.jsxs("select",{value:h.subType,onChange:I=>d({...h,subType:I.target.value}),style:Qa,children:[_.jsx("option",{value:"Apartment",children:"Apartment"}),_.jsx("option",{value:"Flat",children:"Flat"}),_.jsx("option",{value:"Studio",children:"Studio"}),_.jsx("option",{value:"House",children:"House"}),_.jsx("option",{value:"Room",children:"Single Room"}),_.jsx("option",{value:"Shared Room",children:"Shared Room"})]})]})}),_.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"24px"},children:[_.jsxs("div",{style:{flex:1},children:[_.jsx("label",{style:os,children:"Bedrooms"}),_.jsx("input",{type:"number",min:"0",style:Qa,value:h.bedrooms,onChange:I=>d({...h,bedrooms:I.target.value})})]}),_.jsxs("div",{style:{flex:1},children:[_.jsx("label",{style:os,children:"Max Guests"}),_.jsx("input",{type:"number",min:"1",style:Qa,value:h.guests,onChange:I=>d({...h,guests:I.target.value})})]})]}),_.jsx("h3",{style:{marginBottom:"12px",fontSize:"18px",fontWeight:"700"},children:"Details"}),_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:os,children:"Headline"}),_.jsx("input",{type:"text",placeholder:"e.g. Sunny Studio in D1",className:"input-field",style:Qa,required:!0,value:h.title,onChange:I=>d({...h,title:I.target.value})})]}),_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:os,children:"Monthly Rent ()"}),_.jsx("input",{type:"text",inputMode:"numeric",placeholder:"1800",className:"input-field",style:Qa,required:!0,value:h.price,onChange:I=>d({...h,price:I.target.value.replace(/[^0-9]/g,"")})})]}),_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:os,children:"Location ()"}),_.jsx("input",{type:"text",placeholder:"Dublin 1",className:"input-field",style:Qa,required:!0,value:h.location,onChange:I=>d({...h,location:I.target.value})})]}),_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:os,children:"Eircode (Postcode) - *Mandatory for Map Accuracy"}),_.jsx("input",{type:"text",placeholder:"D01 FE34",className:"input-field",style:Qa,required:!0,value:h.eircode,onChange:I=>d({...h,eircode:I.target.value.toUpperCase()})})]}),_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:os,children:"Description"}),_.jsx("textarea",{className:"input-field",style:{...Qa,minHeight:"100px",resize:"none"},rows:"4",placeholder:"Tell students what makes your home special...",value:h.description,onChange:I=>d({...h,description:I.target.value})})]}),_.jsx("h3",{style:{marginBottom:"16px",marginTop:"32px",fontSize:"18px",fontWeight:"700"},children:"What this place offers"}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"12px",marginBottom:"24px"},children:[{name:"Wifi",icon:"wifi"},{name:"Heating",icon:"wb_sunny"},{name:"Bins",icon:"delete_outline"},{name:"Parking",icon:"local_parking"},{name:"Ensuite",icon:"bathtub"},{name:"Kitchen",icon:"restaurant"},{name:"Laundry",icon:"local_laundry_service"},{name:"Gym",icon:"fitness_center"},{name:"Desk Space",icon:"desktop_mac"},{name:"Elevator",icon:"elevator"},{name:"Security",icon:"security"},{name:"Fridge",icon:"kitchen"},{name:"Microwave",icon:"microwave"},{name:"TV",icon:"tv"},{name:"Diswasher",icon:"flatware"}].map(I=>{const O=h.amenities.includes(I.name);return _.jsxs("div",{onClick:()=>C(I.name),style:{padding:"16px",borderRadius:"16px",border:`2px solid ${O?"var(--color-success)":"#F1F5F9"}`,background:O?"#F0FDF4":"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:O?"0 4px 12px rgba(34,197,94,0.1)":"none"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"24px",color:O?"var(--color-success)":"#64748B"},children:I.icon}),_.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:O?"#166534":"#64748B"},children:I.name})]},I.name)})}),_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsx("label",{style:os,children:"Rent Specifics"}),_.jsxs("div",{onClick:()=>d({...h,billsIncluded:!h.billsIncluded}),style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:h.billsIncluded?"#EFFDF4":"white",border:`2px solid ${h.billsIncluded?"#22C55E":"#F1F5F9"}`,borderRadius:"16px",cursor:"pointer",transition:"all 0.3s ease"},children:[_.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",border:`2px solid ${h.billsIncluded?"#22C55E":"#CBD5E1"}`,background:h.billsIncluded?"#22C55E":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:h.billsIncluded&&_.jsx("span",{className:"material-icons-round",style:{color:"white",fontSize:"18px"},children:"check"})}),_.jsxs("div",{children:[_.jsx("span",{style:{display:"block",fontSize:"15px",fontWeight:"700",color:h.billsIncluded?"#166534":"#64748B"},children:"All Bills Included"}),_.jsx("span",{style:{fontSize:"12px",color:"#64748B"},children:"Electricity, Wifi, Water, and Bins"})]})]})]}),_.jsx("div",{style:{marginTop:"32px"},children:_.jsxs("button",{className:"btn-primary",type:"submit",disabled:t,style:{padding:"16px",fontSize:"16px",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",background:t?"#86EFAC":"var(--color-success)",borderRadius:"16px",boxShadow:"0 4px 12px rgba(34,197,94,0.2)"},children:[t&&_.jsx("div",{className:"spinner-small",style:{borderTopColor:"white"}}),t?"Publishing...":"Publish Listing"]})})]})]})},os={display:"block",fontSize:"13px",color:"#717171",fontWeight:"600",marginBottom:"6px"},Qa={borderRadius:"16px",border:"1px solid #eee",padding:"14px 16px",fontSize:"15px",outline:"none",width:"100%",boxSizing:"border-box"},OL=()=>{const{id:r}=Sg(),t=an(),[n,s]=M.useState(!0),[l,h]=M.useState(!1),[d,y]=M.useState([]),[v,b]=M.useState([]),[w,C]=M.useState({title:"",price:"",location:"",description:"",amenities:[],type:"Entire Home",subType:"Apartment",bedrooms:"1",guests:"1",billsIncluded:!0,eircode:""});M.useEffect(()=>{(async()=>{const lt=(await Dw()).find(bt=>bt.id===r);lt&&(C({title:lt.title||"",price:lt.price||"",location:lt.location||"",description:lt.description||"",amenities:lt.amenities||[],type:lt.type||"Entire Home",subType:lt.subType||"Apartment",bedrooms:lt.bedrooms||"1",guests:lt.guests||"1",billsIncluded:lt.billsIncluded??!0,eircode:lt.eircode||""}),b(lt.images||[])),s(!1)})()},[r]);const I=q=>{if(q.target.files){const nt=Array.from(q.target.files);y(lt=>[...lt,...nt])}},O=q=>{y(d.filter((nt,lt)=>lt!==q))},Z=q=>{b(v.filter((nt,lt)=>lt!==q))},G=async()=>{if(d.length===0)return[];const q="daszhocrj",nt="staynest_preset",lt=d.map(async bt=>{const Tt=new FormData;Tt.append("file",bt),Tt.append("upload_preset",nt);const k=await fetch(`https://api.cloudinary.com/v1_1/${q}/image/upload`,{method:"POST",body:Tt});if(!k.ok)throw new Error("Cloudinary upload failed");return(await k.json()).secure_url});return Promise.all(lt)},V=async q=>{if(q.preventDefault(),[...v].length===0&&d.length===0)return alert("Please have at least one photo");h(!0);try{const lt=Ae.currentUser;if(!lt){alert("You must be logged in."),h(!1);return}const bt=await lt.getIdToken(),Tt=await G(),k=[...v,...Tt];let D=w.lat||53.3498,j=w.lng||-6.2603;try{let F=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(w.eircode+", Ireland")}`,{headers:{"User-Agent":"StayNest-App"}}),Y=await F.json();(!Y||Y.length===0)&&(F=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(w.eircode+", "+w.location+", Ireland")}`,{headers:{"User-Agent":"StayNest-App"}}),Y=await F.json()),(!Y||Y.length===0)&&(F=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(w.location+", Ireland")}`,{headers:{"User-Agent":"StayNest-App"}}),Y=await F.json()),Y&&Y.length>0&&(D=parseFloat(Y[0].lat),j=parseFloat(Y[0].lon))}catch(F){console.error("Geocoding failed:",F)}const K=await fetch(`http://localhost:5000/api/listings/${r}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${bt}`},body:JSON.stringify({...w,images:k,lat:D,lng:j})});if(K.ok)alert("Listing Updated Successfully!"),t("/broker/dashboard");else{const F=await K.json();alert(`Failed to update: ${F.message||"Unknown error"}`)}}catch(lt){console.error("Update Error:",lt),alert("Error during update.")}finally{h(!1)}},$=q=>{C(nt=>({...nt,amenities:nt.amenities.includes(q)?nt.amenities.filter(lt=>lt!==q):[...nt.amenities,q]}))};return n?_.jsx(_.Fragment,{children:_.jsx("div",{style:{textAlign:"center",padding:"100px"},children:_.jsx("div",{className:"spinner-small",style:{margin:"0 auto"}})})}):_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"32px"},children:_.jsxs("div",{children:[_.jsx("h1",{style:{margin:0,fontSize:"28px",fontWeight:"800",color:"var(--color-brand)",letterSpacing:"-0.5px"},children:"Edit Listing"}),_.jsx("p",{style:{margin:"4px 0 0",color:"#64748B",fontSize:"15px"},children:"Modify your property details"})]})}),_.jsxs("form",{onSubmit:V,style:{background:"white",padding:"32px",borderRadius:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #E2E8F0"},children:[_.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px",fontWeight:"700"},children:"Manage Photos"}),v.length>0&&_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("p",{style:{fontSize:"13px",fontWeight:"600",color:"#64748B",marginBottom:"8px"},children:"Current Photos"}),_.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",paddingBottom:"12px"},children:v.map((q,nt)=>_.jsxs("div",{style:{position:"relative",minWidth:"100px",height:"100px",borderRadius:"16px",overflow:"hidden",border:"1px solid #F1F5F9"},children:[_.jsx("img",{src:q,alt:"existing",style:{width:"100%",height:"100%",objectFit:"cover"}}),_.jsx("button",{type:"button",onClick:()=>Z(nt),style:{position:"absolute",top:6,right:6,background:"rgba(239, 68, 68, 0.9)",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"14px"},children:"delete"})})]},nt))})]}),_.jsxs("div",{style:{border:"1.5px dashed var(--color-brand)",padding:"32px",borderRadius:"20px",textAlign:"center",marginBottom:"24px",background:"var(--color-brand-light)"},children:[_.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:I,style:{display:"none"},id:"photo-upload"}),_.jsxs("label",{htmlFor:"photo-upload",style:{cursor:"pointer",color:"var(--color-brand)",fontWeight:"700"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"40px",display:"block",marginBottom:"8px"},children:"add_photo_alternate"}),"Add more photos"]})]}),d.length>0&&_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsx("p",{style:{fontSize:"13px",fontWeight:"600",color:"#64748B",marginBottom:"8px"},children:"New Photos to Upload"}),_.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",paddingBottom:"12px"},children:d.map((q,nt)=>_.jsxs("div",{style:{position:"relative",minWidth:"100px",height:"100px",borderRadius:"16px",overflow:"hidden",border:"1px solid #F1F5F9"},children:[_.jsx("img",{src:URL.createObjectURL(q),alt:"preview",style:{width:"100%",height:"100%",objectFit:"cover"}}),_.jsx("button",{type:"button",onClick:()=>O(nt),style:{position:"absolute",top:6,right:6,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"14px"},children:"close"})})]},nt))})]}),_.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px",fontWeight:"700",marginTop:"32px"},children:"Property Details"}),_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsx("label",{style:Fs,children:"Accommodation Category"}),_.jsx("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:["Sharing","Entire Home"].map(q=>_.jsxs("div",{onClick:()=>C({...w,type:q}),style:{flex:1,padding:"14px",textAlign:"center",borderRadius:"16px",border:`2.5px solid ${w.type===q?"var(--color-brand)":"#F1F5F9"}`,background:w.type===q?"var(--color-brand-light)":"white",color:w.type===q?"var(--color-brand)":"#64748B",cursor:"pointer",fontWeight:"800",fontSize:"14px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",boxShadow:w.type===q?"0 8px 20px rgba(30,58,138,0.1)":"none"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"24px"},children:q==="Sharing"?"groups":"home"}),q]},q))})]}),_.jsx("div",{style:{display:"flex",gap:"20px",marginBottom:"24px"},children:_.jsxs("div",{style:{flex:1},children:[_.jsx("label",{style:Fs,children:"Sub-type"}),_.jsxs("select",{value:w.subType,onChange:q=>C({...w,subType:q.target.value}),style:il,children:[_.jsx("option",{value:"Apartment",children:"Apartment"}),_.jsx("option",{value:"Flat",children:"Flat"}),_.jsx("option",{value:"Studio",children:"Studio"}),_.jsx("option",{value:"House",children:"House"}),_.jsx("option",{value:"Room",children:"Single Room"}),_.jsx("option",{value:"Shared Room",children:"Shared Room"})]})]})}),_.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"24px"},children:[_.jsxs("div",{style:{flex:1},children:[_.jsx("label",{style:Fs,children:"Bedrooms"}),_.jsx("input",{type:"number",min:"0",style:il,value:w.bedrooms,onChange:q=>C({...w,bedrooms:q.target.value})})]}),_.jsxs("div",{style:{flex:1},children:[_.jsx("label",{style:Fs,children:"Max Guests"}),_.jsx("input",{type:"number",min:"1",style:il,value:w.guests,onChange:q=>C({...w,guests:q.target.value})})]})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:Fs,children:"Headline"}),_.jsx("input",{type:"text",style:il,required:!0,value:w.title,onChange:q=>C({...w,title:q.target.value})})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:Fs,children:"Monthly Rent ()"}),_.jsx("input",{type:"text",inputMode:"numeric",style:il,required:!0,value:w.price,onChange:q=>C({...w,price:q.target.value.replace(/[^0-9]/g,"")})})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:Fs,children:"Location"}),_.jsx("input",{type:"text",style:il,required:!0,value:w.location,onChange:q=>C({...w,location:q.target.value})})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:Fs,children:"Description"}),_.jsx("textarea",{style:{...il,minHeight:"120px",resize:"none"},rows:"4",value:w.description,onChange:q=>C({...w,description:q.target.value})})]}),_.jsx("h3",{style:{marginBottom:"16px",marginTop:"32px",fontSize:"18px",fontWeight:"700"},children:"What this place offers"}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"12px",marginBottom:"24px"},children:[{name:"Wifi",icon:"wifi"},{name:"Heating",icon:"wb_sunny"},{name:"Bins",icon:"delete_outline"},{name:"Parking",icon:"local_parking"},{name:"Ensuite",icon:"bathtub"},{name:"Kitchen",icon:"restaurant"},{name:"Laundry",icon:"local_laundry_service"},{name:"Gym",icon:"fitness_center"},{name:"Desk Space",icon:"desktop_mac"},{name:"Elevator",icon:"elevator"},{name:"Security",icon:"security"},{name:"Fridge",icon:"kitchen"},{name:"Microwave",icon:"microwave"},{name:"TV",icon:"tv"},{name:"Diswasher",icon:"flatware"}].map(q=>{const nt=w.amenities.includes(q.name);return _.jsxs("div",{onClick:()=>$(q.name),style:{padding:"16px",borderRadius:"16px",border:`2px solid ${nt?"var(--color-success)":"#F1F5F9"}`,background:nt?"#F0FDF4":"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:nt?"0 4px 12px rgba(34,197,94,0.1)":"none"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"24px",color:nt?"var(--color-success)":"#64748B"},children:q.icon}),_.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:nt?"#166534":"#64748B"},children:q.name})]},q.name)})}),_.jsxs("div",{style:{marginTop:"32px",marginBottom:"40px"},children:[_.jsx("label",{style:Fs,children:"Rent Specifics"}),_.jsxs("div",{onClick:()=>C({...w,billsIncluded:!w.billsIncluded}),style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px",background:w.billsIncluded?"#F0FDF4":"#F8FAFC",border:`2px solid ${w.billsIncluded?"#22C55E":"#F1F5F9"}`,borderRadius:"20px",cursor:"pointer"},children:[_.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"8px",border:`2px solid ${w.billsIncluded?"#22C55E":"#CBD5E1"}`,background:w.billsIncluded?"#22C55E":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:w.billsIncluded&&_.jsx("span",{className:"material-icons-round",style:{color:"white",fontSize:"18px"},children:"check"})}),_.jsxs("div",{children:[_.jsx("span",{style:{display:"block",fontSize:"16px",fontWeight:"700",color:w.billsIncluded?"#166534":"#64748B"},children:"All Bills Included"}),_.jsx("span",{style:{fontSize:"13px",color:"#64748B"},children:"Electricity, Wifi, Water, and Bins"})]})]})]}),_.jsxs("div",{style:{display:"flex",gap:"16px"},children:[_.jsxs("button",{className:"btn-primary",type:"submit",disabled:l,style:{flex:1,padding:"18px",fontSize:"16px",fontWeight:"800",gap:"12px",background:l?"#86EFAC":"var(--color-brand)",borderRadius:"18px"},children:[l&&_.jsx("div",{className:"spinner-small",style:{borderTopColor:"white"}}),l?"Saving Changes...":"Update Listing"]}),_.jsx("button",{type:"button",onClick:()=>t("/broker/dashboard"),style:{padding:"18px 32px",fontSize:"16px",fontWeight:"700",background:"#F1F5F9",color:"#64748B",border:"none",borderRadius:"18px",cursor:"pointer"},children:"Cancel"})]})]})]})},Fs={display:"block",fontSize:"14px",color:"#64748B",fontWeight:"700",marginBottom:"8px"},il={borderRadius:"16px",border:"1px solid #E2E8F0",padding:"16px 20px",fontSize:"15px",outline:"none",width:"100%",boxSizing:"border-box",background:"#F8FAFC",transition:"border-color 0.2s ease",":focus":{borderColor:"var(--color-brand)"}},kL=()=>{const r=an(),[t,n]=M.useState(!1),[s,l]=M.useState({front:null,back:null,address:null}),h=(b,w)=>{b.target.files&&b.target.files[0]&&l(C=>({...C,[w]:b.target.files[0]}))},d=async b=>{const w="daszhocrj",C="staynest_preset",I=new FormData;I.append("file",b),I.append("upload_preset",C);const O=await fetch(`https://api.cloudinary.com/v1_1/${w}/image/upload`,{method:"POST",body:I});if(!O.ok)throw new Error("Upload failed");return(await O.json()).secure_url},y=async()=>{if(!s.front||!s.back||!s.address)return alert("Please upload all required documents (Front ID, Back ID, and Proof of Address)");n(!0);try{const b=Ae.currentUser;if(!b)return alert("User not found");const[w,C,I]=await Promise.all([d(s.front),d(s.back),d(s.address)]),O=Mn(ze,"users",b.uid);await mo(O,{verificationStatus:"pending",idDocuments:{front:w,back:C},addressDocument:I,verificationSubmittedAt:new Date}),alert("Documents uploaded successfully! Admin will review your profile shortly."),r("/broker/dashboard")}catch(b){console.error("Verification error:",b),alert("Failed to upload documents. Please try again.")}finally{n(!1)}},v=b=>({border:`2.5px dashed ${b?"var(--color-success)":"#E2E8F0"}`,borderRadius:"20px",padding:"32px",textAlign:"center",color:b?"var(--color-success)":"#94A3B8",marginBottom:"20px",cursor:"pointer",background:b?"#F0FDF4":"#F8FAFC",transition:"all 0.2s ease",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"});return _.jsxs(_.Fragment,{children:[_.jsxs("div",{style:{marginBottom:"32px"},children:[_.jsx("h1",{style:{margin:0,fontSize:"28px",color:"var(--color-brand)",fontWeight:"800",letterSpacing:"-0.5px"},children:"Broker Verification"}),_.jsx("p",{style:{margin:"4px 0 0",color:"#64748B",fontSize:"15px"},children:"Upload your documents to get verified and start listing properties."})]}),_.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"24px",boxShadow:"0 8px 30px rgba(0,0,0,0.04)",border:"1px solid #E2E8F0",maxWidth:"700px"},children:[_.jsx("h3",{style:{marginTop:0,fontSize:"18px",fontWeight:"800",marginBottom:"20px"},children:"1. Government Issued ID"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"32px"},children:[_.jsxs("div",{children:[_.jsx("label",{style:{fontSize:"13px",fontWeight:"700",color:"#64748B",display:"block",marginBottom:"8px"},children:"Front of ID"}),_.jsxs("div",{style:v(!!s.front),onClick:()=>document.getElementById("front-id").click(),children:[s.front?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"32px"},children:"check_circle"}),_.jsx("span",{style:{fontSize:"12px",fontWeight:"700"},children:"Ready to Upload"})]}):_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"32px"},children:"add_photo_alternate"}),_.jsx("span",{style:{fontSize:"12px",fontWeight:"700"},children:"Click to Upload"})]}),_.jsx("input",{type:"file",id:"front-id",hidden:!0,onChange:b=>h(b,"front"),accept:"image/*"})]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{fontSize:"13px",fontWeight:"700",color:"#64748B",display:"block",marginBottom:"8px"},children:"Back of ID"}),_.jsxs("div",{style:v(!!s.back),onClick:()=>document.getElementById("back-id").click(),children:[s.back?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"32px"},children:"check_circle"}),_.jsx("span",{style:{fontSize:"12px",fontWeight:"700"},children:"Ready to Upload"})]}):_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"32px"},children:"add_photo_alternate"}),_.jsx("span",{style:{fontSize:"12px",fontWeight:"700"},children:"Click to Upload"})]}),_.jsx("input",{type:"file",id:"back-id",hidden:!0,onChange:b=>h(b,"back"),accept:"image/*"})]})]})]}),_.jsx("h3",{style:{marginTop:0,fontSize:"18px",fontWeight:"800",marginBottom:"20px"},children:"2. Proof of Address"}),_.jsxs("div",{style:v(!!s.address),onClick:()=>document.getElementById("proof-address").click(),children:[s.address?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"32px"},children:"history_edu"}),_.jsx("span",{style:{fontSize:"13px",fontWeight:"700"},children:s.address.name})]}):_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"32px"},children:"file_present"}),_.jsx("span",{style:{fontSize:"13px",fontWeight:"700"},children:"Upload Utility Bill or Bank Statement"})]}),_.jsx("input",{type:"file",id:"proof-address",hidden:!0,onChange:b=>h(b,"address"),accept:"image/*"})]}),_.jsxs("div",{style:{marginTop:"40px"},children:[_.jsx("button",{className:"btn-primary",onClick:y,disabled:t,style:{width:"100%",padding:"18px",borderRadius:"16px",fontSize:"16px",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:t?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"spinner-small",style:{borderTopColor:"white"}}),"Processing..."]}):_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"material-icons-round",children:"verified"}),"Submit Documents for Review"]})}),_.jsxs("p",{style:{textAlign:"center",color:"#94A3B8",fontSize:"12px",marginTop:"16px",fontWeight:"600"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"14px",verticalAlign:"middle",marginRight:"4px"},children:"lock"}),"Your data is encrypted and stored securely"]})]})]})]})},rl=({children:r})=>{const t=an(),n=Ei(),[s,l]=M.useState(0),h=Ae.currentUser;M.useEffect(()=>{if(!h)return;const v=vl(ea(ze,"chats"),ju("participants","array-contains",h.uid)),b=ps(v,w=>{let C=0;w.docs.forEach(I=>{const O=I.data();C+=O[`unreadCount_${h.uid}`]||0}),l(C)});return()=>b()},[h]);const d=[{title:"My Listings",icon:"dashboard",path:"/broker/dashboard"},{title:"Add Listing",icon:"add_business",path:"/broker/new-listing"},{title:"Messages",icon:"forum",path:"/broker/messages",badge:s},{title:"Verification",icon:"verified",path:"/broker/verification"},{title:"Profile",icon:"person",path:"/broker/profile"}],y=()=>{Ae.signOut(),t("/login")};return _.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"#F8FAFC"},children:[_.jsxs("div",{style:{width:"260px",background:"white",borderRight:"1px solid #E2E8F0",display:"flex",flexDirection:"column",position:"fixed",height:"100vh",zIndex:100},children:[_.jsxs("div",{style:{padding:"24px",display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{width:"40px",height:"40px",background:"var(--color-brand)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:_.jsx("span",{className:"material-icons-round",children:"home"})}),_.jsx("span",{style:{fontSize:"20px",fontWeight:"800",color:"var(--color-brand)",letterSpacing:"-0.5px"},children:"StayNest"})]}),_.jsxs("div",{style:{flex:1,padding:"0 16px"},children:[_.jsx("p",{style:{fontSize:"11px",fontWeight:"700",color:"#94A3B8",textTransform:"uppercase",letterSpacing:"1px",padding:"0 12px",marginBottom:"16px"},children:"Broker Panel"}),d.map(v=>{const b=n.pathname===v.path;return _.jsxs("div",{onClick:()=>t(v.path),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",marginBottom:"4px",cursor:"pointer",background:b?"var(--color-brand-light)":"transparent",color:b?"var(--color-brand)":"#64748B",transition:"all 0.2s ease",fontWeight:b?"700":"500"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"20px"},children:v.icon}),_.jsx("span",{style:{fontSize:"15px"},children:v.title}),v.badge>0&&_.jsx("div",{style:{marginLeft:"auto",background:"#EF4444",color:"white",borderRadius:"10px",minWidth:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"800",padding:"0 6px"},children:v.badge})]},v.path)})]}),_.jsx("div",{style:{padding:"16px",borderTop:"1px solid #E2E8F0"},children:_.jsxs("div",{onClick:y,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",cursor:"pointer",color:"#EF4444",fontWeight:"600"},children:[_.jsx("span",{className:"material-icons-round",children:"logout"}),_.jsx("span",{children:"Logout"})]})})]}),_.jsx("div",{style:{flex:1,marginLeft:"260px",padding:"32px"},children:_.jsx("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:r})})]})},ML=()=>{const r=an(),[t,n]=M.useState({pendingListings:0,unverifiedBrokers:0,totalListings:0,totalBrokers:0}),[s,l]=M.useState(!0);return M.useEffect(()=>{(async()=>{try{const y=await Ae.currentUser.getIdToken(),b=await(await fetch("http://localhost:5000/api/admin/listings/pending",{headers:{Authorization:`Bearer ${y}`}})).json(),C=await(await fetch("http://localhost:5000/api/admin/brokers",{headers:{Authorization:`Bearer ${y}`}})).json();n({pendingListings:b.length,unverifiedBrokers:C.filter(I=>!I.verified).length,totalListings:"...",totalBrokers:C.length})}catch(d){console.error("Stats fetch error:",d)}finally{l(!1)}})()},[]),s?_.jsx("div",{className:"spinner-small",style:{margin:"100px auto"}}):_.jsxs("div",{children:[_.jsxs("div",{style:{marginBottom:"40px"},children:[_.jsx("h1",{style:{fontSize:"32px",fontWeight:"900",color:"var(--color-brand)",margin:0},children:"Admin Control Panel"}),_.jsx("p",{style:{color:"#64748B",marginTop:"4px"},children:"Manage listings, brokers, and platform security"})]}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"48px"},children:_.jsx(jL,{title:"Pending Listings",value:t.pendingListings,icon:"pending_actions",color:"#F59E0B",onClick:()=>r("/admin/listings")})}),_.jsxs("div",{style:{background:"white",borderRadius:"24px",padding:"32px",border:"1px solid #E2E8F0",boxShadow:"0 4px 20px rgba(0,0,0,0.02)"},children:[_.jsx("h3",{style:{margin:"0 0 24px",fontSize:"20px",fontWeight:"800"},children:"Property Operations"}),_.jsx("div",{style:{display:"flex",gap:"16px"},children:_.jsx("button",{className:"btn-primary",onClick:()=>r("/admin/listings"),style:{flex:1,padding:"16px",borderRadius:"14px"},children:"Review Pending Listings"})})]})]})},jL=({title:r,value:t,icon:n,color:s,onClick:l})=>_.jsxs("div",{onClick:l,style:{background:"white",padding:"24px",borderRadius:"24px",border:"1px solid #E2E8F0",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"20px",boxShadow:"0 4px 12px rgba(0,0,0,0.02)"},onMouseOver:h=>{h.currentTarget.style.transform="translateY(-5px)",h.currentTarget.style.boxShadow="0 12px 24px rgba(0,0,0,0.06)"},onMouseOut:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.02)"},children:[_.jsx("div",{style:{background:`${s}15`,color:s,padding:"12px",borderRadius:"16px",display:"flex"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"32px"},children:n})}),_.jsxs("div",{children:[_.jsx("span",{style:{display:"block",fontSize:"14px",fontWeight:"700",color:"#64748B"},children:r}),_.jsx("span",{style:{fontSize:"28px",fontWeight:"900",color:"#1E293B"},children:t})]})]}),zL=()=>{const[r,t]=M.useState([]),[n,s]=M.useState(!0),l=async()=>{try{const y=await Ae.currentUser.getIdToken(),b=await(await fetch("http://localhost:5000/api/admin/listings/pending",{headers:{Authorization:`Bearer ${y}`}})).json();t(b)}catch(d){console.error(d)}finally{s(!1)}};M.useEffect(()=>{l()},[]);const h=async(d,y)=>{try{const b=await Ae.currentUser.getIdToken();(await fetch(`http://localhost:5000/api/admin/listings/${d}/${y}`,{method:"PUT",headers:{Authorization:`Bearer ${b}`}})).ok&&(t(r.filter(C=>C.id!==d)),alert(`Listing ${y}ed!`))}catch{alert("Action failed")}};return n?_.jsx("div",{className:"spinner-small",style:{margin:"100px auto"}}):_.jsxs("div",{children:[_.jsx("h1",{style:{fontSize:"28px",fontWeight:"900",marginBottom:"32px"},children:"Review Pending Listings"}),r.length===0?_.jsxs("div",{style:{textAlign:"center",padding:"100px",background:"#F8FAFC",borderRadius:"24px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"48px",color:"#CBD5E1"},children:"done_all"}),_.jsx("p",{style:{color:"#64748B",marginTop:"16px"},children:"All caught up! No pending listings."})]}):_.jsx("div",{style:{display:"grid",gap:"20px"},children:r.map(d=>_.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"24px",border:"1px solid #E2E8F0",display:"flex",gap:"24px",alignItems:"center"},children:[_.jsx("img",{src:d.image||d.images?.[0],style:{width:"120px",height:"120px",borderRadius:"16px",objectFit:"cover"}}),_.jsxs("div",{style:{flex:1},children:[_.jsx("h4",{style:{margin:"0 0 4px",fontSize:"18px",fontWeight:"800"},children:d.title}),_.jsxs("p",{style:{margin:"0 0 8px",color:"#64748B",fontSize:"14px"},children:[d.location," | ",d.price,"/mo"]}),_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("span",{style:Eb,children:d.type}),_.jsx("span",{style:Eb,children:d.subType})]})]}),_.jsxs("div",{style:{display:"flex",gap:"12px"},children:[_.jsx("button",{onClick:()=>h(d.id,"approve"),style:{...Tb,background:"#10B98115",color:"#10B981"},children:"Approve"}),_.jsx("button",{onClick:()=>h(d.id,"reject"),style:{...Tb,background:"#EF444415",color:"#EF4444"},children:"Reject"})]})]},d.id))})]})},Eb={fontSize:"11px",fontWeight:"700",padding:"4px 10px",borderRadius:"20px",background:"#F1F5F9",color:"#64748B"},Tb={padding:"10px 20px",borderRadius:"12px",border:"none",fontWeight:"800",fontSize:"14px",cursor:"pointer",transition:"all 0.2s"},VL=()=>{const[r,t]=M.useState([]),[n,s]=M.useState(!0),l=async()=>{try{const b=await Ae.currentUser.getIdToken(),C=await(await fetch("http://localhost:5000/api/admin/brokers",{headers:{Authorization:`Bearer ${b}`}})).json();t(C)}catch(v){console.error(v)}finally{s(!1)}};M.useEffect(()=>{l()},[]);const h=async(v,b)=>{try{const C=await Ae.currentUser.getIdToken();(await fetch(`http://localhost:5000/api/admin/users/${v}/block`,{method:"PUT",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({block:!b})})).ok&&t(r.map(O=>O.id===v?{...O,isBlocked:!b}:O))}catch{alert("Action failed")}},[d,y]=M.useState(null);return n?_.jsx("div",{className:"spinner-small",style:{margin:"100px auto"}}):_.jsxs("div",{children:[_.jsx("h1",{style:{fontSize:"28px",fontWeight:"900",marginBottom:"32px"},children:"Broker Management"}),d&&_.jsx("div",{style:UL,children:_.jsxs("div",{style:FL,children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[_.jsx("h2",{style:{margin:0},children:"Verification Documents"}),_.jsx("button",{onClick:()=>y(null),className:"material-icons-round",style:{border:"none",background:"none",cursor:"pointer"},children:"close"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[_.jsxs("div",{children:[_.jsx("p",{style:{fontWeight:"800",fontSize:"13px"},children:"Front ID"}),_.jsx("img",{src:d.idDocuments?.front,style:{width:"100%",borderRadius:"12px"}})]}),_.jsxs("div",{children:[_.jsx("p",{style:{fontWeight:"800",fontSize:"13px"},children:"Back ID"}),_.jsx("img",{src:d.idDocuments?.back,style:{width:"100%",borderRadius:"12px"}})]}),_.jsxs("div",{children:[_.jsx("p",{style:{fontWeight:"800",fontSize:"13px"},children:"Address"}),_.jsx("img",{src:d.addressDocument,style:{width:"100%",borderRadius:"12px"}})]})]})]})}),_.jsx("div",{style:{background:"white",borderRadius:"24px",border:"1px solid #E2E8F0",overflow:"hidden"},children:_.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[_.jsx("thead",{style:{background:"#F8FAFC"},children:_.jsxs("tr",{children:[_.jsx("th",{style:wd,children:"Broker Name"}),_.jsx("th",{style:wd,children:"Email"}),_.jsx("th",{style:wd,children:"Status"}),_.jsx("th",{style:wd,children:"Actions"})]})}),_.jsx("tbody",{children:r.map(v=>_.jsxs("tr",{style:{borderBottom:"1px solid #F1F5F9"},children:[_.jsxs("td",{style:Sd,children:[_.jsx("div",{style:{fontWeight:"700"},children:v.fullName||"Anonymous"}),_.jsxs("div",{style:{fontSize:"12px",color:"#64748B"},children:["ID: ",v.id.slice(0,8),"..."]})]}),_.jsx("td",{style:Sd,children:v.email}),_.jsx("td",{style:Sd,children:_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[v.verified?_.jsx("span",{style:{...Um,background:"#10B98115",color:"#10B981"},children:"Verified"}):_.jsx("span",{style:{...Um,background:"#F59E0B15",color:"#F59E0B"},children:"Unverified"}),v.isBlocked&&_.jsx("span",{style:{...Um,background:"#EF444415",color:"#EF4444"},children:"Blocked"})]})}),_.jsx("td",{style:Sd,children:_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("button",{onClick:()=>y(v),style:{...Fm,color:"var(--color-brand)"},children:"View Docs"}),!v.verified&&_.jsx("button",{onClick:()=>BL(v.id),style:Fm,children:"Verify"}),_.jsx("button",{onClick:()=>h(v.id,v.isBlocked),style:{...Fm,color:v.isBlocked?"#10B981":"#EF4444"},children:v.isBlocked?"Unblock":"Block"})]})})]},v.id))})]})})]})},BL=async r=>{try{const n=await Ae.currentUser.getIdToken();(await fetch(`http://localhost:5000/api/admin/brokers/${r}/verify`,{method:"PUT",headers:{Authorization:`Bearer ${n}`}})).ok&&(setBrokers(brokers.map(l=>l.id===r?{...l,verified:!0}:l)),alert("Broker Verified!"))}catch{alert("Verification failed")}},UL={position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",backdropFilter:"blur(8px)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},FL={background:"white",padding:"32px",borderRadius:"24px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto"},wd={padding:"16px 24px",textAlign:"left",fontSize:"13px",fontWeight:"800",color:"#64748B"},Sd={padding:"20px 24px",fontSize:"14px"},Um={padding:"4px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:"800"},Fm={padding:"6px 14px",borderRadius:"8px",border:"1px solid #E2E8F0",background:"white",fontSize:"12px",fontWeight:"700",cursor:"pointer"},Hm=({children:r})=>{const t=an(),n=Ei(),s=[{title:"Dashboard",icon:"grid_view",path:"/admin"},{title:"Listing Review",icon:"list_alt",path:"/admin/listings"},{title:"Return to App",icon:"arrow_back",path:"/tenant/dashboard"}],l=()=>{Ae.signOut(),t("/login")};return _.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"#F8FAFC"},children:[_.jsxs("div",{style:{width:"280px",background:"#1E293B",display:"flex",flexDirection:"column",position:"fixed",height:"100vh",zIndex:100,color:"white"},children:[_.jsxs("div",{style:{padding:"32px 24px",display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3B82F6, #1E3A8A)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:_.jsx("span",{className:"material-icons-round",children:"security"})}),_.jsxs("span",{style:{fontSize:"22px",fontWeight:"900",color:"white",letterSpacing:"-0.5px"},children:["StayNest ",_.jsx("span",{style:{color:"#3B82F6"},children:"Admin"})]})]}),_.jsxs("div",{style:{flex:1,padding:"0 16px"},children:[_.jsx("p",{style:{fontSize:"11px",fontWeight:"700",color:"#64748B",textTransform:"uppercase",letterSpacing:"1.5px",padding:"0 12px",marginBottom:"24px"},children:"Management Console"}),s.map(h=>{const d=n.pathname===h.path;return _.jsxs("div",{onClick:()=>t(h.path),style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",borderRadius:"14px",marginBottom:"8px",cursor:"pointer",background:d?"#3B82F6":"transparent",color:d?"white":"#94A3B8",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",fontWeight:d?"700":"600"},onMouseOver:y=>{d||(y.currentTarget.style.color="white",y.currentTarget.style.background="rgba(255,255,255,0.05)")},onMouseOut:y=>{d||(y.currentTarget.style.color="#94A3B8",y.currentTarget.style.background="transparent")},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"22px"},children:h.icon}),_.jsx("span",{style:{fontSize:"15px"},children:h.title})]},h.path)})]}),_.jsx("div",{style:{padding:"24px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:_.jsxs("div",{onClick:l,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",cursor:"pointer",color:"#F87171",fontWeight:"700",transition:"all 0.2s ease"},onMouseOver:h=>h.currentTarget.style.background="rgba(239, 68, 68, 0.1)",onMouseOut:h=>h.currentTarget.style.background="transparent",children:[_.jsx("span",{className:"material-icons-round",children:"logout"}),_.jsx("span",{children:"Sign Out"})]})})]}),_.jsx("div",{style:{flex:1,marginLeft:"280px"},children:_.jsx("div",{style:{padding:"40px",maxWidth:"1200px",margin:"0 auto"},children:r})})]})},wb=()=>{const r=an(),t=Ei(),[n,s]=M.useState([]),[l,h]=M.useState(!0),d=Ae.currentUser,y=t.pathname.startsWith("/broker"),[v,b]=M.useState({});return M.useEffect(()=>{if(!d){h(!1);return}const w=vl(ea(ze,"chats"),ju("participants","array-contains",d.uid),E_("lastUpdateTime","desc")),C=ps(w,async I=>{const O=I.docs.map(V=>{const $=V.data(),q=$.participants.find(nt=>nt!==d.uid)||"admin";return{id:V.id,otherUserId:q,...$}}),Z={...v},G=[...new Set(O.map(V=>V.otherUserId))];await Promise.all(G.map(async V=>{if(V==="admin")Z[V]="Support";else if(!Z[V])try{const $=await fl(Mn(ze,"users",V));$.exists()&&(Z[V]=$.data().fullName||"User")}catch($){console.error("Error fetching user name:",$)}})),b(Z),s(O),h(!1)},I=>{console.error("Inbox Listen Error:",I),h(!1)});return()=>C()},[d]),_.jsxs("div",{style:{padding:y?"0":"16px",paddingBottom:"90px",maxWidth:y?"100%":"600px",margin:y?"0":"0 auto"},children:[_.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"32px"},children:_.jsx("h1",{style:{margin:0,fontSize:y?"28px":"24px",color:"var(--color-brand)",fontWeight:"800",letterSpacing:"-0.5px"},children:"Messages"})}),l?_.jsx("div",{style:{textAlign:"center",marginTop:"40px"},children:_.jsx("div",{className:"spinner-small",style:{margin:"0 auto"}})}):n.length===0?_.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#666",background:"#f9f9f9",borderRadius:"20px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"48px",color:"#eee",marginBottom:"16px"},children:"forum"}),_.jsx("p",{style:{margin:0,fontWeight:"600"},children:"No messages yet"}),_.jsx("p",{style:{fontSize:"13px",color:"#717171"},children:"Contact brokers to start a conversation."})]}):_.jsx("div",{children:n.map(w=>_.jsxs("div",{onClick:()=>r(y?`/broker/messages/${w.otherUserId}`:`/messages/${w.otherUserId}`),style:{background:"white",padding:"16px",borderRadius:"16px",marginBottom:"12px",border:"1px solid #f0f0f0",display:"flex",gap:"16px",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.02)"},children:[_.jsx("div",{style:{width:"44px",height:"44px",background:"var(--color-brand)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:_.jsx("span",{className:"material-icons-round",children:"person"})}),_.jsxs("div",{style:{flex:1},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px"},children:[_.jsx("h4",{style:{margin:0,fontSize:"15px",fontWeight:"700",color:"#222"},children:v[w.otherUserId]||(w.otherUserId==="admin"?"Support":"User")}),_.jsx("span",{style:{fontSize:"11px",color:"#717171"},children:w.lastUpdateTime?.toDate().toLocaleDateString()===new Date().toLocaleDateString()?w.lastUpdateTime?.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):w.lastUpdateTime?.toDate().toLocaleDateString()})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsxs("div",{style:{flex:1},children:[w.propertyTitle&&_.jsxs("div",{style:{fontSize:"11px",color:"var(--color-brand)",fontWeight:"600",marginBottom:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"14px"},children:"home"}),w.propertyTitle]}),_.jsx("p",{style:{margin:0,fontSize:"13px",color:w[`unreadCount_${d.uid}`]>0?"#000":"#717171",fontWeight:w[`unreadCount_${d.uid}`]>0?"700":"400",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"220px"},children:w.lastMessage})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"4px"},children:[w[`unreadCount_${d.uid}`]>0&&_.jsx("div",{style:{background:"var(--color-brand)",color:"white",borderRadius:"50%",minWidth:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"800",padding:"0 6px"},children:w[`unreadCount_${d.uid}`]}),w.messageCount&&_.jsxs("div",{style:{fontSize:"10px",color:"#94A3B8",fontWeight:"600"},children:[w.messageCount," msg"]})]})]})]})]},w.id))}),!y&&_.jsx(kf,{})]})},Sb=()=>{const r=an(),{id:t}=Sg(),n=Ei(),s=n.pathname.startsWith("/broker"),[l,h]=M.useState(""),[d,y]=M.useState([]),[v,b]=M.useState(null),[w,C]=M.useState(null),I=M.useRef(),O=n.state||{},Z=Ae.currentUser,V=(()=>{if(!Z||!t)return null;const q=[Z.uid,t].sort();return`${q[0]}_${q[1]}`})();M.useEffect(()=>{if(!V)return;(async()=>{const Tt=await fl(Mn(ze,"users",t));Tt.exists()&&b(Tt.data())})();const nt=ps(Mn(ze,"chats",V),Tt=>{Tt.exists()&&C(Tt.data())}),lt=vl(ea(ze,"chats",V,"messages"),E_("createdAt","asc")),bt=ps(lt,Tt=>{const k=Tt.docs.map(D=>({id:D.id,...D.data()}));y(k),k.length>0&&Z&&mo(Mn(ze,"chats",V),{[`unreadCount_${Z.uid}`]:0}).catch(D=>console.error("Error resetting unread count:",D)),setTimeout(()=>{I.current?.scrollIntoView({behavior:"smooth"})},100)});return()=>{bt(),nt()}},[V,t,Z.uid]);const $=async q=>{if(q.preventDefault(),!l.trim()||!Z||!V)return;const nt=l;h("");try{const lt={participants:[Z.uid,t],lastMessage:nt,lastUpdateTime:rf(),messageCount:vg(1),[`unreadCount_${t}`]:vg(1)};O.propertyId&&!w?.propertyId&&(lt.propertyId=O.propertyId,lt.propertyTitle=O.propertyTitle),await Tw(Mn(ze,"chats",V),lt,{merge:!0}),await w_(ea(ze,"chats",V,"messages"),{text:nt,senderId:Z.uid,createdAt:rf()})}catch(lt){console.error("Error sending message:",lt),alert("Failed to send message. Please try again.")}};return _.jsxs("div",{style:{display:"flex",flexDirection:"column",height:s?"calc(100vh - 120px)":"100vh",background:"#fff",position:s?"relative":"fixed",top:0,left:0,width:"100%",zIndex:1e3,borderRadius:s?"24px":"0",overflow:"hidden",border:s?"1px solid #E2E8F0":"none",boxShadow:s?"0 4px 20px rgba(0,0,0,0.03)":"none"},children:[_.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #eee",display:"flex",alignItems:"center",gap:"12px",background:"white"},children:[!s&&_.jsx("button",{onClick:()=>r(-1),style:{background:"none",border:"none",cursor:"pointer",padding:0,display:"flex"},children:_.jsx("span",{className:"material-icons-round",children:"arrow_back"})}),_.jsx("div",{style:{width:"40px",height:"40px",background:"var(--color-brand)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"24px"},children:"person"})}),_.jsxs("div",{children:[_.jsx("h3",{style:{margin:0,fontSize:"16px",color:"var(--color-text-pri)"},children:v?.fullName||"Broker"}),_.jsx("span",{style:{fontSize:"12px",color:"var(--color-success)",fontWeight:"600"},children:"Online"})]})]}),(O.propertyTitle||w?.propertyTitle)&&_.jsxs("div",{style:{padding:"8px 16px",background:"var(--color-brand-light)",color:"var(--color-brand)",fontSize:"13px",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px"},children:"info"}),_.jsxs("span",{children:["Inquiring about: ",_.jsx("b",{children:O.propertyTitle||w?.propertyTitle})]})]}),_.jsxs("div",{style:{flex:1,padding:"16px",overflowY:"auto",background:"#F7F7F7",display:"flex",flexDirection:"column",gap:"12px"},children:[d.length===0&&_.jsxs("div",{style:{textAlign:"center",color:"#999",marginTop:"40px"},children:[_.jsx("span",{className:"material-icons-round",style:{fontSize:"48px",marginBottom:"8px"},children:"chat_bubble_outline"}),_.jsx("p",{children:"No messages yet. Say hi!"})]}),d.map(q=>_.jsx("div",{style:{alignSelf:q.senderId===Z.uid?"flex-end":"flex-start",background:q.senderId===Z.uid?"var(--color-brand)":"white",color:q.senderId===Z.uid?"white":"var(--color-text-pri)",padding:"12px 16px",borderRadius:"18px",borderTopRightRadius:q.senderId===Z.uid?"4px":"18px",borderTopLeftRadius:q.senderId===Z.uid?"18px":"4px",maxWidth:"80%",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",fontSize:"15px",lineHeight:1.5,whiteSpace:"pre-wrap",wordBreak:"break-word",border:q.senderId===Z.uid?"none":"1px solid #F1F5F9"},children:q.text},q.id)),_.jsx("div",{ref:I})]}),_.jsxs("form",{onSubmit:$,style:{padding:"16px",borderTop:"1px solid #eee",display:"flex",gap:"12px",alignItems:"center",background:"white"},children:[_.jsx("input",{type:"text",value:l,onChange:q=>h(q.target.value),placeholder:"Type a message...",style:{flex:1,padding:"12px 20px",borderRadius:"25px",border:"1px solid #ddd",outline:"none",background:"#F7F7F7",fontSize:"15px"}}),_.jsx("button",{type:"submit",disabled:!l.trim(),style:{background:"var(--color-success)",color:"white",border:"none",borderRadius:"50%",width:"44px",height:"44px",cursor:l.trim()?"pointer":"default",opacity:l.trim()?1:.6,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 10px rgba(34,197,94,0.2)"},children:_.jsx("span",{className:"material-icons-round",children:"send"})})]})]})},HL=()=>{const r=an(),t=[{id:1,type:"success",title:"Viewing Confirmed",message:'Your viewing for "Modern Studio near Trinity" is scheduled for Thu, 12th Oct at 14:00.',time:"2 hours ago",read:!1},{id:2,type:"info",title:"New Message",message:"Conor O'Brien replied to your enquiry.",time:"5 hours ago",read:!0},{id:3,type:"warning",title:"Profile Incomplete",message:"Please upload your student ID to verify your status.",time:"1 day ago",read:!0}];return _.jsxs("div",{style:{padding:"16px",paddingBottom:"80px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[_.jsx("button",{onClick:()=>r(-1),style:{background:"none",border:"none"},children:_.jsx("span",{className:"material-icons-round",children:"arrow_back"})}),_.jsx("h1",{style:{fontSize:"24px",margin:0},children:"Notifications"})]}),_.jsx("div",{children:t.map(n=>_.jsxs("div",{style:{background:n.read?"white":"#F0F9FF",border:"1px solid #eee",padding:"16px",borderRadius:"12px",marginBottom:"12px",display:"flex",gap:"12px",borderLeft:`4px solid ${n.type==="success"?"#10B981":n.type==="warning"?"#F59E0B":"#3B82F6"}`},children:[_.jsx("div",{style:{background:n.type==="success"?"#D1FAE5":n.type==="warning"?"#FEF3C7":"#DBEAFE",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:_.jsx("span",{className:"material-icons-round",style:{color:n.type==="success"?"#047857":n.type==="warning"?"#B45309":"#1D4ED8",fontSize:"20px"},children:n.type==="success"?"check_circle":n.type==="warning"?"warning":"info"})}),_.jsxs("div",{style:{flex:1},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[_.jsx("h4",{style:{margin:0,fontSize:"16px"},children:n.title}),_.jsx("span",{style:{fontSize:"12px",color:"#999"},children:n.time})]}),_.jsx("p",{style:{margin:0,fontSize:"14px",color:"#555",lineHeight:"1.4"},children:n.message})]})]},n.id))})]})},qL=()=>{const[r,t]=M.useState(!1),[n,s]=M.useState([{text:"Hi! I am the StayNest AI. Ask me about Irish rental laws, neighborhoods, or sightseeing in Dublin!",sender:"bot"}]),[l,h]=M.useState(""),d=v=>{const b=v.toLowerCase();return b.includes("dublin 2")||b.includes("d2")||b.includes("stephen's green")?"Dublin 2 is the heartbeat of the city! You must visit St. Stephen's Green, the Creative Quarter, and the National Museum. It's a premium area for students.":b.includes("dublin 1")||b.includes("d1")||b.includes("smithfield")?"Dublin 1 & Smithfield have a great mix of old and new. Check out the Jameson Distillery, the Lighthouse Cinema, and the spire on O'Connell Street!":b.includes("dublin 4")||b.includes("d4")||b.includes("ballsbridge")?"Dublin 4 is one of the most prestigious areas. Don't miss Herbert Park and the RDS. It's very safe and green, perfect for quiet study.":b.includes("temple bar")?"Temple Bar is famous for its culture and nightlife, but it can be noisy! Great for weekend sightseeing and street art, though.":b.includes("trinity")||b.includes("tcd")?"Trinity College students love the Pav for hanging out and the Long Room library for inspiration. You're right in the city center!":b.includes("ucd")||b.includes("belfield")?"UCD's Belfield campus is massive. Pro tip: The lakeside walk is great for clearing your head after lectures. Most students live in D4 or D6.":b.includes("dcu")||b.includes("glasnevin")?"DCU students should explore the Botanic Gardens nearby. Glasnevin is a friendly residential area with great bus links to the city center.":b.includes("tud")||b.includes("grangegorman")?"TU Dublin's Grangegorman campus is brand new! The area is becoming a major student hub with cool cafes and easy Luas access.":b.includes("deposit")?"In Ireland, deposits are usually one month's rent. Landlords must return it promptly unless there are damages.":b.includes("rtb")?"The RTB (Residential Tenancies Board) handles dispute resolution and tenancy registration. It's your main protection as a tenant.":"That's a great question! I specialize in Dublin neighborhoods and rental laws. Try asking about 'Dublin 2' or 'Trinity College' for some tips!"},y=v=>{if(v.preventDefault(),!l.trim())return;const b={text:l,sender:"user"};s([...n,b]);const w=l;h(""),setTimeout(()=>{const C=d(w);s(I=>[...I,{text:C,sender:"bot"}])},1e3)};return _.jsxs("div",{style:{position:"fixed",bottom:"24px",right:"24px",zIndex:9999},children:[_.jsx("style",{children:`
                    @keyframes chatPulse {
                        0% { transform: scale(1); box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3); }
                        50% { transform: scale(1.05); box-shadow: 0 8px 24px rgba(34, 197, 94, 0.5); }
                        100% { transform: scale(1); box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3); }
                    }
                `}),!r&&_.jsx("button",{onClick:()=>t(!0),style:{width:"64px",height:"64px",borderRadius:"50%",background:"var(--color-cta)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",animation:"chatPulse 3s infinite ease-in-out",color:"white",boxShadow:"0 4px 12px rgba(34, 197, 94, 0.4)"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"32px"},children:"smart_toy"})}),r&&_.jsxs("div",{style:{width:"360px",height:"500px",background:"white",borderRadius:"24px",boxShadow:"0 12px 48px rgba(0,0,0,0.15)",display:"flex",flexDirection:"column",overflow:"hidden",border:"1px solid #E2E8F0"},children:[_.jsxs("div",{style:{padding:"20px",background:"var(--color-brand)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[_.jsx("div",{style:{background:"rgba(255,255,255,0.2)",padding:"6px",borderRadius:"10px"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"20px"},children:"smart_toy"})}),_.jsx("span",{style:{fontWeight:"800",fontSize:"16px",letterSpacing:"0.5px"},children:"StayNest Assistant"})]}),_.jsx("button",{onClick:()=>t(!1),style:{background:"rgba(255,255,255,0.1)",border:"none",color:"white",width:"30px",height:"30px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx("span",{className:"material-icons-round",style:{fontSize:"18px"},children:"close"})})]}),_.jsx("div",{style:{flex:1,padding:"20px",overflowY:"auto",background:"#F8FAFC"},children:n.map((v,b)=>_.jsx("div",{style:{display:"flex",justifyContent:v.sender==="user"?"flex-end":"flex-start",marginBottom:"16px"},children:_.jsx("div",{style:{background:v.sender==="user"?"var(--color-cta)":"white",color:v.sender==="user"?"white":"#1E293B",padding:"12px 16px",borderRadius:v.sender==="user"?"18px 18px 4px 18px":"18px 18px 18px 4px",maxWidth:"85%",fontSize:"14.5px",lineHeight:"1.5",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:v.sender==="bot"?"1px solid #E2E8F0":"none",fontWeight:v.sender==="user"?"600":"500"},children:v.text})},b))}),_.jsxs("form",{onSubmit:y,style:{padding:"16px",borderTop:"1px solid #E2E8F0",display:"flex",gap:"10px",background:"white"},children:[_.jsx("input",{type:"text",value:l,onChange:v=>h(v.target.value),placeholder:"Dublin sightseeing or neighborhoods...",style:{flex:1,padding:"12px 18px",borderRadius:"25px",border:"1px solid #E2E8F0",fontSize:"14px",outline:"none",background:"#F1F5F9"}}),_.jsx("button",{type:"submit",style:{background:"var(--color-brand)",color:"white",border:"none",width:"42px",height:"42px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:_.jsx("span",{className:"material-icons-round",children:"send"})})]})]})]})};function GL(){return _.jsxs("div",{className:"app-container",children:[_.jsx(qL,{}),_.jsxs(nA,{children:[_.jsx(rn,{path:"/",element:_.jsx(tA,{to:"/login",replace:!0})}),_.jsx(rn,{path:"/login",element:_.jsx(YD,{})}),_.jsx(rn,{path:"/register",element:_.jsx(QD,{})}),_.jsx(rn,{path:"/profile",element:_.jsx(yb,{})}),_.jsx(rn,{path:"/notifications",element:_.jsx(HL,{})}),_.jsx(rn,{path:"/tenant/dashboard",element:_.jsx(CL,{})}),_.jsx(rn,{path:"/tenant/favorites",element:_.jsx(NL,{})}),_.jsx(rn,{path:"/property/:id",element:_.jsx(PL,{})}),_.jsx(rn,{path:"/messages",element:_.jsx(wb,{})}),_.jsx(rn,{path:"/messages/:id",element:_.jsx(Sb,{})}),_.jsx(rn,{path:"/broker/dashboard",element:_.jsx(rl,{children:_.jsx(DL,{})})}),_.jsx(rn,{path:"/broker/new-listing",element:_.jsx(rl,{children:_.jsx(LL,{})})}),_.jsx(rn,{path:"/broker/edit-listing/:id",element:_.jsx(rl,{children:_.jsx(OL,{})})}),_.jsx(rn,{path:"/broker/verification",element:_.jsx(rl,{children:_.jsx(kL,{})})}),_.jsx(rn,{path:"/broker/messages",element:_.jsx(rl,{children:_.jsx(wb,{})})}),_.jsx(rn,{path:"/broker/messages/:id",element:_.jsx(rl,{children:_.jsx(Sb,{})})}),_.jsx(rn,{path:"/broker/profile",element:_.jsx(rl,{children:_.jsx(yb,{})})}),_.jsx(rn,{path:"/admin",element:_.jsx(Hm,{children:_.jsx(ML,{})})}),_.jsx(rn,{path:"/admin/listings",element:_.jsx(Hm,{children:_.jsx(zL,{})})}),_.jsx(rn,{path:"/admin/brokers",element:_.jsx(Hm,{children:_.jsx(VL,{})})})]})]})}const Ab=()=>{rS.createRoot(document.getElementById("root")).render(_.jsx(jd.StrictMode,{children:_.jsx(AA,{children:_.jsx(GL,{})})}))};window.cordova?document.addEventListener("deviceready",Ab,!1):Ab();
